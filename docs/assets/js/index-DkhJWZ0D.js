const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["./Home-Cn0aDvqc.js","./vendor-CBGg7cPT.js","./naive-ui-CtewNtT3.js","../css/Home-DRbqV8bC.css","./Cultivation-ahFUc6EJ.js","./LogPanel-ComOJV2M.js","../css/LogPanel-g2PkOB5a.css","./GameGuide-Sg6BGPLx.js","../css/GameGuide-D-sLEQoa.css","../css/Cultivation-DkaKNfNb.css","./Inventory-Dc86XHrZ.js","../css/Inventory-qf_ZPkbV.css","./Exploration-CYfinN5Z.js","./herbs-Cu1BpqBJ.js","../css/Exploration-BfdbT9Yh.css","./Achievements-CVl-0jNA.js","../css/Achievements-DHdrB-DS.css","./Settings-9SbvFsTL.js","./GM-C3JCpAVx.js","./Alchemy-jDqAAhM7.js","../css/Alchemy-CzVRLy2z.css","./Dungeon-CdFWjda1.js","../css/Dungeon-BFkJ1Asg.css","./Gacha-B2S0fntG.js","./sfx-Bhf_myqE.js","../css/Gacha-VaTW_lL8.css","./Recharge-ByiLlN8N.js","../css/Recharge-QLOLhmV_.css","./Vip-D6lUPO83.js","../css/Vip-DgzE_uCF.css","./Rank-D39Ti82m.js","../css/Rank-a-PBqdFb.css","./Shop-Cr3ZZ5Ou.js","../css/Shop-D5md9e1n.css","./Events-B6at7rGJ.js","../css/Events-mhXSWnQL.css","./PK-CEXSoXU1.js","../css/PK-DsYLuMr_.css","./Sect-DAb885fw.js","../css/Sect-WdKZ-B50.css","./AdminEvents-CdbS2MGd.js","../css/AdminEvents-B1qPClRZ.css","./WorldBoss-C-_CGE-g.js","../css/WorldBoss-B3WhNoVt.css","./Friends-CWDkO_4l.js","../css/Friends-Cp_WyZ5T.css","./SectWar-BRP8fFzN.js","../css/SectWar-C_qMhS-G.css","./Auction-PnbqNxNU.js","../css/Auction-DTOVF3fH.css","./DailyDungeon-Bt5WBGo9.js","../css/DailyDungeon--PWIxYDb.css","./MountTitle-D-OKGX-O.js","../css/MountTitle-BOFeQyli.css","./Ascension-CWmxcjcF.js","../css/Ascension-CPC_tXr8.css","./Profile-DrHtBP0z.js","../css/Profile-D8eejUV0.css"])))=>i.map(i=>d[i]);
import{bc as e,bd as t,be as a,w as s,o as i,aC as n,bf as o,bg as l,bh as r,bi as c,bj as m,aW as u,_ as h,v as d,F as p,bk as v,bl as g,bm as b,r as f,W as y,b7 as _,b1 as R,q as k,bn as x,E as C,bo as w,bp as D,bq as A,br as E,bs as P,bt as S,bu as B,bv as T,bw as M,bx as I,by as L,bz as O,bA as j,bB as $,bC as N,bD as V,bE as q,bF as F,bG as z,bH as H,b0 as W,bI as G}from"./vendor-CBGg7cPT.js";import{c as J,d as U,_ as Y,N as K,a as Q,b as X,e as Z,f as ee,g as te,h as ae,i as se}from"./naive-ui-CtewNtT3.js";!function(){const e=document.createElement("link").relList;if(!(e&&e.supports&&e.supports("modulepreload"))){for(const e of document.querySelectorAll('link[rel="modulepreload"]'))t(e);new MutationObserver(e=>{for(const a of e)if("childList"===a.type)for(const e of a.addedNodes)"LINK"===e.tagName&&"modulepreload"===e.rel&&t(e)}).observe(document,{childList:!0,subtree:!0})}function t(e){if(e.ep)return;e.ep=!0;const t=function(e){const t={};return e.integrity&&(t.integrity=e.integrity),e.referrerPolicy&&(t.referrerPolicy=e.referrerPolicy),"use-credentials"===e.crossOrigin?t.credentials="include":"anonymous"===e.crossOrigin?t.credentials="omit":t.credentials="same-origin",t}(e);fetch(e.href,t)}}();const ie=""+new URL("../images/logo.png",import.meta.url).href;class ne{static async getData(){return null}static async setData(){}}const oe={grade1:{name:"ä¸€å“",difficulty:1,successRate:.9},grade2:{name:"äºŒå“",difficulty:1.2,successRate:.8},grade3:{name:"ä¸‰å“",difficulty:1.5,successRate:.7},grade4:{name:"å››å“",difficulty:2,successRate:.6},grade5:{name:"äº”å“",difficulty:2.5,successRate:.5},grade6:{name:"å…­å“",difficulty:3,successRate:.4},grade7:{name:"ä¸ƒå“",difficulty:4,successRate:.3},grade8:{name:"å…«å“",difficulty:5,successRate:.2},grade9:{name:"ä¹å“",difficulty:6,successRate:.1}},le={spirit:{name:"ç„°çµç±»",effectMultiplier:1},cultivation:{name:"ç„°ä¿®ç±»",effectMultiplier:1.2},attribute:{name:"å±æ€§ç±»",effectMultiplier:1.5},special:{name:"ç‰¹æ®Šç±»",effectMultiplier:2}},re=e=>5*parseInt(e.replace("grade",""))+5,ce=[{id:"spirit_gathering",name:"èšçµä¸¹",description:"æå‡ç„°çµæ¢å¤é€Ÿåº¦çš„ç„°ä¸¹ã€‚æ•ˆæœï¼šç„°çµæ¢å¤+20%ï¼ŒæŒç»­60åˆ†é’Ÿ",grade:"grade1",type:"spirit",materials:[{herb:"spirit_grass",count:2},{herb:"cloud_flower",count:1}],fragmentsNeeded:re("grade1"),baseEffect:{type:"spiritRate",value:.2,duration:3600}},{id:"cultivation_boost",name:"èšæ°”ä¸¹",description:"æå‡ç„°ä¿®é€Ÿåº¦çš„ç„°ä¸¹ã€‚æ•ˆæœï¼šç„°ä¿®é€Ÿåº¦+30%ï¼ŒæŒç»­30åˆ†é’Ÿ",grade:"grade2",type:"cultivation",materials:[{herb:"cloud_flower",count:2},{herb:"thunder_root",count:1}],fragmentsNeeded:re("grade2"),baseEffect:{type:"cultivationRate",value:.3,duration:1800}},{id:"thunder_power",name:"é›·çµä¸¹",description:"æå‡æˆ˜æ–—å±æ€§çš„ç„°ä¸¹ã€‚æ•ˆæœï¼šæˆ˜æ–—å±æ€§+40%ï¼ŒæŒç»­15åˆ†é’Ÿ",grade:"grade3",type:"attribute",materials:[{herb:"thunder_root",count:2},{herb:"dragon_breath_herb",count:1}],fragmentsNeeded:re("grade3"),baseEffect:{type:"combatBoost",value:.4,duration:900}},{id:"immortal_essence",name:"ä»™çµä¸¹",description:"å…¨å±æ€§æå‡çš„ç¥å¥‡ç„°ä¸¹ã€‚æ•ˆæœï¼šå…¨å±æ€§+50%ï¼ŒæŒç»­10åˆ†é’Ÿ",grade:"grade4",type:"special",materials:[{herb:"dragon_breath_herb",count:2},{herb:"immortal_jade_grass",count:1}],fragmentsNeeded:re("grade4"),baseEffect:{type:"allAttributes",value:.5,duration:600}},{id:"five_elements_pill",name:"äº”è¡Œä¸¹",description:"èåˆäº”è¡Œä¹‹åŠ›çš„ç¥å¥‡ç„°ä¸¹ï¼Œå…¨é¢æå‡ç„°ä¿®è€…ç´ è´¨ã€‚æ•ˆæœï¼šå…¨å±æ€§+80%ï¼ŒæŒç»­20åˆ†é’Ÿ",grade:"grade5",type:"attribute",materials:[{herb:"five_elements_grass",count:2},{herb:"phoenix_feather_herb",count:1}],fragmentsNeeded:re("grade5"),baseEffect:{type:"allAttributes",value:.8,duration:1200}},{id:"celestial_essence_pill",name:"å¤©å…ƒä¸¹",description:"å‡èšå¤©åœ°ç²¾åçš„æå“ç„°ä¸¹ï¼Œå¤§å¹…æå‡ç„°ä¿®é€Ÿåº¦ã€‚æ•ˆæœï¼šç„°ä¿®é€Ÿåº¦+100%ï¼ŒæŒç»­30åˆ†é’Ÿ",grade:"grade6",type:"cultivation",materials:[{herb:"celestial_dew_grass",count:2},{herb:"moonlight_orchid",count:1}],fragmentsNeeded:re("grade6"),baseEffect:{type:"cultivationRate",value:1,duration:1800}},{id:"sun_moon_pill",name:"æ—¥æœˆä¸¹",description:"èåˆæ—¥æœˆç²¾åçš„ç„°ä¸¹ï¼Œèƒ½å¤§å¹…æå‡ç„°çµä¸Šé™ã€‚æ•ˆæœï¼šç„°çµä¸Šé™+150%ï¼ŒæŒç»­40åˆ†é’Ÿ",grade:"grade7",type:"spirit",materials:[{herb:"sun_essence_flower",count:2},{herb:"moonlight_orchid",count:2}],fragmentsNeeded:re("grade7"),baseEffect:{type:"spiritCap",value:1.5,duration:2400}},{id:"phoenix_rebirth_pill",name:"æ¶…æ§ƒä¸¹",description:"è•´å«ä¸æ­»å‡¤å‡°ä¹‹åŠ›çš„ç¥ä¸¹ï¼Œèƒ½åœ¨æˆ˜æ–—ä¸­è‡ªåŠ¨æ¢å¤ç”Ÿå‘½ã€‚æ•ˆæœï¼šæˆ˜æ–—ä¸­è‡ªåŠ¨æ¢å¤10%ç”Ÿå‘½ï¼ŒæŒç»­60åˆ†é’Ÿ",grade:"grade8",type:"special",materials:[{herb:"phoenix_feather_herb",count:3},{herb:"celestial_dew_grass",count:1}],fragmentsNeeded:re("grade8"),baseEffect:{type:"autoHeal",value:.1,duration:3600}},{id:"spirit_recovery",name:"å›çµä¸¹",description:"å¿«é€Ÿæ¢å¤ç„°çµçš„ç„°ä¸¹ã€‚æ•ˆæœï¼šç„°çµæ¢å¤é€Ÿåº¦+40%ï¼ŒæŒç»­20åˆ†é’Ÿ",grade:"grade2",type:"spirit",materials:[{herb:"dark_yin_grass",count:2},{herb:"frost_lotus",count:1}],fragmentsNeeded:re("grade2"),baseEffect:{type:"spiritRecovery",value:.4,duration:1200}},{id:"essence_condensation",name:"å‡å…ƒä¸¹",description:"æå‡ç„°ä¿®æ•ˆç‡çš„é«˜çº§ç„°ä¸¹ã€‚æ•ˆæœï¼šç„°ä¿®æ•ˆç‡+50%ï¼ŒæŒç»­25åˆ†é’Ÿ",grade:"grade3",type:"cultivation",materials:[{herb:"nine_leaf_lingzhi",count:2},{herb:"purple_ginseng",count:1}],fragmentsNeeded:re("grade3"),baseEffect:{type:"cultivationEfficiency",value:.5,duration:1500}},{id:"mind_clarity",name:"æ¸…å¿ƒä¸¹",description:"æå‡å¿ƒå¢ƒå’Œæ‚Ÿæ€§çš„ç„°ä¸¹ã€‚æ•ˆæœï¼šæ‚Ÿæ€§+30%ï¼ŒæŒç»­40åˆ†é’Ÿ",grade:"grade3",type:"special",materials:[{herb:"frost_lotus",count:2},{herb:"fire_heart_flower",count:1}],fragmentsNeeded:re("grade3"),baseEffect:{type:"comprehension",value:.3,duration:2400}},{id:"fire_essence",name:"ç«å…ƒä¸¹",description:"æå‡ç«å±æ€§ç„°ä¿®é€Ÿåº¦çš„ç„°ä¸¹ã€‚æ•ˆæœï¼šç«å±æ€§ç„°ä¿®é€Ÿåº¦+60%ï¼ŒæŒç»­30åˆ†é’Ÿ",grade:"grade4",type:"attribute",materials:[{herb:"fire_heart_flower",count:2},{herb:"dragon_breath_herb",count:1}],fragmentsNeeded:re("grade4"),baseEffect:{type:"fireAttribute",value:.6,duration:1800}}],me=(e,t)=>{const a=oe[e.grade],s=le[e.type],i=1+.1*(t-1);return{type:e.baseEffect.type,value:e.baseEffect.value*s.effectMultiplier*i,duration:e.baseEffect.duration,successRate:a.successRate}},ue=(e,t,a,s=0,i=1)=>{for(const o of e.materials){if(t.filter(e=>e.id===o.herb).length<o.count)return{success:!1,message:"ææ–™ä¸è¶³"}}if(!a.pillRecipes.includes(e.id)&&s<e.fragmentsNeeded)return{success:!1,message:"ä¸¹æ–¹ä¸å®Œæ•´"};const n=oe[e.grade];return Math.random()>n.successRate*i?{success:!1,message:"ç„°ç‚¼å¤±è´¥"}:{success:!0,message:"ç„°ç‚¼æˆåŠŸ"}},he=[{name:"ç‡ƒç«ä¸€é‡",maxCultivation:100},{name:"ç‡ƒç«äºŒé‡",maxCultivation:200},{name:"ç‡ƒç«ä¸‰é‡",maxCultivation:300},{name:"ç‡ƒç«å››é‡",maxCultivation:400},{name:"ç‡ƒç«äº”é‡",maxCultivation:500},{name:"ç‡ƒç«å…­é‡",maxCultivation:600},{name:"ç‡ƒç«ä¸ƒé‡",maxCultivation:700},{name:"ç‡ƒç«å…«é‡",maxCultivation:800},{name:"ç‡ƒç«ä¹é‡",maxCultivation:900},{name:"é“¸ç‚‰ä¸€é‡",maxCultivation:1e3},{name:"é“¸ç‚‰äºŒé‡",maxCultivation:1200},{name:"é“¸ç‚‰ä¸‰é‡",maxCultivation:1400},{name:"é“¸ç‚‰å››é‡",maxCultivation:1600},{name:"é“¸ç‚‰äº”é‡",maxCultivation:1800},{name:"é“¸ç‚‰å…­é‡",maxCultivation:2e3},{name:"é“¸ç‚‰ä¸ƒé‡",maxCultivation:2200},{name:"é“¸ç‚‰å…«é‡",maxCultivation:2400},{name:"é“¸ç‚‰ä¹é‡",maxCultivation:2600},{name:"å‡ç„°ä¸€é‡",maxCultivation:3e3},{name:"å‡ç„°äºŒé‡",maxCultivation:3500},{name:"å‡ç„°ä¸‰é‡",maxCultivation:4e3},{name:"å‡ç„°å››é‡",maxCultivation:4500},{name:"å‡ç„°äº”é‡",maxCultivation:5e3},{name:"å‡ç„°å…­é‡",maxCultivation:5500},{name:"å‡ç„°ä¸ƒé‡",maxCultivation:6e3},{name:"å‡ç„°å…«é‡",maxCultivation:6500},{name:"å‡ç„°ä¹é‡",maxCultivation:7e3},{name:"ç„°å©´ä¸€é‡",maxCultivation:8e3},{name:"ç„°å©´äºŒé‡",maxCultivation:9e3},{name:"ç„°å©´ä¸‰é‡",maxCultivation:1e4},{name:"ç„°å©´å››é‡",maxCultivation:11e3},{name:"ç„°å©´äº”é‡",maxCultivation:12e3},{name:"ç„°å©´å…­é‡",maxCultivation:13e3},{name:"ç„°å©´ä¸ƒé‡",maxCultivation:14e3},{name:"ç„°å©´å…«é‡",maxCultivation:15e3},{name:"ç„°å©´ä¹é‡",maxCultivation:16e3},{name:"åŒ–ç„°ä¸€é‡",maxCultivation:18e3},{name:"åŒ–ç„°äºŒé‡",maxCultivation:2e4},{name:"åŒ–ç„°ä¸‰é‡",maxCultivation:22e3},{name:"åŒ–ç„°å››é‡",maxCultivation:24e3},{name:"åŒ–ç„°äº”é‡",maxCultivation:26e3},{name:"åŒ–ç„°å…­é‡",maxCultivation:28e3},{name:"åŒ–ç„°ä¸ƒé‡",maxCultivation:3e4},{name:"åŒ–ç„°å…«é‡",maxCultivation:32e3},{name:"åŒ–ç„°ä¹é‡",maxCultivation:35e3},{name:"ç„°è™šä¸€é‡",maxCultivation:4e4},{name:"ç„°è™šäºŒé‡",maxCultivation:45e3},{name:"ç„°è™šä¸‰é‡",maxCultivation:5e4},{name:"ç„°è™šå››é‡",maxCultivation:55e3},{name:"ç„°è™šäº”é‡",maxCultivation:6e4},{name:"ç„°è™šå…­é‡",maxCultivation:65e3},{name:"ç„°è™šä¸ƒé‡",maxCultivation:7e4},{name:"ç„°è™šå…«é‡",maxCultivation:75e3},{name:"ç„°è™šä¹é‡",maxCultivation:8e4},{name:"ç„°åˆä¸€é‡",maxCultivation:9e4},{name:"ç„°åˆäºŒé‡",maxCultivation:1e5},{name:"ç„°åˆä¸‰é‡",maxCultivation:11e4},{name:"ç„°åˆå››é‡",maxCultivation:12e4},{name:"ç„°åˆäº”é‡",maxCultivation:13e4},{name:"ç„°åˆå…­é‡",maxCultivation:14e4},{name:"ç„°åˆä¸ƒé‡",maxCultivation:15e4},{name:"ç„°åˆå…«é‡",maxCultivation:16e4},{name:"ç„°åˆä¹é‡",maxCultivation:17e4},{name:"å¤§ç„°ä¸€é‡",maxCultivation:2e5},{name:"å¤§ç„°äºŒé‡",maxCultivation:23e4},{name:"å¤§ç„°ä¸‰é‡",maxCultivation:26e4},{name:"å¤§ç„°å››é‡",maxCultivation:29e4},{name:"å¤§ç„°äº”é‡",maxCultivation:32e4},{name:"å¤§ç„°å…­é‡",maxCultivation:35e4},{name:"å¤§ç„°ä¸ƒé‡",maxCultivation:38e4},{name:"å¤§ç„°å…«é‡",maxCultivation:41e4},{name:"å¤§ç„°ä¹é‡",maxCultivation:45e4},{name:"æ¸¡ç„°ä¸€é‡",maxCultivation:5e5},{name:"æ¸¡ç„°äºŒé‡",maxCultivation:55e4},{name:"æ¸¡ç„°ä¸‰é‡",maxCultivation:6e5},{name:"æ¸¡ç„°å››é‡",maxCultivation:65e4},{name:"æ¸¡ç„°äº”é‡",maxCultivation:7e5},{name:"æ¸¡ç„°å…­é‡",maxCultivation:75e4},{name:"æ¸¡ç„°ä¸ƒé‡",maxCultivation:8e5},{name:"æ¸¡ç„°å…«é‡",maxCultivation:85e4},{name:"æ¸¡ç„°ä¹é‡",maxCultivation:9e5},{name:"ç„°ä»™ä¸€é‡",maxCultivation:1e6},{name:"ç„°ä»™äºŒé‡",maxCultivation:12e5},{name:"ç„°ä»™ä¸‰é‡",maxCultivation:14e5},{name:"ç„°ä»™å››é‡",maxCultivation:16e5},{name:"ç„°ä»™äº”é‡",maxCultivation:18e5},{name:"ç„°ä»™å…­é‡",maxCultivation:2e6},{name:"ç„°ä»™ä¸ƒé‡",maxCultivation:22e5},{name:"ç„°ä»™å…«é‡",maxCultivation:24e5},{name:"ç„°ä»™ä¹é‡",maxCultivation:26e5},{name:"çœŸç„°ä¸€é‡",maxCultivation:3e6},{name:"çœŸç„°äºŒé‡",maxCultivation:35e5},{name:"çœŸç„°ä¸‰é‡",maxCultivation:4e6},{name:"çœŸç„°å››é‡",maxCultivation:45e5},{name:"çœŸç„°äº”é‡",maxCultivation:5e6},{name:"çœŸç„°å…­é‡",maxCultivation:55e5},{name:"çœŸç„°ä¸ƒé‡",maxCultivation:6e6},{name:"çœŸç„°å…«é‡",maxCultivation:65e5},{name:"çœŸç„°ä¹é‡",maxCultivation:7e6},{name:"åœ£ç„°ä¸€é‡",maxCultivation:8e6},{name:"åœ£ç„°äºŒé‡",maxCultivation:9e6},{name:"åœ£ç„°ä¸‰é‡",maxCultivation:1e7},{name:"åœ£ç„°å››é‡",maxCultivation:11e6},{name:"åœ£ç„°äº”é‡",maxCultivation:12e6},{name:"åœ£ç„°å…­é‡",maxCultivation:13e6},{name:"åœ£ç„°ä¸ƒé‡",maxCultivation:14e6},{name:"åœ£ç„°å…«é‡",maxCultivation:15e6},{name:"åœ£ç„°ä¹é‡",maxCultivation:16e6},{name:"æ°¸ç„°ä¸€é‡",maxCultivation:2e7},{name:"æ°¸ç„°äºŒé‡",maxCultivation:24e6},{name:"æ°¸ç„°ä¸‰é‡",maxCultivation:28e6},{name:"æ°¸ç„°å››é‡",maxCultivation:32e6},{name:"æ°¸ç„°äº”é‡",maxCultivation:36e6},{name:"æ°¸ç„°å…­é‡",maxCultivation:4e7},{name:"æ°¸ç„°ä¸ƒé‡",maxCultivation:44e6},{name:"æ°¸ç„°å…«é‡",maxCultivation:48e6},{name:"æ°¸ç„°ä¹é‡",maxCultivation:52e6},{name:"ç„°å¸ä¸€é‡",maxCultivation:6e7},{name:"ç„°å¸äºŒé‡",maxCultivation:7e7},{name:"ç„°å¸ä¸‰é‡",maxCultivation:8e7},{name:"ç„°å¸å››é‡",maxCultivation:9e7},{name:"ç„°å¸äº”é‡",maxCultivation:1e8},{name:"ç„°å¸å…­é‡",maxCultivation:11e7},{name:"ç„°å¸ä¸ƒé‡",maxCultivation:12e7},{name:"ç„°å¸å…«é‡",maxCultivation:13e7},{name:"ç„°å¸ä¹é‡",maxCultivation:14e7}],de=["/assets/images/realm/realm_01_ranHuo.png","/assets/images/realm/realm_02_zhuLu.png","/assets/images/realm/realm_03_ningYan.png","/assets/images/realm/realm_04_yanYing.png","/assets/images/realm/realm_05_huaYan.png","/assets/images/realm/realm_06_yanXu.png","/assets/images/realm/realm_07_yanHe.png","/assets/images/realm/realm_08_daYan.png","/assets/images/realm/realm_09_duYan.png","/assets/images/realm/realm_10_yanXian.png","/assets/images/realm/realm_11_zhenYan.png","/assets/images/realm/realm_12_shengYan.png","/assets/images/realm/realm_13_yongYan.png","/assets/images/realm/realm_14_yanDi.png"],pe=e=>{const t=Math.min(Math.floor((e-1)/9),de.length-1);return de[t]},ve=e=>e<1?he[0]:e>he.length?he[he.length-1]:he[e-1],ge=t("player",{state:()=>({isNewPlayer:!0,isGMMode:!1,isDarkMode:"true"===localStorage.getItem("darkMode"),activePet:null,petEssence:0,petConfig:{rarityMap:{divine:{name:"ç¥å“",color:"#FF0000",probability:.02,essenceBonus:50},celestial:{name:"ä»™å“",color:"#FFD700",probability:.08,essenceBonus:30},mystic:{name:"ç„å“",color:"#9932CC",probability:.15,essenceBonus:20},spiritual:{name:"çµå“",color:"#1E90FF",probability:.25,essenceBonus:10},mortal:{name:"å‡¡å“",color:"#32CD32",probability:.5,essenceBonus:5}}},name:"æ— åä¿®å£«",nameChangeCount:0,level:1,realm:"ç»ƒæ°”æœŸä¸€å±‚",cultivation:0,maxCultivation:100,spirit:0,spiritRate:1,luck:1,cultivationRate:1,herbRate:1,alchemyRate:1,pills:[],pillFragments:{},pillRecipes:[],activeEffects:[],pillsCrafted:0,pillsConsumed:0,baseAttributes:{attack:10,health:100,defense:5,speed:10},combatAttributes:{critRate:0,comboRate:0,counterRate:0,stunRate:0,dodgeRate:0,vampireRate:0},combatResistance:{critResist:0,comboResist:0,counterResist:0,stunResist:0,dodgeResist:0,vampireResist:0},specialAttributes:{healBoost:0,critDamageBoost:0,critDamageReduce:0,finalDamageBoost:0,finalDamageReduce:0,combatBoost:0,resistanceBoost:0},spiritStones:0,reinforceStones:0,refinementStones:0,herbs:[],items:[],artifacts:[],equippedArtifacts:{weapon:null,head:null,body:null,legs:null,feet:null,shoulder:null,hands:null,wrist:null,necklace:null,ring1:null,ring2:null,belt:null,artifact:null},artifactBonuses:{attack:0,health:0,defense:0,speed:0,critRate:0,comboRate:0,counterRate:0,stunRate:0,dodgeRate:0,vampireRate:0,critResist:0,comboResist:0,counterResist:0,stunResist:0,dodgeResist:0,vampireResist:0,healBoost:0,critDamageBoost:0,critDamageReduce:0,finalDamageBoost:0,finalDamageReduce:0,combatBoost:0,resistanceBoost:0,cultivationRate:1,spiritRate:1},totalCultivationTime:0,breakthroughCount:0,explorationCount:0,itemsFound:0,eventTriggered:0,unlockedPillRecipes:0,dungeonDifficulty:1,dungeonHighestFloor:0,dungeonHighestFloor_2:0,dungeonHighestFloor_5:0,dungeonHighestFloor_10:0,dungeonHighestFloor_100:0,dungeonLastFailedFloor:0,dungeonTotalRuns:0,dungeonBossKills:0,dungeonEliteKills:0,dungeonTotalKills:0,dungeonDeathCount:0,dungeonTotalRewards:0,activeMountBonus:{attack_bonus:0,defense_bonus:0,health_bonus:0,speed_bonus:0},activeTitleBonus:{attack_bonus:0,defense_bonus:0,health_bonus:0,speed_bonus:0},autoSellQualities:[],autoReleaseRarities:[],wishlistEnabled:!1,selectedWishEquipQuality:null,selectedWishPetRarity:null,unlockedRealms:["ç»ƒæ°”ä¸€å±‚"],unlockedLocations:["æ–°æ‰‹æ‘"],unlockedSkills:[],completedAchievements:[]}),getters:{getPetBonus(){if(!this.activePet)return{attack:0,defense:0,health:0,critRate:0,comboRate:0,counterRate:0,stunRate:0,dodgeRate:0,vampireRate:0,critResist:0,comboResist:0,counterResist:0,stunResist:0,dodgeResist:0,vampireResist:0,healBoost:0,critDamageBoost:0,critDamageReduce:0,finalDamageBoost:0,finalDamageReduce:0,combatBoost:0,resistanceBoost:0};const e={divine:.15,celestial:.12,mystic:.09,spiritual:.06,mortal:.03}[this.activePet.rarity]||0,t=e+(this.activePet.star||0)*({divine:.02,celestial:.01,mystic:.01,spiritual:.01,mortal:.01}[this.activePet.rarity]||0)+((this.activePet.level||1)-1)*(.1*e)+Math.floor((this.activePet.star||0)/5)*(.5*e),a=.5*t;return{attack:t,defense:t,health:t,critRate:a,comboRate:a,counterRate:a,stunRate:a,dodgeRate:a,vampireRate:a,critResist:a,comboResist:a,counterResist:a,stunResist:a,dodgeResist:a,vampireResist:a,healBoost:a,critDamageBoost:a,critDamageReduce:a,finalDamageBoost:a,finalDamageReduce:a,combatBoost:a,resistanceBoost:a}},getTotalStats(){const e=this.artifactBonuses||{},t=Date.now(),a=(this.activeEffects||[]).filter(e=>e.endTime>t);let s=0,i=0,n=0,o=0,l=0,r=0,c=0;a.forEach(e=>{e.attack&&(s+=e.attack),e.health&&(i+=e.health),e.defense&&(n+=e.defense),e.speed&&(o+=e.speed),e.critRate&&(l+=e.critRate),e.comboRate&&(r+=e.comboRate),e.dodgeRate&&(c+=e.dodgeRate)});const m=this.activeMountBonus||{},u=this.activeTitleBonus||{},h=(m.attack_bonus||0)+(u.attack_bonus||0),d=(m.defense_bonus||0)+(u.defense_bonus||0),p=(m.health_bonus||0)+(u.health_bonus||0),v=(m.speed_bonus||0)+(u.speed_bonus||0),g=(this.baseAttributes.health||0)+(e.health||0)+i,b=(this.baseAttributes.attack||0)+(e.attack||0)+s,f=(this.baseAttributes.defense||0)+(e.defense||0)+n,y=(this.baseAttributes.speed||0)+(e.speed||0)+o;return{health:Math.floor(g*(1+p)),attack:Math.floor(b*(1+h)),defense:Math.floor(f*(1+d)),speed:Math.floor(y*(1+v)),critRate:Math.min(1,(this.combatAttributes.critRate||0)+(e.critRate||0)+l),comboRate:Math.min(1,(this.combatAttributes.comboRate||0)+(e.comboRate||0)+r),counterRate:Math.min(1,(this.combatAttributes.counterRate||0)+(e.counterRate||0)),stunRate:Math.min(1,(this.combatAttributes.stunRate||0)+(e.stunRate||0)),dodgeRate:Math.min(1,(this.combatAttributes.dodgeRate||0)+(e.dodgeRate||0)+c),vampireRate:Math.min(1,(this.combatAttributes.vampireRate||0)+(e.vampireRate||0)),critResist:Math.min(1,(this.combatResistance.critResist||0)+(e.critResist||0)),comboResist:Math.min(1,(this.combatResistance.comboResist||0)+(e.comboResist||0)),counterResist:Math.min(1,(this.combatResistance.counterResist||0)+(e.counterResist||0)),stunResist:Math.min(1,(this.combatResistance.stunResist||0)+(e.stunResist||0)),dodgeResist:Math.min(1,(this.combatResistance.dodgeResist||0)+(e.dodgeResist||0)),vampireResist:Math.min(1,(this.combatResistance.vampireResist||0)+(e.vampireResist||0)),healBoost:(this.specialAttributes.healBoost||0)+(e.healBoost||0),critDamageBoost:(this.specialAttributes.critDamageBoost||0)+(e.critDamageBoost||0),critDamageReduce:(this.specialAttributes.critDamageReduce||0)+(e.critDamageReduce||0),finalDamageBoost:(this.specialAttributes.finalDamageBoost||0)+(e.finalDamageBoost||0),finalDamageReduce:(this.specialAttributes.finalDamageReduce||0)+(e.finalDamageReduce||0),combatBoost:(this.specialAttributes.combatBoost||0)+(e.combatBoost||0),resistanceBoost:(this.specialAttributes.resistanceBoost||0)+(e.resistanceBoost||0)}},getCombatPower(){const e=this.getTotalStats(),t=4*(e.attack||0)+.5*(e.health||0)+3*(e.defense||0)+2*(e.speed||0),a=500*((e.critRate||0)+(e.comboRate||0)+(e.counterRate||0)+(e.dodgeRate||0)+(e.vampireRate||0)),s=300*((e.critDamageBoost||0)+(e.finalDamageBoost||0)+(e.healBoost||0)+(e.combatBoost||0)),i=100*this.level;return Math.floor(t+a+s+i)}},actions:{updateHtmlDarkMode(e){const t=document.documentElement;e?t.classList.add("dark"):t.classList.remove("dark")},async initializePlayer(){try{const t=await ne.getData("playerData");if(t){const a=(t=>{try{const a=e.AES.decrypt(t,"vue-idle-xiuxian").toString(e.enc.Utf8);return JSON.parse(a)}catch(a){return console.error("æ•°æ®è§£å¯†å¤±è´¥:",a),null}})(t);a&&(e=>{const t=["name","level","realm","cultivation","maxCultivation","spirit","baseAttributes"];for(const a of t)if(!(a in e))return console.error(`æ•°æ®éªŒè¯å¤±è´¥: ç¼ºå°‘å¿…è¦å­—æ®µ ${a}`),!1;return!(e.level<1||e.cultivation<0||e.spirit<0)||(console.error("æ•°æ®éªŒè¯å¤±è´¥: æ•°å€¼å¼‚å¸¸"),!1)})(a)?Object.assign(this.$state,a):console.error("å­˜æ¡£æ•°æ®éªŒè¯å¤±è´¥ï¼Œä½¿ç”¨åˆå§‹æ•°æ®")}}catch(t){console.error("åŠ è½½å­˜æ¡£å¤±è´¥:",t)}this.isDarkMode="true"===localStorage.getItem("darkMode"),this.updateHtmlDarkMode(this.isDarkMode)},toggle(){this.isDarkMode=!this.isDarkMode,localStorage.setItem("darkMode",this.isDarkMode),this.updateHtmlDarkMode(this.isDarkMode),this.saveData()},async saveData(){const t=(t=>{try{const a=JSON.stringify(t);return e.AES.encrypt(a,"vue-idle-xiuxian").toString()}catch(a){return console.error("æ•°æ®åŠ å¯†å¤±è´¥:",a),null}})(this.$state);if(t)try{await ne.setData("playerData",t)}catch(a){console.error("æ•°æ®ä¿å­˜å¤±è´¥:",a)}else console.error("æ•°æ®åŠ å¯†å¤±è´¥")},async exportData(){try{return await ne.getData("playerData")}catch(e){throw console.error("å¯¼å‡ºå­˜æ¡£å¤±è´¥:",e),e}},async importData(e){try{await ne.setData("playerData",e),this.$reset(),await this.initializePlayer()}catch(t){throw console.error("å¯¼å…¥å­˜æ¡£å¤±è´¥:",t),t}},async clearData(){try{await ne.setData("playerData",null)}catch(e){throw console.error("æ¸…é™¤å­˜æ¡£å¤±è´¥:",e),e}},gainSpirit(e){this.spirit+=e*this.spiritRate,this.saveData()},cultivate(e){const t=Number(String(e).replace(/[^0-9.-]/g,""))||0;this.cultivation=Number(String(this.cultivation).replace(/[^0-9.-]/g,""))||0,this.cultivation+=t,this.totalCultivationTime+=1,this.cultivation>=this.maxCultivation&&this.tryBreakthrough(),this.saveData()},tryBreakthrough(){const e=he.length;if(this.level<e){const e=ve(this.level);return this.level+=1,this.realm=e.name,this.maxCultivation=e.maxCultivation,this.cultivation=0,this.breakthroughCount+=1,this.unlockedRealms.includes(e.name)||this.unlockedRealms.push(e.name),this.spirit+=100*this.level,this.spiritRate*=1.2,this.saveData(),!0}return!1},gainItem(e){this.items.push(e),this.itemsFound++,this.saveData()},useItem(e){return"pill"===e.type?this.usePill(e):"pet"===e.type?this.usePet(e):{success:!1,message:"æ— æ³•ä½¿ç”¨è¯¥ç‰©å“"}},async sellEquipment(e){return-1===this.items.findIndex(t=>t.id===e.id)?{success:!1,message:"è£…å¤‡ä¸å­˜åœ¨"}:new Promise(t=>{const a=new Worker(new URL(""+new URL("../equipment-nGQ0uTwR.js",import.meta.url).href,import.meta.url));a.onmessage=e=>{const{stoneAmount:s,itemId:i}=e.data;this.reinforceStones+=s;const n=this.items.findIndex(e=>e.id===i);n>-1&&this.items.splice(n,1),this.saveData(),a.terminate(),t({success:!0,message:`æˆåŠŸå–å‡ºè£…å¤‡ï¼Œè·å¾—${s}ä¸ªå¼ºåŒ–çŸ³`})},a.postMessage({type:"single",equipment:{id:e.id,quality:e.quality}})})},async batchSellEquipments(e=null,t=null){return new Promise(a=>{const s=new Worker(new URL(""+new URL("../equipment-nGQ0uTwR.js",import.meta.url).href,import.meta.url));s.onmessage=e=>{const{totalStones:t,itemsToRemove:i,count:n}=e.data;this.reinforceStones+=t,this.items=this.items.filter(e=>!i.includes(e.id)),this.saveData(),s.terminate(),a({success:!0,message:`æˆåŠŸå–å‡º${n}ä»¶è£…å¤‡ï¼Œè·å¾—${t}ä¸ªå¼ºåŒ–çŸ³`})};const i=this.items.filter(a=>!(!a||!a.type||"pill"===a.type||"pet"===a.type)&&((!t||a.type===t)&&(!e||a.quality===e))).map(e=>({id:e.id,type:e.type,quality:e.quality}));s.postMessage({type:"batch",items:JSON.parse(JSON.stringify(i)),quality:e,equipmentType:t})})},usePill(e){const t=Date.now();this.activeEffects.push({...e.effect,startTime:t,endTime:t+1e3*e.effect.duration});const a=this.items.findIndex(t=>t.id===e.id);return a>-1&&(this.items.splice(a,1),this.pillsConsumed++),this.activeEffects=this.activeEffects.filter(e=>e.endTime>t),this.saveData(),{success:!0,message:"ä½¿ç”¨ä¸¹è¯æˆåŠŸ"}},craftPill(e){const t=ce.find(t=>t.id===e);if(!t)return{success:!1,message:"ä¸¹æ–¹ä¸å­˜åœ¨"};const a=ue(t,this.herbs,this,this.pillFragments[t.id]||0,this.luck*this.alchemyRate);if(a.success){for(const a of t.materials)for(let e=0;e<a.count;e++){const e=this.herbs.findIndex(e=>e.id===a.herb);e>-1&&this.herbs.splice(e,1)}const e=me(t,this.level);this.items.push({id:`${t.id}_${Date.now()}`,name:t.name,type:"pill",description:t.description,effect:e}),this.pillsCrafted++,this.saveData()}return a},usePet(e){return this.activePet?this.activePet.id===e.id?this.recallPet():(this.recallPet(),this.deployPet(e)):this.deployPet(e)},recallPet(){return this.activePet?(this.resetPetBonuses(),this.activePet=null,this.saveData(),{success:!0,message:"å¬å›æˆåŠŸ"}):{success:!1,message:"å½“å‰æ²¡æœ‰å‡ºæˆ˜çš„çµå® "}},deployPet(e){return this.activePet&&this.recallPet(),this.activePet=e,this.applyPetBonuses(),this.saveData(),{success:!0,message:"å‡ºæˆ˜æˆåŠŸ"}},resetPetBonuses(){const e=this.activePet.combatAttributes,t={...this.baseAttributes},a={...this.combatAttributes},s={...this.combatResistance},i={...this.specialAttributes};this.baseAttributes.attack=t.attack-e.attack,this.baseAttributes.defense=t.defense-e.defense,this.baseAttributes.health=t.health-e.health,this.baseAttributes.speed=t.speed-e.speed,Object.keys(this.combatAttributes).forEach(t=>{this.combatAttributes[t]=a[t]-(e[t]||0)}),Object.keys(this.combatResistance).forEach(t=>{this.combatResistance[t]=s[t]-(e[t]||0)}),Object.keys(this.specialAttributes).forEach(t=>{this.specialAttributes[t]=i[t]-(e[t]||0)})},applyPetBonuses(){if(!this.activePet)return;const e=this.activePet.combatAttributes,t={...this.baseAttributes},a={...this.combatAttributes},s={...this.combatResistance},i={...this.specialAttributes};this.baseAttributes.attack=t.attack+e.attack,this.baseAttributes.defense=t.defense+e.defense,this.baseAttributes.health=t.health+e.health,this.baseAttributes.speed=t.speed+e.speed,Object.keys(this.combatAttributes).forEach(t=>{this.combatAttributes[t]=a[t]+(e[t]||0)}),Object.keys(this.combatResistance).forEach(t=>{this.combatResistance[t]=s[t]+(e[t]||0)}),Object.keys(this.specialAttributes).forEach(t=>{this.specialAttributes[t]=i[t]+(e[t]||0)})},equipArtifact(e,t){if(e.requiredRealm&&this.level<e.requiredRealm)return{success:!1,message:"å¢ƒç•Œä¸è¶³ï¼Œæ— æ³•è£…å¤‡æ­¤è£…å¤‡"};this.equippedArtifacts[t]&&this.unequipArtifact(t);const a=this.items.findIndex(t=>t.id===e.id);return-1!==a&&this.items.splice(a,1),this.equippedArtifacts[t]=e,e.stats&&Object.entries(e.stats).forEach(([e,t])=>{void 0!==this.artifactBonuses[e]&&(this.artifactBonuses[e]+=t,e in this.baseAttributes?this.baseAttributes[e]+=t:e in this.combatAttributes?this.combatAttributes[e]=Math.min(1,this.combatAttributes[e]+t):e in this.combatResistance?this.combatResistance[e]=Math.min(1,this.combatResistance[e]+t):e in this.specialAttributes&&(this.specialAttributes[e]+=t))}),this.saveData(),{success:!0,message:"è£…å¤‡æˆåŠŸ"}},unequipArtifact(e){const t=this.equippedArtifacts[e];return!!t&&(t.stats&&Object.entries(t.stats).forEach(([e,t])=>{void 0!==this.artifactBonuses[e]&&(this.artifactBonuses[e]-=t,e in this.baseAttributes?this.baseAttributes[e]-=t:e in this.combatAttributes?this.combatAttributes[e]=Math.max(0,this.combatAttributes[e]-t):e in this.combatResistance?this.combatResistance[e]=Math.max(0,this.combatResistance[e]-t):e in this.specialAttributes&&(this.specialAttributes[e]-=t))}),this.items.push(t),this.equippedArtifacts[e]=null,this.saveData(),!0)},getArtifactBonus(e){return this.artifactBonuses[e]||1},gainPillFragment(e){this.pillFragments[e]||(this.pillFragments[e]=0),this.pillFragments[e]++;const t=ce.find(t=>t.id===e);t&&this.pillFragments[e]>=t.fragmentsNeeded&&(this.pillFragments[e]-=t.fragmentsNeeded,this.pillRecipes.includes(e)||(this.pillRecipes.push(e),this.unlockedPillRecipes++)),this.saveData()},craftPill(e){const t=ce.find(t=>t.id===e);if(!t||!this.pillRecipes.includes(e))return{success:!1,message:"æœªæŒæ¡ä¸¹æ–¹"};const a=this.pillFragments[e]||0,s=ue(t,this.herbs,this,a,this.luck*this.alchemyRate);if(s.success){t.materials.forEach(e=>{for(let t=0;t<e.count;t++){const t=this.herbs.findIndex(t=>t.id===e.herb);t>-1&&this.herbs.splice(t,1)}});const e=me(t,this.level),a={id:`${t.id}_${Date.now()}`,name:t.name,description:t.description,type:"pill",effect:e};this.items.push(a),this.pillsCrafted++,this.saveData()}return s},useItem(e){if("pill"===e.type){const t=Date.now();this.activeEffects.push({...e.effect,startTime:t,endTime:t+1e3*e.effect.duration});const a=this.items.findIndex(t=>t.id===e.id);return a>-1&&(this.items.splice(a,1),this.pillsConsumed++),this.activeEffects=this.activeEffects.filter(e=>e.endTime>t),this.saveData(),!0}return!1},getActiveEffects(){const e=Date.now();return this.activeEffects.filter(t=>t.endTime>e)},addEquipment(e){this.items||(this.items=[]),this.items.push(e),this.saveData()},upgradePet(e,t){if(this.petEssence<t)return{success:!1,message:"çµå® ç²¾åä¸è¶³"};this.petEssence-=t;const a=this.items.findIndex(t=>t.id===e.id);if(a>-1){const t=this.items[a];t.level=(t.level||1)+1;const s={divine:2,celestial:1.8,mystic:1.6,spiritual:1.4,mortal:1.2}[t.rarity]||1.2;t.combatAttributes={attack:Math.floor(t.combatAttributes.attack*(1+.01*s)),health:Math.floor(t.combatAttributes.health*(1+.01*s)),defense:Math.floor(t.combatAttributes.defense*(1+.01*s)),speed:Math.floor(t.combatAttributes.speed*(1+.01*s)),critRate:t.combatAttributes.critRate+.01*s,comboRate:t.combatAttributes.comboRate+.01*s,counterRate:t.combatAttributes.counterRate+.01*s,stunRate:t.combatAttributes.stunRate+.01*s,dodgeRate:t.combatAttributes.dodgeRate+.01*s,vampireRate:t.combatAttributes.vampireRate+.01*s,critResist:t.combatAttributes.critResist+.01*s,comboResist:t.combatAttributes.comboResist+.01*s,counterResist:t.combatAttributes.counterResist+.01*s,stunResist:t.combatAttributes.stunResist+.01*s,dodgeResist:t.combatAttributes.dodgeResist+.01*s,vampireResist:t.combatAttributes.vampireResist+.01*s,healBoost:t.combatAttributes.healBoost+.01*s,critDamageBoost:t.combatAttributes.critDamageBoost+.01*s,critDamageReduce:t.combatAttributes.critDamageReduce+.01*s,finalDamageBoost:t.combatAttributes.finalDamageBoost+.01*s,finalDamageReduce:t.combatAttributes.finalDamageReduce+.01*s,combatBoost:t.combatAttributes.combatBoost+.01*s,resistanceBoost:t.combatAttributes.resistanceBoost+.01*s},this.activePet&&this.activePet.id===e.id&&this.applyPetBonuses()}return this.saveData(),{success:!0,message:"å‡çº§æˆåŠŸ"}},evolvePet(e,t){if(e.rarity!=t.rarity||e.name!=t.name)return{success:!1,message:"åªèƒ½ä½¿ç”¨ç›¸åŒå“è´¨å’Œåå­—çš„çµå® è¿›è¡Œå‡æ˜Ÿ"};const a=this.items.findIndex(t=>t.id===e.id),s=this.items.findIndex(e=>e.id===t.id);if(a>-1&&s>-1){const e=10*(t.level-1);return this.petEssence+=e,this.items.splice(s,1),this.items[a].star=(this.items[a].star||0)+1,this.saveData(),{success:!0,message:"å‡æ˜ŸæˆåŠŸ"}}return{success:!1,message:"å‡æ˜Ÿå¤±è´¥"}}}}),be=Object.freeze(Object.defineProperty({__proto__:null,usePlayerStore:ge},Symbol.toStringTag,{value:"Module"})),fe="/api",ye=t("auth",{state:()=>({wallet:localStorage.getItem("xx_wallet")||"",token:localStorage.getItem("xx_token")||"",vipLevel:0,vipName:"æ™®é€š",totalRecharge:0,firstRecharge:!1,dailySignDate:null,dailySignStreak:0,isConnecting:!1}),getters:{isLoggedIn:e=>!!e.token&&!!e.wallet,shortWallet:e=>e.wallet?e.wallet.slice(0,6)+"..."+e.wallet.slice(-4):""},actions:{async connectWallet(){if(!window.ethereum)throw new Error("è¯·å®‰è£… MetaMask é’±åŒ…");this.isConnecting=!0;try{const e=new a(window.ethereum),t=(await e.send("eth_requestAccounts",[]))[0],s=await e.getSigner(),i=`ä¿®ä»™æ”¾ç½®ç™»å½•\né’±åŒ…: ${t}\næ—¶é—´: ${Date.now()}`,n=await s.signMessage(i),o=await fetch(`${fe}/auth/login`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({wallet:t,signature:n,message:i})}),l=await o.json();if(!o.ok)throw new Error(l.error||"ç™»å½•å¤±è´¥");return this.wallet=t,this.token=l.token,this.vipLevel=l.player.vipLevel,this.totalRecharge=l.player.totalRecharge,this.firstRecharge=l.player.firstRecharge,this.dailySignDate=l.player.dailySignDate,this.dailySignStreak=l.player.dailySignStreak,localStorage.setItem("xx_wallet",t),localStorage.setItem("xx_token",l.token),l.player}finally{this.isConnecting=!1}},logout(){this.wallet="",this.token="",this.vipLevel=0,this.totalRecharge=0,localStorage.removeItem("xx_wallet"),localStorage.removeItem("xx_token")},async apiGet(e){const t=await fetch(`${fe}${e}`,{headers:{Authorization:`Bearer ${this.token}`}}),a=await t.json();if(!t.ok)throw new Error(a.error);return a},async apiPost(e,t){const a=await fetch(`${fe}${e}`,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${this.token}`},body:JSON.stringify(t)}),s=await a.json();if(!a.ok)throw new Error(s.error);return s},async saveToCloud(e){if(!this.isLoggedIn)return;const t=e.$state,a=await this.apiPost("/game/save",{gameData:t,combatPower:"function"==typeof e.getCombatPower?e.getCombatPower():0,level:e.level,realm:e.realm,name:e.name});a&&a.ok&&(void 0!==a.spiritStones&&(e.spiritStones=a.spiritStones),void 0!==a.items&&(e.items=a.items))},async loadFromCloud(){if(!this.isLoggedIn)return null;return(await this.apiGet("/game/load")).player},async dailySign(){const e=await this.apiPost("/sign/daily",{});return this.dailySignDate=(new Date).toISOString().split("T")[0],this.dailySignStreak=e.streak,e},async confirmRecharge(e){const t=await this.apiPost("/recharge/confirm",{txHash:e});return this.vipLevel=t.vipLevel,this.totalRecharge=t.totalRecharge,this.firstRecharge=!0,t},async getVipInfo(){return await this.apiGet("/vip/info")},async getLeaderboard(e){const t=await fetch(`${fe}/leaderboard/${e}`);return await t.json()},async getRechargeHistory(){return await this.apiGet("/recharge/history")}}}),_e=Object.freeze(Object.defineProperty({__proto__:null,useAuthStore:ye},Symbol.toStringTag,{value:"Module"})),Re=(e,t)=>{const a=e.__vccOpts||e;for(const[s,i]of t)a[s]=i;return a},ke={key:0,class:"unread-badge"},xe={class:"online-num"},Ce={key:1,class:"chat-panel"},we={class:"chat-header"},De={class:"header-online"},Ae={class:"chat-tabs"},Ee={class:"msg-name"},Pe={class:"msg-text"},Se={key:0,class:"empty-hint"},Be={key:0,class:"empty-hint"},Te={class:"chat-input"},Me=["disabled"],Ie=["disabled"],Le=Re({__name:"WorldChat",setup(e){const t=ye(),a=ge(),_=f(!0),R=f("chat"),k=f([]),x=f([]),C=f(""),w=f(0),D=f(0),A=f(!1),E=f(null),P=f(null);let S=null,B=null;const T=()=>{if(!(S&&S.readyState<=1))try{S=new WebSocket(`${"https:"===location.protocol?"wss:":"ws:"}//${location.host}/ws`);const e=setTimeout(()=>{S&&1!==S.readyState&&S.close()},5e3);S.onopen=()=>{clearTimeout(e),A.value=!0,S._heartbeat&&clearInterval(S._heartbeat),S._heartbeat=setInterval(()=>{1===S.readyState&&S.send(JSON.stringify({type:"ping"}))},3e4),t.isLoggedIn&&S.send(JSON.stringify({type:"auth",token:t.token,name:a.name||"æ— åç„°ä¿®"}))},S.onmessage=e=>{try{const t=JSON.parse(e.data);if("init"===t.type)return k.value=t.messages||[],x.value=t.events||[],w.value=t.online||0,void M();"chat"===t.type&&(k.value.push(t),k.value.length>100&&k.value.shift(),_.value&&D.value++,M()),"event"===t.type&&(x.value.push(t),x.value.length>50&&x.value.shift(),M()),"online"===t.type&&(w.value=t.count)}catch{}},S.onclose=()=>{A.value=!1,S._heartbeat&&(clearInterval(S._heartbeat),S._heartbeat=null),B=setTimeout(T,5e3)},S.onerror=t=>{clearTimeout(e),S.close()}}catch(e){}},M=()=>{y(()=>{E.value&&(E.value.scrollTop=E.value.scrollHeight),P.value&&(P.value.scrollTop=P.value.scrollHeight)})},I=()=>{const e=C.value.trim();e&&S&&1===S.readyState&&t.isLoggedIn&&(S.send(JSON.stringify({type:"chat",text:e})),C.value="")};return s(_,e=>{e||(D.value=0,M())}),s(()=>t.isLoggedIn,e=>{e&&S&&1===S.readyState&&S.send(JSON.stringify({type:"auth",token:t.token,name:a.name||"æ— åç„°ä¿®"}))}),i(()=>{T()}),n(()=>{S&&S.close(),B&&clearTimeout(B)}),(e,t)=>(o(),l("div",{class:u(["world-chat-wrapper",{minimized:_.value}])},[_.value?(o(),l("div",{key:0,class:"chat-toggle",onClick:t[0]||(t[0]=e=>_.value=!1)},[t[5]||(t[5]=r("span",{class:"toggle-icon"},"ğŸ’¬",-1)),D.value>0?(o(),l("span",ke,c(D.value>99?"99+":D.value),1)):m("",!0),t[6]||(t[6]=r("span",{class:"online-dot"},null,-1)),r("span",xe,c(w.value),1)])):(o(),l("div",Ce,[r("div",we,[t[7]||(t[7]=r("span",{class:"header-title"},"ğŸŒ ç„°åŸŸé¢‘é“",-1)),r("span",De,"åœ¨çº¿ "+c(w.value),1),r("span",{class:"header-close",onClick:t[1]||(t[1]=e=>_.value=!0)},"âœ•")]),r("div",Ae,[r("span",{class:u(["tab",{active:"chat"===R.value}]),onClick:t[2]||(t[2]=e=>R.value="chat")},"èŠå¤©",2),r("span",{class:u(["tab",{active:"events"===R.value}]),onClick:t[3]||(t[3]=e=>R.value="events")},"ç„°åŸŸåŠ¨æ€",2)]),h(r("div",{class:"chat-messages",ref_key:"chatBox",ref:E},[(o(!0),l(p,null,v(k.value,(e,t)=>(o(),l("div",{key:t,class:"chat-msg"},[r("span",Ee,c(e.name),1),r("span",Pe,c(e.text),1)]))),128)),0===k.value.length?(o(),l("div",Se,"æš‚æ— æ¶ˆæ¯ï¼Œè¯´ç‚¹ä»€ä¹ˆå§~")):m("",!0)],512),[[d,"chat"===R.value]]),h(r("div",{class:"chat-messages",ref_key:"eventBox",ref:P},[(o(!0),l(p,null,v(x.value,(e,t)=>(o(),l("div",{key:t,class:u(["event-msg","event-"+e.eventType])},c(e.text),3))),128)),0===x.value.length?(o(),l("div",Be,"æš‚æ— åŠ¨æ€")):m("",!0)],512),[[d,"events"===R.value]]),h(r("div",Te,[h(r("input",{"onUpdate:modelValue":t[4]||(t[4]=e=>C.value=e),onKeydown:g(I,["enter"]),placeholder:"è¯´ç‚¹ä»€ä¹ˆ...",maxlength:"200",disabled:!A.value},null,40,Me),[[b,C.value]]),r("button",{onClick:I,disabled:!A.value||!C.value.trim()},"å‘é€",8,Ie)],512),[[d,"chat"===R.value]])]))],2))}},[["__scopeId","data-v-a85680b7"]]),Oe={class:"main-city"},je={class:"city-bg"},$e={class:"stars"},Ne={class:"clouds"},Ve={class:"spirit-particles"},qe={key:0,class:"announcement-bar"},Fe={class:"ann-scroll"},ze={key:1,class:"events-bar"},He={class:"evt-icon"},We={class:"evt-name"},Ge={class:"evt-time"},Je={class:"player-area"},Ue=["src"],Ye={class:"player-info"},Ke={class:"p-name"},Qe={class:"p-realm"},Xe={key:2,class:"home-panel"},Ze={class:"hp-resources"},et={class:"hp-res-icon"},tt={class:"hp-res-val"},at={class:"hp-res-label"},st={class:"hp-card"},it={class:"hp-stats-grid"},nt={class:"hp-stat"},ot={class:"hp-progress"},lt={class:"hp-stat-val"},rt={class:"hp-stat"},ct={class:"hp-stat-big"},mt={class:"hp-stat"},ut={class:"hp-stat-big"},ht={class:"hp-stat"},dt={class:"hp-stat-big"},pt={class:"hp-rows"},vt={class:"hp-row"},gt={class:"hp-row-val"},bt={class:"hp-row"},ft={class:"hp-row-val hp-gold"},yt={class:"hp-row"},_t={key:0,class:"hp-row-val"},Rt={key:1,class:"hp-row-val hp-dim"},kt={class:"hp-row"},xt={class:"hp-row-val"},Ct={class:"hp-row"},wt={class:"hp-row-val"},Dt={class:"hp-card"},At={class:"hp-shortcuts"},Et=["onClick"],Pt={class:"hp-sc-icon"},St={class:"hp-sc-text"},Bt={key:3,class:"menu-grid"},Tt=["onClick"],Mt={class:"m-icon-wrap"},It=["src"],Lt={class:"m-name"},Ot=Re({__name:"GameScene",props:{playerName:{type:String,default:"æ— åç„°ä¿®"},playerRealm:{type:String,default:"ç‡ƒç«æœŸ"},activeTab:{type:String,default:"home"}},emits:["navigate"],setup(e){const t=ge(),a=ye(),s=e,n=k(()=>{const e=s.playerRealm;return/ç„°å¸|æ°¸ç„°/.test(e)?"/assets/images/char-emperor.png":/ç„°ä»™|çœŸç„°|åœ£ç„°/.test(e)?"/assets/images/char-immortal.png":/ç„°åˆ|å¤§ç„°|æ¸¡ç„°/.test(e)?"/assets/images/char-warrior.png":/ç„°å©´|åŒ–ç„°|ç„°è™š/.test(e)?"/assets/images/char-cultivator.png":"/assets/images/char-mortal.png"}),h=f([]),d=f([]);i(async()=>{try{const e=await fetch("/api/announcements"),t=await e.json();h.value=t.announcements||[]}catch{}try{const e=await fetch("/api/events/active"),t=await e.json();d.value=t.events||[]}catch{}});const g=e=>{const t=new Date(e).getTime()-Date.now();if(t<=0)return"å·²ç»“æŸ";const a=Math.floor(t/36e5),s=Math.floor(t%36e5/6e4);return a>=24?`${Math.floor(a/24)}å¤©${a%24}æ—¶`:`${a}æ—¶${s}åˆ†`},b={adventure:[{key:"cultivation",label:"ä¿®ç‚¼",icon:"/assets/images/menu/menu_cultivation.png",theme:"purple"},{key:"dungeon",label:"ç„šå¤©å¡”",icon:"/assets/images/menu/menu_dungeon.png",theme:"purple"},{key:"daily-dungeon",label:"ç„°å¢ƒ",icon:"/assets/images/menu/menu_daily_dungeon.png",theme:"blue"},{key:"exploration",label:"æ¢ç´¢",icon:"/assets/images/menu/menu_exploration.png",theme:"blue"},{key:"boss",label:"é»‘ç„°å…¥ä¾µ",icon:"/assets/images/menu/menu_boss.png",theme:"red"}],character:[{key:"profile",label:"è§’è‰²ä¿¡æ¯",icon:"/assets/images/menu/menu_profile.png",theme:"gold"},{key:"inventory",label:"èƒŒåŒ…",icon:"/assets/images/menu/menu_inventory.png",theme:"gold"},{key:"alchemy",label:"ç„°ç‚¼",icon:"/assets/images/menu/menu_alchemy.png",theme:"red"},{key:"mount-title",label:"ç„°éª‘ç„°å·",icon:"/assets/images/menu/menu_mount.png",theme:"green"},{key:"ascension",label:"æ¶…æ§ƒé£å‡",icon:"/assets/images/menu/menu_ascension.png",theme:"purple"},{key:"achievements",label:"ç„°åŠŸ",icon:"/assets/images/menu/menu_achievements.png",theme:"blue"}],social:[{key:"sect",label:"ç„°ç›Ÿ",icon:"/assets/images/menu/menu_sect.png",theme:"purple"},{key:"sect-war",label:"ç„°ç›Ÿæˆ˜",icon:"/assets/images/menu/menu_sect_war.png",theme:"red"},{key:"friends",label:"ç„°å‹",icon:"/assets/images/menu/menu_friends.png",theme:"green"},{key:"pk",label:"ç„°æ­¦",icon:"/assets/images/menu/menu_pk.png",theme:"red"},{key:"auction",label:"ç„°å¸‚",icon:"/assets/images/menu/menu_auction.png",theme:"gold"},{key:"rank",label:"ç„°æ¦œ",icon:"/assets/images/menu/menu_rank.png",theme:"blue"}],market:[{key:"shop",label:"ç„°æ™¶å•†é“º",icon:"/assets/images/menu/menu_shop.png",theme:"gold"},{key:"recharge",label:"å……å€¼",icon:"/assets/images/menu/menu_recharge.png",theme:"gold"},{key:"vip",label:"ç„°é˜¶",icon:"/assets/images/menu/menu_vip.png",theme:"gold"},{key:"gacha",label:"ç„°è¿é˜",icon:"/assets/images/menu/menu_gacha.png",theme:"green"},{key:"events",label:"æ´»åŠ¨",icon:"/assets/images/menu/menu_events.png",theme:"red"}]},y=k(()=>b[s.activeTab]||[]),x=k(()=>[{icon:"ğŸ’",label:"ç„°æ™¶",value:t.spiritStones||0},{icon:"ğŸ’ ",label:"ç„°çµ",value:Math.floor(t.spirit||0)},{icon:"ğŸ”¨",label:"æ·¬ç«çŸ³",value:t.reinforceStones||0},{icon:"ğŸ”®",label:"ç¬¦æ–‡çŸ³",value:t.refinementStones||0},{icon:"ğŸ¾",label:"ç²¾å",value:t.petEssence||0}]),C=k(()=>t.maxCultivation?Math.min(100,Math.round((t.cultivation||0)/t.maxCultivation*100)):0),w=k(()=>{var e,a;return((null==(e=t.items)?void 0:e.length)||0)+((null==(a=t.herbs)?void 0:a.length)||0)}),D=e=>{if(e<60)return`${e}ç§’`;if(e<3600)return`${Math.floor(e/60)}åˆ†é’Ÿ`;const t=Math.floor(e/3600);return t>=24?`${Math.floor(t/24)}å¤©${t%24}æ—¶`:`${t}å°æ—¶`},A=[{key:"cultivation",icon:"âš”ï¸",label:"ä¿®ç‚¼"},{key:"inventory",icon:"ğŸ’",label:"èƒŒåŒ…"},{key:"gacha",icon:"ğŸ°",label:"æŠ½å¡"},{key:"dungeon",icon:"ğŸ”ï¸",label:"ç„šå¤©å¡”"},{key:"alchemy",icon:"ğŸ§ª",label:"ç‚¼ä¸¹"},{key:"exploration",icon:"ğŸ—ºï¸",label:"æ¢ç´¢"},{key:"shop",icon:"ğŸª",label:"å•†åº—"},{key:"profile",icon:"ğŸ‘¤",label:"ä¸ªäºº"}],E=e=>({left:(13*e+7)%100+"%",top:(7*e+3)%35+"%",animationDelay:.5*e%4+"s",width:1+e%3+"px",height:1+e%3+"px"}),P=e=>({left:28*e-20+"%",top:25+e%3*8+"%",animationDelay:8*e+"s",animationDuration:40+10*e+"s",opacity:.03+e%3*.02}),S=e=>({left:(11*e+5)%90+5+"%",bottom:7*e%30+10+"%",animationDelay:.8*e%5+"s",animationDuration:3+e%4*1.5+"s"});return(s,i)=>(o(),l("div",Oe,[r("div",je,[r("div",$e,[(o(),l(p,null,v(30,e=>r("span",{key:e,class:"star",style:_(E(e))},null,4)),64))]),i[0]||(i[0]=r("div",{class:"moon"},null,-1)),i[1]||(i[1]=r("div",{class:"mountain mountain-far"},null,-1)),i[2]||(i[2]=r("div",{class:"mountain mountain-mid"},null,-1)),i[3]||(i[3]=r("div",{class:"mountain mountain-near"},null,-1)),r("div",Ne,[(o(),l(p,null,v(4,e=>r("span",{key:e,class:"cloud",style:_(P(e))},null,4)),64))]),r("div",Ve,[(o(),l(p,null,v(15,e=>r("span",{key:e,class:"sp",style:_(S(e))},null,4)),64))])]),h.value.length>0?(o(),l("div",qe,[i[4]||(i[4]=r("span",{class:"ann-icon"},"ğŸ“¢",-1)),r("div",Fe,[r("div",{class:"ann-track",style:_({animationDuration:6*h.value.length+"s"})},[(o(!0),l(p,null,v(h.value,(e,t)=>(o(),l("span",{key:t,class:"ann-item"},c(e.content),1))),128)),(o(!0),l(p,null,v(h.value,(e,t)=>(o(),l("span",{key:"d"+t,class:"ann-item"},c(e.content),1))),128))],4)])])):m("",!0),d.value.length>0?(o(),l("div",ze,[(o(!0),l(p,null,v(d.value,e=>{return o(),l("div",{key:e.id,class:u(["event-badge","evt-"+e.type])},[r("span",He,c((t=e.type,{double_cultivation:"âš¡",gacha_rate_up:"ğŸ´",double_drop:"ğŸ’",discount:"ğŸ·ï¸"}[t]||"ğŸ‰")),1),r("span",We,c(e.name),1),r("span",Ge,c(g(e.ends_at)),1)],2);var t}),128))])):m("",!0),r("div",Je,[i[5]||(i[5]=r("div",{class:"aura"},null,-1)),i[6]||(i[6]=r("div",{class:"aura aura2"},null,-1)),r("img",{src:n.value,class:"char-img"},null,8,Ue),r("div",Ye,[r("span",Ke,c(e.playerName),1),r("span",Qe,c(e.playerRealm),1)])]),"home"===e.activeTab?(o(),l("div",Xe,[r("div",Ze,[(o(!0),l(p,null,v(x.value,e=>(o(),l("div",{class:"hp-res",key:e.label},[r("span",et,c(e.icon),1),r("span",tt,c((e.value||0).toLocaleString()),1),r("span",at,c(e.label),1)]))),128))]),r("div",st,[i[16]||(i[16]=r("div",{class:"hp-card-title"},"ğŸ“Š è´¦å·æ¦‚å†µ",-1)),r("div",it,[r("div",nt,[i[7]||(i[7]=r("span",{class:"hp-stat-label"},"ä¿®ç‚¼è¿›åº¦",-1)),r("div",ot,[r("div",{class:"hp-progress-fill",style:_({width:C.value+"%"})},null,4)]),r("span",lt,c(R(t).cultivation||0)+"/"+c(R(t).maxCultivation||100),1)]),r("div",rt,[i[8]||(i[8]=r("span",{class:"hp-stat-label"},"çªç ´æ¬¡æ•°",-1)),r("span",ct,c(R(t).breakthroughCount||0),1)]),r("div",mt,[i[9]||(i[9]=r("span",{class:"hp-stat-label"},"ä¿®ç‚¼æ—¶é•¿",-1)),r("span",ut,c(D(R(t).totalCultivationTime||0)),1)]),r("div",ht,[i[10]||(i[10]=r("span",{class:"hp-stat-label"},"æ¢ç´¢æ¬¡æ•°",-1)),r("span",dt,c(R(t).explorationCount||0),1)])]),r("div",pt,[r("div",vt,[i[11]||(i[11]=r("span",null,"ğŸ… VIPç­‰çº§",-1)),r("span",gt,"VIP"+c(R(a).vipLevel||0),1)]),r("div",bt,[i[12]||(i[12]=r("span",null,"âš”ï¸ æˆ˜åŠ›",-1)),r("span",ft,c((R(t).getCombatPower()||0).toLocaleString()),1)]),r("div",yt,[i[13]||(i[13]=r("span",null,"ğŸ¾ ç„°å…½",-1)),R(t).activePet?(o(),l("span",_t,c(R(t).activePet.name),1)):(o(),l("span",Rt,"æœªå‡ºæˆ˜"))]),r("div",kt,[i[14]||(i[14]=r("span",null,"ğŸ”ï¸ ç„šå¤©å¡”",-1)),r("span",xt,"æœ€é«˜ "+c(R(t).dungeonHighestFloor||0)+"å±‚",1)]),r("div",Ct,[i[15]||(i[15]=r("span",null,"ğŸ’ èƒŒåŒ…",-1)),r("span",wt,c(w.value)+"ä»¶ç‰©å“",1)])])]),r("div",Dt,[i[17]||(i[17]=r("div",{class:"hp-card-title"},"ğŸš€ å¿«æ·å…¥å£",-1)),r("div",At,[(o(),l(p,null,v(A,e=>r("div",{key:e.key,class:"hp-sc",onClick:t=>s.$emit("navigate",e.key)},[r("span",Pt,c(e.icon),1),r("span",St,c(e.label),1)],8,Et)),64))])])])):m("",!0),"home"!==e.activeTab&&y.value.length>0?(o(),l("div",Bt,[(o(!0),l(p,null,v(y.value,e=>(o(),l("div",{key:e.key,class:u(["menu-card","menu-"+e.theme]),onClick:t=>s.$emit("navigate",e.key)},[r("div",Mt,[i[18]||(i[18]=r("div",{class:"m-icon-glow"},null,-1)),r("img",{src:e.icon,class:"m-icon-img"},null,8,It)]),r("div",Lt,c(e.label),1)],10,Tt))),128))])):m("",!0)]))}},[["__scopeId","data-v-6a687bd6"]]),jt={key:0,class:"login-gate"},$t={class:"login-bg"},Nt={class:"login-box"},Vt=["disabled"],qt={class:"header-content"},Ft={class:"header-actions"},zt={key:0,class:"header-vip-tag"},Ht={class:"header-wallet-btn"},Wt={class:"content-wrapper"},Gt={key:1},Jt={class:"sub-page-header"},Ut={class:"sub-page-title"},Yt={class:"bottom-nav"},Kt={class:"bottom-nav-inner"},Qt=["onClick"],Xt={class:"nav-icon"},Zt={class:"nav-label"},ea={__name:"App",setup(e){const t=w(),a=D(),i=ge(),n=ye(),{dialog:h}=J(["dialog"]),d=f(null),g=f([]),b=f(!1),y=f(!0),z=[{key:"home",label:"ä¸»åŸ",icon:"ğŸ "},{key:"adventure",label:"å†’é™©",icon:"âš”ï¸"},{key:"character",label:"è§’è‰²",icon:"ğŸ’"},{key:"social",label:"ç¤¾äº¤",icon:"ğŸ‘¥"},{key:"market",label:"å•†åŸ",icon:"ğŸ’°"}],H=f("home"),W={cultivation:"adventure",dungeon:"adventure","daily-dungeon":"adventure",exploration:"adventure",boss:"adventure",profile:"character",inventory:"character",alchemy:"character","mount-title":"character",ascension:"character",achievements:"character",sect:"social","sect-war":"social",friends:"social",pk:"social",auction:"social",rank:"social",shop:"market",recharge:"market",vip:"market",gacha:"market",events:"market"};s(()=>a.path,e=>{const t=e.slice(1);t&&W[t]&&(H.value=W[t])});const G=[{label:"äº‘å­˜æ¡£",key:"save"},{label:"æ–­å¼€è¿æ¥",key:"logout"}],ne=async()=>{try{const e=await n.connectWallet();e.gameData&&Object.keys(e.gameData).length>0&&Object.entries(e.gameData).forEach(([e,t])=>{e in i.$state&&(i[e]=t)}),await le()}catch(e){alert(e.message)}},oe=async e=>{if("save"===e)try{await n.saveToCloud(i),alert("äº‘å­˜æ¡£ä¿å­˜æˆåŠŸï¼")}catch(t){alert("ä¿å­˜å¤±è´¥ï¼š"+t.message)}else"logout"===e&&n.logout()},le=async()=>{y.value=!0,await i.initializePlayer(),y.value=!1,re(),ce();const e=i.calculateOfflineReward();if(e){const t=Math.floor(e.offlineMin/60),a=e.offlineMin%60,s=t>0?`${t}å°æ—¶${a}åˆ†é’Ÿ`:`${a}åˆ†é’Ÿ`;h.success({title:"ğŸŒ™ ç¦»çº¿ç„°åŠ›",content:()=>C("div",{style:"text-align:center;padding:8px 0"},[C("div",{style:"font-size:14px;color:#a09880;margin-bottom:12px"},`ä½ ç¦»å¼€äº† ${s}`),C("div",{style:"display:flex;justify-content:center;gap:20px"},[C("div",{style:"text-align:center"},[C("div",{style:"font-size:24px;font-weight:bold;color:#7c5cbf"},`+${e.cultivation}`),C("div",{style:"font-size:12px;color:#a09880"},"ç„°åŠ›")]),C("div",{style:"text-align:center"},[C("div",{style:"font-size:24px;font-weight:bold;color:#d4a843"},`+${e.stones}`),C("div",{style:"font-size:12px;color:#a09880"},"ç„°æ™¶")]),C("div",{style:"text-align:center"},[C("div",{style:"font-size:24px;font-weight:bold;color:#4caf50"},`+${e.spirit}`),C("div",{style:"font-size:12px;color:#a09880"},"ç„°çµ")])]),e.vipBoost>1?C("div",{style:"margin-top:10px;font-size:12px;color:#d4a843"},`VIPåŠ æˆ x${e.vipBoost}`):null]),positiveText:"å¤ªå¥½äº†ï¼"})}};n.isLoggedIn&&le(),s(()=>i.isNewPlayer,e=>{b.value=e,e||"/"!==a.path||t.push("/cultivation")});const re=()=>{var e;g.value=[...b.value?[{label:"æ¬¢è¿",key:"",icon:me(A)}]:[],{label:"ä¿®ç‚¼",key:"cultivation",icon:me(E)},{label:"èƒŒåŒ…",key:"inventory",icon:me(P)},{label:"æŠ½å¥–",key:"gacha",icon:me(S)},{label:"ç„°ç‚¼",key:"alchemy",icon:me(B)},{label:"æ¢ç´¢",key:"exploration",icon:me(T)},{label:"ç§˜å¢ƒ",key:"dungeon",icon:me(M)},{label:"ç„°å¢ƒ",key:"daily-dungeon",icon:me(T)},{label:"é»‘ç„°å…¥ä¾µ",key:"boss",icon:me(M)},{label:"ç„°åŠŸ",key:"achievements",icon:me(I)},{label:"ç„°éª‘/ç„°å·",key:"mount-title",icon:me(L)},{label:"å……å€¼",key:"recharge",icon:me(O)},{label:"ç„°æ™¶å•†é“º",key:"shop",icon:me(S)},{label:"ç„°å¸‚",key:"auction",icon:me(O)},{label:"ç„°é˜¶",key:"vip",icon:me(L)},{label:"ç„°ç›Ÿ",key:"sect",icon:me(A)},{label:"ç„°ç›Ÿæˆ˜",key:"sect-war",icon:me(M)},{label:"ç„°å‹",key:"friends",icon:me(j)},{label:"ç„°æ¦œ",key:"rank",icon:me($)},{label:"è®¾ç½®",key:"settings",icon:me(N)},..."0xfad7eb0814b6838b05191a07fb987957d50c4ca9"===(null==(e=n.wallet)?void 0:e.toLowerCase())?[{label:"æ´»åŠ¨ç®¡ç†",key:"admin/events",icon:me(N)}]:[],...i.isGMMode?[{label:"GMè°ƒè¯•",key:"gm",icon:me(j)}]:[]]},ce=()=>{d.value||(d.value=new Worker(new URL(""+new URL("../spirit-BA7otd2n.js",import.meta.url).href,import.meta.url)),d.value.onmessage=e=>{"gain"===e.data.type&&(i.totalCultivationTime+=1,i.gainSpirit(1))},d.value.postMessage({type:"start"}))};document.documentElement.removeAttribute("data-theme"),document.documentElement.classList.add("dark");const me=e=>()=>C(K,null,{default:()=>C(e)}),ue=e=>{t.push(`/${e}`)},he=k(()=>"/"===a.path||""===a.path),de={cultivation:"ä¿®ç‚¼",inventory:"èƒŒåŒ…",gacha:"ç„°è¿é˜",alchemy:"ç„°ç‚¼",exploration:"æ¢ç´¢",dungeon:"ç„šå¤©å¡”","daily-dungeon":"ç„°å¢ƒ",pk:"ç„°æ­¦",boss:"é»‘ç„°å…¥ä¾µ",sect:"ç„°ç›Ÿ","sect-war":"ç„°ç›Ÿæˆ˜",friends:"ç„°å‹",auction:"ç„°å¸‚",shop:"ç„°æ™¶å•†é“º",events:"æ´»åŠ¨","mount-title":"ç„°éª‘ç„°å·",ascension:"æ¶…æ§ƒé£å‡",recharge:"å……å€¼",vip:"ç„°é˜¶",achievements:"ç„°åŠŸ",rank:"ç„°æ¦œ",settings:"è®¾ç½®","admin/events":"æ´»åŠ¨ç®¡ç†",gm:"GMè°ƒè¯•",profile:"è§’è‰²ä¿¡æ¯"},pe=k(()=>{const e=a.path.slice(1);return de[e]||""}),be=()=>{t.push("/")},fe=e=>({left:(13*e+7)%100+"%",top:(17*e+3)%100+"%",animationDelay:.7*e%5+"s",animationDuration:3+e%4*1.5+"s",width:2+e%3+"px",height:2+e%3+"px"});return window.addEventListener("beforeunload",e=>{(()=>{if(i.updateOnlineTime(),n.isLoggedIn){const e=i.$state,t=JSON.stringify({gameData:e,combatPower:"function"==typeof i.getCombatPower?i.getCombatPower():0,level:i.level,realm:i.realm,spiritStones:i.spiritStones,name:i.name});navigator.sendBeacon("/api/game/save-beacon?token="+n.token,new Blob([t],{type:"application/json"}))}})();const t=i.getLastSaveTime();t&&Date.now()-t>5e3&&(e.preventDefault(),e.returnValue="ä½ æœ‰æœªä¿å­˜çš„æ¸¸æˆæ•°æ®ï¼Œç¡®å®šè¦ç¦»å¼€å—ï¼Ÿ")}),(e,s)=>{const h=ae,d=te,g=V("router-view"),b=se,f=ee,k=Z,C=X,w=Q,D=Y;return o(),x(D,{theme:R(U)},{default:q(()=>[F(w,null,{default:q(()=>[F(C,null,{default:q(()=>[R(n).isLoggedIn?(o(),x(k,{key:1,show:y.value,description:"æ­£åœ¨åŠ è½½æ¸¸æˆæ•°æ®..."},{default:q(()=>[F(f,null,{default:q(()=>[F(d,{bordered:"",class:"app-header"},{default:q(()=>[r("div",qt,[s[8]||(s[8]=r("div",{class:"header-title"},"ç«ä¹‹æ–‡æ˜",-1)),r("div",Ft,[R(n).vipLevel>0?(o(),l("span",zt,"VIP"+c(R(n).vipLevel),1)):m("",!0),r("button",{class:"header-icon-btn",onClick:s[0]||(s[0]=e=>R(t).push("/settings"))},[F(R(K),{size:15},{default:q(()=>[F(R(N))]),_:1})]),F(h,{options:G,onSelect:oe},{default:q(()=>[r("button",Ht,c(R(n).shortWallet),1)]),_:1})])])]),_:1}),F(b,null,{default:q(()=>[r("div",Wt,[he.value?(o(),x(Ot,{key:0,playerName:R(i).name,playerRealm:R(ve)(R(i).level).name,activeTab:H.value,onNavigate:ue},null,8,["playerName","playerRealm","activeTab"])):(o(),l("div",Gt,[r("div",Jt,[r("button",{class:"back-btn",onClick:be},"â† è¿”å›"),r("span",Ut,c(pe.value),1),s[9]||(s[9]=r("span",{class:"sub-page-spacer"},null,-1))]),F(g)]))])]),_:1}),F(Le),r("div",Yt,[r("div",Kt,[(o(),l(p,null,v(z,e=>r("div",{key:e.key,class:u(["nav-tab",{active:H.value===e.key}]),onClick:s=>{return i=e.key,H.value=i,void("/"!==a.path&&t.push("/"));var i}},[r("span",Xt,c(e.icon),1),s[10]||(s[10]=r("span",{class:"nav-indicator"},null,-1)),r("span",Zt,c(e.label),1)],10,Qt)),64))])])]),_:1})]),_:1},8,["show"])):(o(),l("div",jt,[r("div",$t,[(o(),l(p,null,v(30,e=>r("span",{key:e,class:"login-particle",style:_(fe(e))},null,4)),64))]),r("div",Nt,[s[1]||(s[1]=r("img",{src:ie,class:"login-logo"},null,-1)),s[2]||(s[2]=r("div",{class:"login-title"},"ç«ä¹‹æ–‡æ˜",-1)),s[3]||(s[3]=r("div",{class:"login-title-sub"},"ç„°ä¿®ä¼ è¯´",-1)),s[4]||(s[4]=r("div",{class:"login-divider"},null,-1)),s[5]||(s[5]=r("div",{class:"login-subtitle"},"ç‚¹ç‡ƒä½ çš„ç«ç„°ä¹‹åŠ›",-1)),r("button",{class:"login-btn-custom",onClick:ne,disabled:R(n).isConnecting},c(R(n).isConnecting?"è¿æ¥ä¸­...":"è¿æ¥é’±åŒ…"),9,Vt),s[6]||(s[6]=r("div",{class:"login-footer"},"Powered by Roon Chain",-1))]),s[7]||(s[7]=r("div",{class:"login-version"},"v1.0",-1))]))]),_:1})]),_:1})]),_:1},8,["theme"])}}},ta={},aa=function(e,t,a){let s=Promise.resolve();if(t&&t.length>0){let e=function(e){return Promise.all(e.map(e=>Promise.resolve(e).then(e=>({status:"fulfilled",value:e}),e=>({status:"rejected",reason:e}))))};const i=document.getElementsByTagName("link"),n=document.querySelector("meta[property=csp-nonce]"),o=(null==n?void 0:n.nonce)||(null==n?void 0:n.getAttribute("nonce"));s=e(t.map(e=>{if(e=function(e,t){return new URL(e,t).href}(e,a),e in ta)return;ta[e]=!0;const t=e.endsWith(".css"),s=t?'[rel="stylesheet"]':"";if(!!a)for(let a=i.length-1;a>=0;a--){const s=i[a];if(s.href===e&&(!t||"stylesheet"===s.rel))return}else if(document.querySelector(`link[href="${e}"]${s}`))return;const n=document.createElement("link");return n.rel=t?"stylesheet":"modulepreload",t||(n.as="script"),n.crossOrigin="",n.href=e,o&&n.setAttribute("nonce",o),document.head.appendChild(n),t?new Promise((t,a)=>{n.addEventListener("load",t),n.addEventListener("error",()=>a(new Error(`Unable to preload CSS for ${e}`)))}):void 0}))}function i(e){const t=new Event("vite:preloadError",{cancelable:!0});if(t.payload=e,window.dispatchEvent(t),!t.defaultPrevented)throw e}return s.then(t=>{for(const e of t||[])"rejected"===e.status&&i(e.reason);return e().catch(i)})},sa=[{path:"/",name:"Home",component:()=>aa(()=>import("./Home-Cn0aDvqc.js"),__vite__mapDeps([0,1,2,3]),import.meta.url)},{path:"/cultivation",name:"Cultivation",component:()=>aa(()=>import("./Cultivation-ahFUc6EJ.js"),__vite__mapDeps([4,5,2,1,6,7,8,9]),import.meta.url)},{path:"/inventory",name:"Inventory",component:()=>aa(()=>import("./Inventory-Dc86XHrZ.js"),__vite__mapDeps([10,1,7,2,8,11]),import.meta.url)},{path:"/exploration",name:"Exploration",component:()=>aa(()=>import("./Exploration-CYfinN5Z.js"),__vite__mapDeps([12,1,13,5,2,6,7,8,14]),import.meta.url)},{path:"/achievements",name:"Achievements",component:()=>aa(()=>import("./Achievements-CVl-0jNA.js"),__vite__mapDeps([15,7,2,1,8,16]),import.meta.url)},{path:"/settings",name:"Settings",component:()=>aa(()=>import("./Settings-9SbvFsTL.js"),__vite__mapDeps([17,1,2]),import.meta.url)},{path:"/gm",name:"gm",component:()=>aa(()=>import("./GM-C3JCpAVx.js"),__vite__mapDeps([18,13,2,1]),import.meta.url),beforeEnter:(e,t,a)=>{ge().isGMMode?a():a("/cultivation")}},{path:"/alchemy",name:"alchemy",component:()=>aa(()=>import("./Alchemy-jDqAAhM7.js"),__vite__mapDeps([19,13,5,2,1,6,7,8,20]),import.meta.url)},{path:"/dungeon",name:"Dungeon",component:()=>aa(()=>import("./Dungeon-CdFWjda1.js"),__vite__mapDeps([21,5,2,1,6,22]),import.meta.url)},{path:"/gacha",name:"Gacha",component:()=>aa(()=>import("./Gacha-B2S0fntG.js"),__vite__mapDeps([23,24,7,2,1,8,25]),import.meta.url)},{path:"/recharge",name:"Recharge",component:()=>aa(()=>import("./Recharge-ByiLlN8N.js"),__vite__mapDeps([26,2,1,27]),import.meta.url)},{path:"/vip",name:"Vip",component:()=>aa(()=>import("./Vip-D6lUPO83.js"),__vite__mapDeps([28,7,2,1,8,29]),import.meta.url)},{path:"/rank",name:"Rank",component:()=>aa(()=>import("./Rank-D39Ti82m.js"),__vite__mapDeps([30,1,2,31]),import.meta.url)},{path:"/shop",name:"Shop",component:()=>aa(()=>import("./Shop-Cr3ZZ5Ou.js"),__vite__mapDeps([32,24,2,1,33]),import.meta.url)},{path:"/events",name:"Events",component:()=>aa(()=>import("./Events-B6at7rGJ.js"),__vite__mapDeps([34,24,7,2,1,8,35]),import.meta.url)},{path:"/pk",name:"PK",component:()=>aa(()=>import("./PK-CEXSoXU1.js"),__vite__mapDeps([36,24,7,2,1,8,37]),import.meta.url)},{path:"/sect",name:"Sect",component:()=>aa(()=>import("./Sect-DAb885fw.js"),__vite__mapDeps([38,7,2,1,8,39]),import.meta.url)},{path:"/admin/events",name:"AdminEvents",component:()=>aa(()=>import("./AdminEvents-CdbS2MGd.js"),__vite__mapDeps([40,2,1,41]),import.meta.url)},{path:"/boss",name:"WorldBoss",component:()=>aa(()=>import("./WorldBoss-C-_CGE-g.js"),__vite__mapDeps([42,1,24,7,2,8,43]),import.meta.url)},{path:"/friends",name:"Friends",component:()=>aa(()=>import("./Friends-CWDkO_4l.js"),__vite__mapDeps([44,1,7,2,8,45]),import.meta.url)},{path:"/sect-war",name:"SectWar",component:()=>aa(()=>import("./SectWar-BRP8fFzN.js"),__vite__mapDeps([46,7,2,1,8,47]),import.meta.url)},{path:"/auction",name:"Auction",component:()=>aa(()=>import("./Auction-PnbqNxNU.js"),__vite__mapDeps([48,7,2,1,8,49]),import.meta.url)},{path:"/daily-dungeon",name:"DailyDungeon",component:()=>aa(()=>import("./DailyDungeon-Bt5WBGo9.js"),__vite__mapDeps([50,24,7,2,1,8,51]),import.meta.url)},{path:"/mount-title",name:"MountTitle",component:()=>aa(()=>import("./MountTitle-D-OKGX-O.js"),__vite__mapDeps([52,2,1,53]),import.meta.url)},{path:"/ascension",name:"Ascension",component:()=>aa(()=>import("./Ascension-CWmxcjcF.js"),__vite__mapDeps([54,7,2,1,8,55]),import.meta.url)},{path:"/profile",name:"Profile",component:()=>aa(()=>import("./Profile-DrHtBP0z.js"),__vite__mapDeps([56,7,2,1,8,57]),import.meta.url)}],ia=z({history:H(),routes:sa});let na=0;ia.beforeEach(async(e,t,a)=>{const s=Date.now();if(s-na>1e4)try{const{useAuthStore:e}=await aa(async()=>{const{useAuthStore:e}=await Promise.resolve().then(()=>_e);return{useAuthStore:e}},void 0,import.meta.url),{usePlayerStore:t}=await aa(async()=>{const{usePlayerStore:e}=await Promise.resolve().then(()=>be);return{usePlayerStore:e}},void 0,import.meta.url),a=e(),i=t();a.isLoggedIn&&(a.saveToCloud(i).catch(()=>{}),na=s)}catch{}a()});const oa=W(ea),la=G();oa.use(la),oa.use(ia),oa.mount("#app");export{Re as _,ye as a,ve as b,me as c,oe as d,le as e,aa as f,pe as g,ce as p,ge as u};

import{_ as e,u as a,a as l}from"./index-C_Usn6qf.js";import{s as t}from"./sfx-Bhf_myqE.js";import{G as i}from"./GameGuide-Dc_uhL03.js";import{u as s,j as n,T as o,U as u,R as r,B as c,N as d,q as m,k as p,w as v,r as h,p as y,s as f,F as b,V as g,m as w,t as x,l as R,W as q,X as k}from"./naive-ui-CtewNtT3.js";import{w as M,o as _,bg as E,bh as S,bF as j,bE as W,r as C,bf as Q,k as B,bi as I,b1 as P,aW as U,F as O,bk as D,bM as F,bN as L,bO as $,b7 as T,bn as z,bj as G,q as N}from"./vendor-CBGg7cPT.js";const K={class:"gacha-page"},A={class:"gacha-container"},V={class:"pool-info-section"},J={class:"pool-title"},X={class:"gacha-type-selector"},H={class:"spirit-stones"},Y={class:"gacha-item-container"},Z={class:"gacha-buttons"},ee={class:"gacha-btn-row"},ae=["onClick","disabled"],le={class:"gacha-btn-label"},te={class:"gacha-btn-cost"},ie={class:"gacha-tool-row"},se={class:"flip-stage"},ne={class:"flip-cards"},oe=["onClick"],ue={class:"flip-card-inner"},re={class:"card-icon"},ce={class:"card-name"},de={class:"flip-actions"},me={key:0,class:"result-summary"},pe={key:1,class:"filter-section"},ve=["disabled"],he={class:"gacha-btn-label"},ye={class:"gacha-btn-cost"},fe={class:"result-grid"},be={key:0},ge={key:1},we={class:"probability-bars"},xe={class:"prob-label"},Re={class:"probability-bars"},qe={class:"prob-label"},ke=e({__name:"Gacha",setup(e){const ke=a(),Me=l(),_e=s(),Ee=[1,.95,.9,.85,.8,.7],Se=C(1),je=C(null),We=C("equipment"),Ce=C("equipment"),Qe=C(!1),Be=C(!1),Ie=C(!1),Pe=C(!1),Ue=C([]),Oe=C(!1),De=C(null),Fe=C(!1),Le=C(!1),$e=C(null),Te=async()=>{try{const e=new URLSearchParams;e.append("type",Ce.value),e.append("wishlistEnabled",ke.wishlistEnabled),ke.selectedWishEquipQuality&&e.append("wishEquipQuality",ke.selectedWishEquipQuality),ke.selectedWishPetRarity&&e.append("wishPetRarity",ke.selectedWishPetRarity);const a=await fetch(`/api/gacha/probabilities?${e}`);a.ok&&(je.value=await a.json())}catch(e){console.error("è·å–æ¦‚ç‡å¤±è´¥:",e)}};M([()=>ke.wishlistEnabled,()=>ke.selectedWishEquipQuality,()=>ke.selectedWishPetRarity,Ce],()=>{Te()},{immediate:!0}),_(async()=>{var e;try{const a=await fetch("/api/events/effects"),l=await a.json();Se.value=(null==(e=l.effects)?void 0:e.gachaRateBoost)||1}catch{}Te()});const ze=e=>{if(e.length>10)return void(Ie.value=!0);Ue.value=e.map(e=>(e=>{var a,l,t,i;const s=e.qualityInfo||e.quality,n="pet"===e.type,o=s?(null==(a=Ye[e.quality])?void 0:a.color)||"#9e9e9e":(null==(l=aa[e.rarity])?void 0:l.color)||"#9e9e9e",u=s?(null==(t=Ye[e.quality])?void 0:t.name)||"æœªçŸ¥":(null==(i=aa[e.rarity])?void 0:i.name)||"æœªçŸ¥",r=s?e.quality:e.rarity||"common",c=n?"ğŸ¾":"âš”ï¸";return{name:e.name,color:o,qualityName:u,qualityKey:r,icon:c,flipped:!1}})(e)),Oe.value=!1,Pe.value=!0;Ue.value.forEach((e,a)=>{setTimeout(()=>{e.flipped=!0,t.cardFlip(),["mythic","legendary","epic","divine","celestial"].includes(e.qualityKey)&&setTimeout(()=>t.cardRare(),200),a===Ue.value.length-1&&(Oe.value=!0)},300+400*a)})},Ge=()=>{Ue.value.forEach(e=>e.flipped=!0),Oe.value=!0},Ne=()=>{Pe.value=!1,Ie.value=!0},Ke=C(1),Ae=C(12),Ve=C(null),Je=C(null),Xe=C(!1),He=C(!1),Ye={common:{name:"å‡¡å“",color:"#9e9e9e",statMod:1,maxStatMod:1.5},uncommon:{name:"ä¸‹å“",color:"#4caf50",statMod:1.2,maxStatMod:2},rare:{name:"ä¸­å“",color:"#2196f3",statMod:1.5,maxStatMod:2.5},epic:{name:"ä¸Šå“",color:"#9c27b0",statMod:2,maxStatMod:3},legendary:{name:"æå“",color:"#ff9800",statMod:2.5,maxStatMod:3.5},mythic:{name:"ä»™å“",color:"#e91e63",statMod:3,maxStatMod:4}},Ze={weapon:{name:"ç„°æ–",slot:"weapon",prefixes:["ä¹å¤©","å¤ªè™š","æ··æ²Œ","ç„å¤©","ç´«éœ„","é’å†¥","èµ¤ç‚","å¹½å†¥"]},head:{name:"å¤´éƒ¨",slot:"head",prefixes:["å¤©çµ","ç„å†¥","ç´«é‡‘","é’ç‰","èµ¤éœ","å¹½æœˆ","æ˜Ÿè¾°","äº‘éœ„"]},body:{name:"è¡£æœ",slot:"body",prefixes:["ä¹éœ„","å¤ªç´ ","æ··å…ƒ","ç„é˜³","ç´«è–‡","é’é¾™","èµ¤å‡¤","å¹½å†¥"]},legs:{name:"è£¤å­",slot:"legs",prefixes:["å¤©ç½¡","ç„æ­¦","ç´«ç”µ","é’äº‘","èµ¤é˜³","å¹½çµ","æ˜Ÿå…‰","äº‘é›¾"]},feet:{name:"é‹å­",slot:"feet",prefixes:["å¤©è¡Œ","ç„é£","ç´«éœ","é’è²","èµ¤ç„°","å¹½å½±","æ˜Ÿæ­¥","äº‘è¸ª"]},shoulder:{name:"è‚©ç”²",slot:"shoulder",prefixes:["å¤©æŠ¤","ç„ç”²","ç´«é›·","é’é”‹","èµ¤ç¾½","å¹½å²š","æ˜ŸèŠ’","äº‘ç”²"]},hands:{name:"æ‰‹å¥—",slot:"hands",prefixes:["å¤©ç½—","ç„ç‰","ç´«æ™¶","é’é’¢","èµ¤é‡‘","å¹½é“¶","æ˜Ÿé“","äº‘çº¹"]},wrist:{name:"æŠ¤è…•",slot:"wrist",prefixes:["å¤©ç»","ç„é“","ç´«ç‰","é’çŸ³","èµ¤é“œ","å¹½é’¢","æ˜Ÿæ™¶","äº‘çº±"]},necklace:{name:"ç„°å¿ƒé“¾",slot:"necklace",prefixes:["å¤©ç ","ç„åœ£","ç´«çµ","é’é­‚","èµ¤å¿ƒ","å¹½é­„","æ˜Ÿé­‚","äº‘ç "]},ring1:{name:"ç¬¦æ–‡æˆ’1",slot:"ring1",prefixes:["å¤©å‘½","ç„å‘½","ç´«å‘½","é’å‘½","èµ¤å‘½","å¹½å‘½","æ˜Ÿå‘½","äº‘å‘½"]},ring2:{name:"ç¬¦æ–‡æˆ’2",slot:"ring2",prefixes:["å¤©é“","ç„é“","ç´«é“","é’é“","èµ¤é“","å¹½é“","æ˜Ÿé“","äº‘é“"]},belt:{name:"è…°å¸¦",slot:"belt",prefixes:["å¤©ç³»","ç„ç³»","ç´«ç³»","é’ç³»","èµ¤ç³»","å¹½ç³»","æ˜Ÿç³»","äº‘ç³»"]},artifact:{name:"ç„°å™¨",slot:"artifact",prefixes:["å¤©å®","ç„å®","ç´«å®","é’å®","èµ¤å®","å¹½å®","æ˜Ÿå®","äº‘å®"]}},ea=["weapon","head","body","legs","feet","shoulder","hands","wrist","necklace","ring1","ring2","belt","artifact"],aa={divine:{name:"ç¥å“",color:"#FF0000",probability:.002,essenceBonus:50},celestial:{name:"ä»™å“",color:"#FFD700",probability:.0581,essenceBonus:30},mystic:{name:"ç„å“",color:"#9932CC",probability:.1601,essenceBonus:20},spiritual:{name:"çµå“",color:"#1E90FF",probability:.2801,essenceBonus:10},mortal:{name:"å‡¡å“",color:"#32CD32",probability:.4997,essenceBonus:5}},la={common:.5,uncommon:.3,rare:.12,epic:.05,legendary:.02,mythic:.01},ta=e=>Math.min(1,.2/la[e]),ia=e=>Math.min(1,.2/aa[e].probability),sa=()=>{const e={...la};if(Se.value>1){let a=0;["rare","epic","legendary","mythic"].forEach(l=>{const t=e[l];e[l]=Math.min(t*Se.value,.5),a+=e[l]-t}),e.common=Math.max(.05,e.common-.7*a),e.uncommon=Math.max(.05,e.uncommon-.3*a)}if(ke.wishlistEnabled&&ke.selectedWishEquipQuality){const a=ke.selectedWishEquipQuality,l=ta(a);e[a]*=1+l;const t=Object.entries(e).filter(([e])=>e!==a).reduce((e,[,a])=>e+a,0),i=(1-e[a])/t;Object.keys(e).forEach(l=>{l!==a&&(e[l]*=i)})}return e},na=()=>{const e={};if(Object.entries(aa).forEach(([a,l])=>{e[a]=l.probability}),Se.value>1){let a=0;["mystic","celestial","divine"].forEach(l=>{if(e[l]){const t=e[l];e[l]=Math.min(t*Se.value,.4),a+=e[l]-t}}),e.mortal&&(e.mortal=Math.max(.05,e.mortal-.6*a)),e.spiritual&&(e.spiritual=Math.max(.05,e.spiritual-.4*a))}if(ke.wishlistEnabled&&ke.selectedWishPetRarity){const a=ke.selectedWishPetRarity,l=ia(a);e[a]*=1+l;const t=Object.entries(e).filter(([e])=>e!==a).reduce((e,[,a])=>e+a,0),i=(1-e[a])/t;Object.keys(e).forEach(l=>{l!==a&&(e[l]*=i)})}return e},oa=C(1),ua=async e=>{var a,l,t,i,s;oa.value=e,Ie.value=!1;const n=ke.wishlistEnabled?200*e:100*e,o=Ee[Me.vipLevel]||1,u=Math.floor(n*o);if(ke.spiritStones<u)return void _e.error("ç„°æ™¶ä¸è¶³ï¼");const r=ke.items.filter(e=>e.type&&"pill"!==e.type&&"pet"!==e.type&&e.stats).length,c=ke.items.filter(e=>"pet"===e.type).length,d=ke.getStorageLimit("equip"),m=ke.getStorageLimit("pet");if("equipment"===Ce.value&&r>=d)return void _e.error(`è£…å¤‡èƒŒåŒ…å·²æ»¡(${r}/${d})ï¼Œè¯·å…ˆå¤„ç†ä¸€äº›è£…å¤‡`);if("pet"===Ce.value&&c>=m)return void _e.error(`ç„°å…½èƒŒåŒ…å·²æ»¡(${c}/${m})ï¼Œè¯·å…ˆå¤„ç†ä¸€äº›ç„°å…½`);if("all"===Ce.value&&r>=d&&c>=m)return void _e.error("è£…å¤‡å’Œç„°å…½èƒŒåŒ…å‡å·²æ»¡ï¼Œè¯·å…ˆå¤„ç†");if(Le.value)return;Le.value=!0,Qe.value=!0,await new Promise(e=>setTimeout(e,1e3)),Qe.value=!1,Be.value=!0,await new Promise(e=>setTimeout(e,1e3));let p=[];if(Me.isLoggedIn)try{const t=Me.token,i=await fetch("/api/gacha/draw",{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${t}`},body:JSON.stringify({count:e,type:Ce.value,wishlistEnabled:ke.wishlistEnabled,wishEquipQuality:ke.selectedWishEquipQuality,wishPetRarity:ke.selectedWishPetRarity})}),s=await i.json();if(!i.ok)return _e.error(s.error||"æŠ½å¡å¤±è´¥"),Le.value=!1,void(Be.value=!1);p=s.results||[],$e.value=s,ke.spiritStones=s.spiritStones,s.petEssenceGained&&(ke.petEssence=(ke.petEssence||0)+s.petEssenceGained),(null==(a=s.autoSold)?void 0:a.income)&&(ke.reinforceStones=(ke.reinforceStones||0)+s.autoSold.income),p.forEach(e=>{e.id=e.id||Date.now()+Math.random(),ea.includes(e.type)&&(e.qualityInfo=Ye[e.quality]),ke.items.push(e)}),(null==(l=s.autoSold)?void 0:l.count)&&_e.success(`è‡ªåŠ¨å‡ºå”®äº† ${s.autoSold.count} ä»¶è£…å¤‡ï¼Œè·å¾— ${s.autoSold.income} æ·¬ç«çŸ³`),s.autoReleased&&_e.success(`è‡ªåŠ¨æ”¾ç”Ÿäº† ${s.autoReleased} åªç„°å…½`)}catch(v){return console.error("æŠ½å¡è¯·æ±‚å¤±è´¥:",v),_e.error("æŠ½å¡è¯·æ±‚å¤±è´¥ï¼Œè¯·ç¨åé‡è¯•"),Le.value=!1,void(Be.value=!1)}else{ke.spiritStones-=u;for(let a=0;a<e;a++){let e=ra();if("pet"===e.type){if(ke.petEssence+=(null==(t=aa[e.rarity])?void 0:t.essenceBonus)||0,(null==(i=ke.autoReleaseRarities)?void 0:i.length)>0&&(ke.autoReleaseRarities.includes("all")||ke.autoReleaseRarities.includes(e.rarity)))continue}else if((null==(s=ke.autoSellQualities)?void 0:s.length)>0&&(ke.autoSellQualities.includes("all")||ke.autoSellQualities.includes(e.quality))){const a={mythic:6,legendary:5,epic:4,rare:3,uncommon:2,common:1}[e.quality]||1;ke.reinforceStones=(ke.reinforceStones||0)+a;continue}e.id=Date.now()+Math.random(),ke.items.push(e),p.push(e)}$e.value={cost:u,autoSold:{count:0,income:0},autoReleased:0},ke.saveData()}De.value=p,Ke.value=1,Je.value=null,Ve.value=null,Be.value=!1,Le.value=!1,ze(p)},ra=()=>"equipment"===Ce.value?ca():"pet"===Ce.value?ma():Math.random()<.5?ca():ma(),ca=()=>{const e=sa(),a=Math.random();let l=0,t="common";for(const[d,m]of Object.entries(e))if(l+=m,a<=l){t=d;break}const i=Object.keys(Ze),s=i[Math.floor(Math.random()*i.length)],n=Math.max(1,(ke.level||1)-10),o=Math.floor(Math.random()*((ke.level||1)-n+1))+n,u=Ye[t].statMod,r=1+.1*o,c={};return Object.entries(va[s]).forEach(([e,a])=>{const l=(a.min+Math.random()*(a.max-a.min))*u*r;["critRate","critDamageBoost","dodgeRate","vampireRate","finalDamageBoost","finalDamageReduce","comboRate","counterRate","stunRate","healBoost","spiritRate","combatBoost","resistanceBoost"].includes(e)?c[e]=Math.round(100*l)/100:c[e]=Math.round(l)}),{type:s,slot:s,quality:t,level:o,requiredRealm:o,name:da(s,t),stats:c,equipType:s,qualityInfo:Ye[t]}},da=(e,a)=>{const l=Ze[e],t=l.prefixes[Math.floor(Math.random()*l.prefixes.length)],i={common:0,uncommon:3,rare:4,epic:5,legendary:6,mythic:7}[a]||0;return`${t}${l.name}${["","Â·çœŸ","Â·æ","Â·é“","Â·å¤©","Â·ä»™","Â·åœ£","Â·ç¥"][i]}`},ma=()=>{const e=na(),a=Math.random();let l=0,t="mortal";for(const[u,r]of Object.entries(e))if(l+=r,a<=l){t=u;break}const i={divine:[{name:"ç„æ­¦",description:"åŒ—æ–¹å®ˆæŠ¤ç¥å…½"},{name:"ç™½è™",description:"è¥¿æ–¹å®ˆæŠ¤ç¥å…½"}],celestial:[{name:"å›šç‰›",description:"é¾™ä¹‹é•¿å­"},{name:"çšçœ¦",description:"é¾™ä¹‹æ¬¡å­"}],mystic:[{name:"ç«å‡¤å‡°",description:"æµ´ç«é‡ç”Ÿ"},{name:"é›·é¹°",description:"é›·ç”µçŒ›ç¦½"}],spiritual:[{name:"ç„é¾Ÿ",description:"æ°´ç³»ç„°å…½"},{name:"é£éš¼",description:"é£è¡Œç„°å…½"}],mortal:[{name:"çµçŒ«",description:"æ•æ·å°å‹ç„°å…½"},{name:"å¹»è¶",description:"ç¾ä¸½è´è¶"}]},s=i[t]||i.mortal,n=s[Math.floor(Math.random()*s.length)],o=(e=>{const a={divine:{base:5,percent:2},celestial:{base:4,percent:1.8},mystic:{base:3,percent:1.6},spiritual:{base:2,percent:1.4},mortal:{base:1,percent:1}};return a[e]||a.mortal})(t);return{...n,type:"pet",rarity:t,quality:{strength:Math.floor(10*Math.random())+1,agility:Math.floor(10*Math.random())+1,intelligence:Math.floor(10*Math.random())+1,constitution:Math.floor(10*Math.random())+1},power:0,experience:0,maxExperience:100,level:1,star:0,upgradeItems:{divine:5,celestial:4,mystic:3,spiritual:2,mortal:1}[t]||1,combatAttributes:pa(o)}},pa=e=>{const a={};return["attack","health","defense","speed","critRate","comboRate","counterRate","stunRate","dodgeRate","vampireRate"].forEach(l=>{["critRate","comboRate","counterRate","stunRate","dodgeRate","vampireRate"].includes(l)?a[l]=Math.min(1,Math.round((.05+.05*Math.random())*e.percent*100)/100):a[l]="speed"===l?Math.round((10+5*Math.random())*e.base*.6):Math.round(("attack"===l?10:"health"===l?100:5)+Math.random()*("attack"===l?5:"health"===l?20:3)*e.base)}),a},va={weapon:{attack:{name:"æ”»å‡»",min:10,max:20},critRate:{name:"æš´å‡»ç‡",min:.05,max:.1},critDamageBoost:{name:"æš´å‡»ä¼¤å®³",min:.1,max:.3}},head:{defense:{name:"é˜²å¾¡",min:5,max:10},health:{name:"ç”Ÿå‘½",min:50,max:100},stunResist:{name:"æŠ—çœ©æ™•",min:.05,max:.1}},body:{defense:{name:"é˜²å¾¡",min:8,max:15},health:{name:"ç”Ÿå‘½",min:80,max:150},finalDamageReduce:{name:"æœ€ç»ˆå‡ä¼¤",min:.05,max:.1}},legs:{defense:{name:"é˜²å¾¡",min:6,max:12},speed:{name:"é€Ÿåº¦",min:5,max:10},dodgeRate:{name:"é—ªé¿ç‡",min:.05,max:.1}},feet:{defense:{name:"é˜²å¾¡",min:4,max:8},speed:{name:"é€Ÿåº¦",min:8,max:15},dodgeRate:{name:"é—ªé¿ç‡",min:.05,max:.1}},shoulder:{defense:{name:"é˜²å¾¡",min:5,max:10},health:{name:"ç”Ÿå‘½",min:40,max:80},counterRate:{name:"åå‡»ç‡",min:.05,max:.1}},hands:{attack:{name:"æ”»å‡»",min:5,max:10},critRate:{name:"æš´å‡»ç‡",min:.03,max:.08},comboRate:{name:"è¿å‡»ç‡",min:.05,max:.1}},wrist:{defense:{name:"é˜²å¾¡",min:3,max:8},counterRate:{name:"åå‡»ç‡",min:.05,max:.1},vampireRate:{name:"å¸è¡€ç‡",min:.05,max:.1}},necklace:{health:{name:"ç”Ÿå‘½",min:60,max:120},healBoost:{name:"å¼ºåŒ–æ²»ç–—",min:.1,max:.2},spiritRate:{name:"ç„°çµè·å–",min:.1,max:.2}},ring1:{attack:{name:"æ”»å‡»",min:5,max:10},critDamageBoost:{name:"æš´å‡»ä¼¤å®³",min:.1,max:.2},finalDamageBoost:{name:"æœ€ç»ˆå¢ä¼¤",min:.05,max:.1}},ring2:{defense:{name:"é˜²å¾¡",min:5,max:10},critDamageReduce:{name:"çˆ†ä¼¤å‡å…",min:.1,max:.2},resistanceBoost:{name:"æŠ—æ€§æå‡",min:.05,max:.1}},belt:{health:{name:"ç”Ÿå‘½",min:40,max:80},defense:{name:"é˜²å¾¡",min:4,max:8},combatBoost:{name:"æˆ˜æ–—å±æ€§",min:.05,max:.1}},artifact:{attack:{name:"æ”»å‡»åŠ›",min:.1,max:.3},critRate:{name:"æš´å‡»ç‡",min:.1,max:.3},comboRate:{name:"è¿å‡»ç‡",min:.1,max:.3}}},ha=N(()=>De.value?De.value.filter(e=>"pet"===e.type?!Je.value||e.rarity===Je.value:!Ve.value||e.quality===Ve.value):[]);M([Ve,Je],()=>{Ke.value=1});const ya=N(()=>{const e=(Ke.value-1)*Ae.value;return ha.value.slice(e,e+Ae.value)}),fa=N(()=>Math.ceil(ha.value.length/Ae.value)),ba={equipment:"ğŸ“¦",pet:"ğŸ¥š",all:"ğŸ"},ga=N(()=>Object.entries(Ye).map(([e,a])=>({label:a.name,value:e,style:{color:a.color}}))),wa=N(()=>Object.entries(aa).map(([e,a])=>({label:a.name,value:e,style:{color:a.color}}))),xa=e=>{e.includes("all")?ke.autoSellQualities=["all"]:e.length>0&&(ke.autoSellQualities=e.filter(e=>"all"!==e))},Ra=e=>{e.includes("all")?ke.autoReleaseRarities=["all"]:e.length>0&&(ke.autoReleaseRarities=e.filter(e=>"all"!==e))};return(e,a)=>{const l=u,s=o,M=r,_=d,C=c,N=m,_e=p,Se=v,De=h,Te=n,ze=b,la=f,ta=y,ia=g,ra=w,ca=x,da=R,ma=k,pa=q;return Q(),E("div",K,[a[42]||(a[42]=S("div",{class:"gacha-page-bg"},null,-1)),j(i,null,{default:W(()=>[...a[22]||(a[22]=[S("p",null,[B("ğŸ° æ”¯æŒ"),S("strong",null,"å•æŠ½/10è¿/50è¿/100è¿"),B("ï¼Œæ¯æ¬¡100ç„°æ™¶ï¼ˆå¿ƒæ„¿å•200ï¼‰")],-1),S("p",null,[B("ğŸ“¦ ä¸¤ä¸ªå¡æ± ï¼š"),S("strong",null,"è£…å¤‡æ± "),B("ã€"),S("strong",null,"ç„°å…½æ± ")],-1),S("p",null,"âš”ï¸ è£…å¤‡æ¦‚ç‡ï¼šå‡¡å“50%ã€ä¸‹å“30%ã€ä¸­å“12%ã€ä¸Šå“5%ã€æå“2%ã€ä»™å“1%",-1),S("p",null,[B("ğŸ¾ ç„°å…½æ¦‚ç‡ï¼šå‡¡å“50%ã€çµå“28%ã€ç„å“16%ã€ä»™å“5.8%ã€"),S("strong",null,"ç¥å“0.2%")],-1),S("p",null,"ğŸ’ VIPå¯äº«æŠ½å¡æŠ˜æ‰£ï¼Œæœ€é«˜7æŠ˜",-1),S("p",null,[B("ğŸ¯ å¼€å¯"),S("strong",null,"å¿ƒæ„¿å•"),B("å¯å®šå‘æå‡æŒ‡å®šå“è´¨æ¦‚ç‡ï¼ˆè´¹ç”¨ç¿»å€ï¼‰")],-1),S("p",null,[B("ğŸ¤– å¯è®¾ç½®"),S("strong",null,"è‡ªåŠ¨å‡ºå”®/æ”¾ç”Ÿ"),B("ä½å“è´¨ç‰©å“")],-1)])]),_:1}),j(Te,{bordered:!1,class:"gacha-main-card"},{default:W(()=>[S("div",A,[S("div",V,[S("h2",J,I({equipment:"è£…å¤‡Â·é”»é€ æ± ",pet:"ç„°å…½Â·å¬å”¤æ± "}[Ce.value]),1),S("div",X,[j(s,{value:Ce.value,"onUpdate:value":a[0]||(a[0]=e=>Ce.value=e),name:"gachaType"},{default:W(()=>[j(l,{value:"equipment"},{default:W(()=>[...a[23]||(a[23]=[B("è£…å¤‡æ± ",-1)])]),_:1}),j(l,{value:"pet"},{default:W(()=>[...a[24]||(a[24]=[B("ç„°å…½æ± ",-1)])]),_:1})]),_:1},8,["value"])])]),S("div",H,[a[25]||(a[25]=S("span",{class:"spirit-stones-icon"},"ğŸ’",-1)),j(M,{label:"ç„°æ™¶",value:P(ke).spiritStones},null,8,["value"])]),S("div",Y,[a[26]||(a[26]=S("div",{class:"gacha-item-glow"},null,-1)),S("div",{class:U(["gacha-item",{shake:Qe.value,open:Be.value}])},I(ba[Ce.value]),3)]),S("div",Z,[S("div",ee,[(Q(),E(O,null,D([1,10,50,100],(e,a)=>S("button",{key:a,class:U(["gacha-btn",{"gacha-btn-multi":e>=10,"gacha-btn-mega":e>=50}]),onClick:a=>ua(e),disabled:P(ke).spiritStones<Math.floor((P(ke).wishlistEnabled?200*e:100*e)*(P(Me).isLoggedIn&&Ee[P(Me).vipLevel]||1))||Le.value},[S("span",le,"æŠ½"+I(e)+"æ¬¡",1),S("span",te,"ğŸ’ "+I(Math.floor((P(ke).wishlistEnabled?200*e:100*e)*(P(Me).isLoggedIn&&Ee[P(Me).vipLevel]||1))),1)],10,ae)),64))]),S("div",ie,[j(C,{quaternary:"",circle:"",size:"small",onClick:a[1]||(a[1]=e=>Fe.value=!0)},{icon:W(()=>[j(_,null,{default:W(()=>[j(P(F))]),_:1})]),_:1}),j(C,{quaternary:"",circle:"",size:"small",onClick:a[2]||(a[2]=e=>He.value=!0)},{icon:W(()=>[j(_,null,{default:W(()=>[j(P(L))]),_:1})]),_:1}),j(C,{quaternary:"",circle:"",size:"small",onClick:a[3]||(a[3]=e=>Xe.value=!0)},{icon:W(()=>[j(_,null,{default:W(()=>[j(P($))]),_:1})]),_:1})])]),j(N,{show:Pe.value,"onUpdate:show":a[4]||(a[4]=e=>Pe.value=e),"mask-closable":!1,"close-on-esc":!1,style:{maxWidth:"95vw",width:"600px",background:"transparent",boxShadow:"none"}},{default:W(()=>[S("div",se,[S("div",ne,[(Q(!0),E(O,null,D(Ue.value,(e,l)=>(Q(),E("div",{key:l,class:U(["flip-card",{flipped:e.flipped,["quality-"+e.qualityKey]:e.flipped}]),onClick:e=>(e=>{Ue.value[e].flipped||(Ue.value[e].flipped=!0,t.cardFlip(),["mythic","legendary","epic","divine","celestial"].includes(Ue.value[e].qualityKey)&&setTimeout(()=>t.cardRare(),200),Ue.value.every(e=>e.flipped)&&(Oe.value=!0))})(l)},[S("div",ue,[a[27]||(a[27]=S("div",{class:"flip-card-back"},[S("span",{class:"card-back-icon"},"âœ¦")],-1)),S("div",{class:"flip-card-front",style:T({borderColor:e.color})},[S("div",{class:"card-glow",style:T({background:e.color+"30"})},null,4),S("span",re,I(e.icon),1),S("span",ce,I(e.name),1),S("span",{class:"card-quality",style:T({color:e.color})},I(e.qualityName),5)],4)])],10,oe))),128))]),S("div",de,[Oe.value?(Q(),z(C,{key:1,type:"primary",onClick:Ne},{default:W(()=>[...a[29]||(a[29]=[B("ç¡®è®¤",-1)])]),_:1})):(Q(),z(C,{key:0,type:"warning",onClick:Ge},{default:W(()=>[...a[28]||(a[28]=[B("è·³è¿‡åŠ¨ç”»",-1)])]),_:1}))])])]),_:1},8,["show"]),j(N,{show:Ie.value,"onUpdate:show":a[11]||(a[11]=e=>Ie.value=e),preset:"dialog",title:"æŠ½å¡ç»“æœ",style:{maxWidth:"90vw",width:"800px"}},{default:W(()=>[j(Te,{bordered:!1},{footer:W(()=>[j(_e,{justify:"center"},{default:W(()=>[j(De,{page:Ke.value,"onUpdate:page":a[10]||(a[10]=e=>Ke.value=e),"page-slot":6,"page-count":fa.value,"page-size":Ae.value},null,8,["page","page-count","page-size"])]),_:1})]),default:W(()=>[$e.value?(Q(),E("div",me,[j(_e,{justify:"center",size:24},{default:W(()=>{var e,a,l,t;return[j(M,{label:"æ¶ˆè€—ç„°æ™¶",value:$e.value.cost},null,8,["value"]),(null==(e=$e.value.autoSold)?void 0:e.count)?(Q(),z(M,{key:0,label:"è‡ªåŠ¨å‡ºå”®",value:(null==(a=$e.value.autoSold)?void 0:a.count)||0},null,8,["value"])):G("",!0),(null==(l=$e.value.autoSold)?void 0:l.income)?(Q(),z(M,{key:1,label:"è·å¾—æ·¬ç«çŸ³",value:(null==(t=$e.value.autoSold)?void 0:t.income)||0},null,8,["value"])):G("",!0),$e.value.autoReleased?(Q(),z(M,{key:2,label:"è‡ªåŠ¨æ”¾ç”Ÿ",value:$e.value.autoReleased||0},null,8,["value"])):G("",!0),$e.value.petEssenceGained?(Q(),z(M,{key:3,label:"è·å¾—ç²¾å",value:$e.value.petEssenceGained||0},null,8,["value"])):G("",!0)]}),_:1})])):G("",!0),"all"!==Ce.value?(Q(),E("div",pe,[j(_e,{align:"center",justify:"center",wrap:!0,size:16},{default:W(()=>["equipment"===Ce.value?(Q(),z(Se,{key:0,value:Ve.value,"onUpdate:value":[a[5]||(a[5]=e=>Ve.value=e),a[6]||(a[6]=e=>Ke.value=1)],placeholder:"è£…å¤‡å“è´¨ç­›é€‰",clearable:"",options:ga.value,style:{width:"180px"}},null,8,["value","options"])):G("",!0),"pet"===Ce.value?(Q(),z(Se,{key:1,value:Je.value,"onUpdate:value":[a[7]||(a[7]=e=>Je.value=e),a[8]||(a[8]=e=>Ke.value=1)],placeholder:"ç„°å…½å“è´¨ç­›é€‰",clearable:"",options:wa.value,style:{width:"180px"}},null,8,["value","options"])):G("",!0)]),_:1})])):G("",!0),j(_e,{justify:"center"},{default:W(()=>[S("button",{class:"gacha-btn gacha-btn-multi",onClick:a[9]||(a[9]=e=>ua(oa.value)),disabled:P(ke).spiritStones<Math.floor((P(ke).wishlistEnabled?200*oa.value:100*oa.value)*(P(Me).isLoggedIn&&Ee[P(Me).vipLevel]||1))||Le.value},[S("span",he,"å†æŠ½"+I(oa.value)+"æ¬¡",1),S("span",ye,"ğŸ’ "+I(Math.floor((P(ke).wishlistEnabled?200*oa.value:100*oa.value)*(P(Me).isLoggedIn&&Ee[P(Me).vipLevel]||1))),1)],8,ve)]),_:1}),S("div",fe,[(Q(!0),E(O,null,D(ya.value,e=>{var a,l,t,i,s;return Q(),E("div",{key:e.id,class:U(["result-item","result-quality-"+(e.quality||e.rarity||"common"),{"wish-bonus":P(ke).wishlistEnabled&&(e.qualityInfo&&P(ke).selectedWishEquipQuality===e.quality||"pet"===e.type&&P(ke).selectedWishPetRarity===e.rarity)}]),style:T({borderColor:e.qualityInfo?e.qualityInfo.color:(null==(a=aa[e.rarity])?void 0:a.color)||"#CCCCCC"})},[S("div",{class:"result-item-glow",style:T({background:(e.qualityInfo?e.qualityInfo.color:(null==(l=aa[e.rarity])?void 0:l.color)||"#ccc")+"15"})},null,4),S("h4",null,I(e.name),1),S("p",{class:"result-quality-text",style:T({color:e.qualityInfo?e.qualityInfo.color:(null==(t=aa[e.rarity])?void 0:t.color)||"#ccc"})}," å“è´¨ï¼š"+I(e.qualityInfo?e.qualityInfo.name:(null==(i=aa[e.rarity])?void 0:i.name)||"æœªçŸ¥"),5),ea.includes(e.type)?(Q(),E("p",be,"ç±»å‹ï¼š"+I((null==(s=Ze[e.equipType])?void 0:s.name)||e.type),1)):"pet"===e.type?(Q(),E("p",ge,I(e.description||"æš‚æ— æè¿°"),1)):G("",!0)],6)}),128))])]),_:1})]),_:1},8,["show"]),j(N,{show:Fe.value,"onUpdate:show":a[13]||(a[13]=e=>Fe.value=e),preset:"dialog",title:"æŠ½å¡æ¦‚ç‡è¯´æ˜"},{default:W(()=>[j(ta,{type:"segment",animated:"",value:We.value,"onUpdate:value":a[12]||(a[12]=e=>We.value=e)},{default:W(()=>[j(la,{name:"equipment",tab:"è£…å¤‡æ± "},{default:W(()=>[j(Te,{class:"prob-card"},{default:W(()=>{var e;return[S("div",we,[(Q(!0),E(O,null,D((null==(e=je.value)?void 0:e.equipment)||sa(),(e,a)=>(Q(),E("div",{key:a,class:"prob-item"},[S("div",xe,[S("span",{style:T({color:Ye[a].color})},I(Ye[a].name),5)]),j(ze,{type:"line",percentage:100*e,"indicator-placement":"inside",color:Ye[a].color,height:20,"border-radius":4,class:U({"wish-bonus":P(ke).wishlistEnabled&&P(ke).selectedWishEquipQuality===a}),"show-indicator":!0},{indicator:W(()=>[B(I((100*e).toFixed(1))+"%",1)]),_:2},1032,["percentage","color","class"])]))),128))])]}),_:1})]),_:1}),j(la,{name:"pet",tab:"ç„°å…½æ± "},{default:W(()=>[j(Te,{class:"prob-card"},{default:W(()=>{var e;return[S("div",Re,[(Q(!0),E(O,null,D((null==(e=je.value)?void 0:e.pet)||na(),(e,a)=>(Q(),E("div",{key:a,class:"prob-item"},[S("div",qe,[S("span",{style:T({color:aa[a].color})},I(aa[a].name),5)]),j(ze,{type:"line",percentage:100*e,"indicator-placement":"inside",class:U({"wish-bonus":P(ke).wishlistEnabled&&P(ke).selectedWishPetRarity===a}),color:aa[a].color,height:20,"border-radius":4,"show-indicator":!0},{indicator:W(()=>[B(I((100*e).toFixed(1))+"%",1)]),_:2},1032,["percentage","class","color"])]))),128))])]}),_:1})]),_:1})]),_:1},8,["value"])]),_:1},8,["show"]),j(N,{show:He.value,"onUpdate:show":a[17]||(a[17]=e=>He.value=e),preset:"dialog",title:"å¿ƒæ„¿å•è®¾ç½®",style:{"max-width":"800px",width:"90vw"}},{default:W(()=>[j(Te,{bordered:!1},{default:W(()=>[j(_e,{vertical:""},{default:W(()=>[j(ia,{value:P(ke).wishlistEnabled,"onUpdate:value":a[14]||(a[14]=e=>P(ke).wishlistEnabled=e)},{checked:W(()=>[...a[30]||(a[30]=[B("å¿ƒæ„¿å•å·²å¯ç”¨",-1)])]),unchecked:W(()=>[...a[31]||(a[31]=[B("å¿ƒæ„¿å•å·²ç¦ç”¨",-1)])]),_:1},8,["value"]),j(ra,null,{default:W(()=>[...a[32]||(a[32]=[B("è£…å¤‡å“è´¨å¿ƒæ„¿",-1)])]),_:1}),j(Se,{value:P(ke).selectedWishEquipQuality,"onUpdate:value":a[15]||(a[15]=e=>P(ke).selectedWishEquipQuality=e),options:ga.value,clearable:"",placeholder:"é€‰æ‹©è£…å¤‡å“è´¨",disabled:!P(ke).wishlistEnabled},{option:W(({option:e})=>[S("span",{style:T({color:Ye[e.value].color})},[B(I(Ye[e.value].name)+" ",1),e.value===P(ke).selectedWishEquipQuality?(Q(),z(ca,{key:0,type:"success",size:"small"},{default:W(()=>[...a[33]||(a[33]=[B("å·²é€‰æ‹©",-1)])]),_:1})):G("",!0)],4)]),_:1},8,["value","options","disabled"]),j(ra,null,{default:W(()=>[...a[34]||(a[34]=[B("ç„°å…½å“è´¨å¿ƒæ„¿",-1)])]),_:1}),j(Se,{value:P(ke).selectedWishPetRarity,"onUpdate:value":a[16]||(a[16]=e=>P(ke).selectedWishPetRarity=e),options:wa.value,clearable:"",placeholder:"é€‰æ‹©ç„°å…½å“è´¨",disabled:!P(ke).wishlistEnabled},{option:W(({option:e})=>[S("span",{style:T({color:aa[e.value].color})},[B(I(aa[e.value].name)+" ",1),e.value===P(ke).selectedWishPetRarity?(Q(),z(ca,{key:0,type:"success",size:"small"},{default:W(()=>[...a[35]||(a[35]=[B("å·²é€‰æ‹©",-1)])]),_:1})):G("",!0)],4)]),_:1},8,["value","options","disabled"]),j(da,{type:"info",title:"å¿ƒæ„¿å•è¯´æ˜"},{default:W(()=>[...a[36]||(a[36]=[B(" å¯ç”¨å¿ƒæ„¿å•åï¼Œæ‰€éœ€ç„°æ™¶ä¼šç¿»å€, é€‰ä¸­çš„å“è´¨å°†æ ¹æ®å…¶åŸºç¡€æ¦‚ç‡è·å¾—ä¸åŒç¨‹åº¦çš„æ¦‚ç‡æå‡ï¼ˆåŸºç¡€æ¦‚ç‡è¶Šä½ï¼Œæå‡è¶Šé«˜ï¼‰ã€‚æ¯æ¬¡åªèƒ½é€‰æ‹©ä¸€ä¸ªè£…å¤‡å“è´¨å’Œä¸€ä¸ªç„°å…½å“è´¨ä½œä¸ºå¿ƒæ„¿ã€‚ ",-1)])]),_:1})]),_:1})]),_:1})]),_:1},8,["show"]),j(N,{show:Xe.value,"onUpdate:show":a[21]||(a[21]=e=>Xe.value=e),preset:"dialog",title:"è‡ªåŠ¨å¤„ç†è®¾ç½®",style:{"max-width":"800px",width:"90vw"}},{footer:W(()=>[j(_e,{justify:"end"},{default:W(()=>[j(C,{onClick:a[20]||(a[20]=e=>Xe.value=!1)},{default:W(()=>[...a[41]||(a[41]=[B("å…³é—­",-1)])]),_:1})]),_:1})]),default:W(()=>[j(Te,{bordered:!1},{default:W(()=>[j(_e,{vertical:""},{default:W(()=>[j(ra,null,{default:W(()=>[...a[37]||(a[37]=[B("è£…å¤‡è‡ªåŠ¨å‡ºå”®",-1)])]),_:1}),j(pa,{value:P(ke).autoSellQualities,"onUpdate:value":[a[18]||(a[18]=e=>P(ke).autoSellQualities=e),xa]},{default:W(()=>[j(_e,{wrap:""},{default:W(()=>{var e;return[j(ma,{value:"all",disabled:!!(null==(e=P(ke).autoSellQualities)?void 0:e.length)&&!P(ke).autoSellQualities.includes("all")},{default:W(()=>[...a[38]||(a[38]=[B("å…¨éƒ¨å“é˜¶",-1)])]),_:1},8,["disabled"]),(Q(),E(O,null,D(Ye,(e,a)=>{var l;return j(ma,{key:a,value:a,disabled:null==(l=P(ke).autoSellQualities)?void 0:l.includes("all")},{default:W(()=>[S("span",{style:T({color:e.color})},I(e.name),5)]),_:2},1032,["value","disabled"])}),64))]}),_:1})]),_:1},8,["value"]),j(ra,null,{default:W(()=>[...a[39]||(a[39]=[B("ç„°å…½è‡ªåŠ¨æ”¾ç”Ÿ",-1)])]),_:1}),j(pa,{value:P(ke).autoReleaseRarities,"onUpdate:value":[a[19]||(a[19]=e=>P(ke).autoReleaseRarities=e),Ra]},{default:W(()=>[j(_e,{wrap:""},{default:W(()=>{var e;return[j(ma,{value:"all",disabled:!!(null==(e=P(ke).autoReleaseRarities)?void 0:e.length)&&!P(ke).autoReleaseRarities.includes("all")},{default:W(()=>[...a[40]||(a[40]=[B("å…¨éƒ¨å“è´¨",-1)])]),_:1},8,["disabled"]),(Q(),E(O,null,D(aa,(e,a)=>{var l;return j(ma,{key:a,value:a,disabled:null==(l=P(ke).autoReleaseRarities)?void 0:l.includes("all")},{default:W(()=>[S("span",{style:T({color:e.color})},I(e.name),5)]),_:2},1032,["value","disabled"])}),64))]}),_:1})]),_:1},8,["value"])]),_:1})]),_:1})]),_:1},8,["show"])])]),_:1})])}}},[["__scopeId","data-v-e09e7ed9"]]);export{ke as default};

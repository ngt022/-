import{_ as e,u as l,a,d as t,e as s,p as u,c as r}from"./index-C_Usn6qf.js";import{a as i}from"./herbs-Cu1BpqBJ.js";import{L as n}from"./LogPanel-C7MfT2ys.js";import{G as d}from"./GameGuide-Dc_uhL03.js";import{j as o,k as f,m as c,D as v,E as m,H as p,t as b,B as h,v as _,q as y,P as g,Q as k,n as w,o as L}from"./naive-ui-CtewNtT3.js";import{bn as j,bE as x,bf as R,bF as C,bh as F,k as $,bg as z,F as E,bk as I,bi as P,aW as q,b1 as A,bj as G,q as B,r as H}from"./vendor-CBGg7cPT.js";const M={class:"recipe-materials"},O={class:"recipe-effect"},S=e({__name:"Alchemy",setup(e){const S=l(),T=a(),D=H(null),Q=H(null),U=H(!1),W=B(()=>u.filter(e=>S.pillRecipes.includes(e.id))),J=()=>{U.value=!1,Q.value=null},K=e=>!!e&&e.materials.every(e=>S.herbs.filter(l=>l.herbId===e.herb||l.herb_id===e.herb||l.id===e.herb).length>=e.count),N=e=>{const l=i.find(l=>l.id===e);return l?l.name:e},V=e=>S.herbs.filter(l=>l.herbId===e||l.herb_id===e||l.id===e).length,X=e=>{const l=e.baseEffect;return`${{spiritRate:"ç„°çµæ¢å¤",cultivationRate:"ç„°ä¿®é€Ÿåº¦",combatBoost:"æˆ˜æ–—å±æ€§",allAttributes:"å…¨å±æ€§",spiritCap:"ç„°çµä¸Šé™",autoHeal:"è‡ªåŠ¨å›è¡€",spiritRecovery:"ç„°çµæ¢å¤",cultivationEfficiency:"ç„°ä¿®æ•ˆç‡",comprehension:"æ‚Ÿæ€§",fireAttribute:"ç«å±æ€§ç„°ä¿®"}[l.type]||l.type}+${(100*l.value).toFixed(0)}ï¼…ï¼ŒæŒç»­${Math.floor(l.duration/60)}åˆ†é’Ÿ`},Y=B(()=>Q.value?r(Q.value,S.level):null),Z=async()=>{var e,l,a,t;if(!Q.value)return;const s=document.querySelector(".craft-confirm-btn");if(T.isLoggedIn){const a=await S.craftPillOnServer(Q.value.id);a.success?(null==(e=D.value)||e.addLog("success",a.message||"ç‚¼åˆ¶æˆåŠŸï¼"),U.value=!1,Q.value=null):(null==(l=D.value)||l.addLog("error",`ç‚¼åˆ¶å¤±è´¥ï¼š${a.message}`),s&&(s.classList.add("fail-animation"),setTimeout(()=>s.classList.remove("fail-animation"),1e3)))}else{const e=S.craftPillOffline(Q.value.id);e.success?(null==(a=D.value)||a.addLog("success","ç‚¼åˆ¶æˆåŠŸï¼"),U.value=!1,Q.value=null):(null==(t=D.value)||t.addLog("error",`ç‚¼åˆ¶å¤±è´¥ï¼š${e.message}`),s&&(s.classList.add("fail-animation"),setTimeout(()=>s.classList.remove("fail-animation"),1e3)))}};return(e,l)=>{const a=c,u=p,r=b,i=f,B=h,H=o,T=m,ee=v,le=_,ae=k,te=g,se=L,ue=w,re=y;return R(),j(H,null,{default:x(()=>[C(i,{vertical:""},{default:x(()=>[C(d,null,{default:x(()=>[...l[1]||(l[1]=[F("p",null,[$("ğŸ§ª æ”¶é›†"),F("strong",null,"ä¸¹æ–¹æ®‹é¡µ"),$("â†’å‡‘é½åè‡ªåŠ¨è§£é”é…æ–¹")],-1),F("p",null,"ğŸŒ¿ ç”¨ç„°è‰æŒ‰é…æ–¹ç‚¼ä¸¹ï¼Œå…±12ç§ä¸¹æ–¹ï¼ˆä¸€å“â†’å…«å“ï¼‰",-1),F("p",null,[$("ğŸ² æˆåŠŸç‡å—å“é˜¶å½±å“ï¼šä¸€å“90%â†’å…«å“20%ï¼Œ"),F("strong",null,"å¹¸è¿å€¼å’Œç„°ç‚¼åŠ æˆ"),$("å¯æå‡")],-1),F("p",null,"ğŸ’Š æœç”¨ç„°ä¸¹è·å¾—ä¸´æ—¶buffï¼Œæ•ˆæœéšå¢ƒç•Œæå‡ï¼ˆæ¯çº§+10%ï¼‰",-1),F("p",null,[$("ğŸ“ ä¸¹æ–¹æ®‹é¡µå’Œç„°è‰ä¸»è¦é€šè¿‡"),F("strong",null,"æ¢ç´¢"),$("è·å¾—")],-1),F("p",null,"â­ é«˜å“ä¸¹æ•ˆæœå¼ºåŠ›ï¼šå¤©å…ƒä¸¹ç„°ä¿®+100%ã€æ¶…æ§ƒä¸¹è‡ªåŠ¨å›è¡€10%",-1)])]),_:1}),W.value.length>0?(R(),z(E,{key:0},[C(a,null,{default:x(()=>[...l[2]||(l[2]=[$("ç„°æ–¹é€‰æ‹©",-1)])]),_:1}),C(ee,{cols:2,"x-gap":12,responsive:"screen","collapsed-rows":99},{default:x(()=>[(R(!0),z(E,null,I(W.value,e=>(R(),j(T,{key:e.id},{default:x(()=>[C(H,{title:e.name,size:"small",style:{"margin-bottom":"8px"}},{default:x(()=>[C(i,{vertical:""},{default:x(()=>[C(u,{depth:"3"},{default:x(()=>[$(P(e.description),1)]),_:2},1024),F("div",M,[(R(!0),z(E,null,I(e.materials,e=>(R(),z("span",{key:e.herb,class:q(["mat-tag",{"mat-enough":V(e.herb)>=e.count,"mat-lack":V(e.herb)<e.count}])},P(N(e.herb))+" "+P(V(e.herb))+"/"+P(e.count),3))),128))]),F("div",O,P(X(e)),1),C(i,null,{default:x(()=>[C(r,{type:"info"},{default:x(()=>[$(P(A(t)[e.grade].name),1)]),_:2},1024),C(r,{type:"warning"},{default:x(()=>[$(P(A(s)[e.type].name),1)]),_:2},1024)]),_:2},1024),C(B,{onClick:l=>(e=>{Q.value=e,U.value=!0})(e),block:"",type:"primary"},{default:x(()=>[...l[3]||(l[3]=[$(" ç‚¹å‡»ç‚¼åˆ¶ ",-1)])]),_:1},8,["onClick"])]),_:2},1024)]),_:2},1032,["title"])]),_:2},1024))),128))]),_:1})],64)):(R(),j(i,{key:1,vertical:""},{default:x(()=>[C(le,{description:"æš‚æœªæŒæ¡ä»»ä½•ç„°æ–¹"})]),_:1})),C(re,{show:U.value,"onUpdate:show":l[0]||(l[0]=e=>U.value=e),preset:"card",title:Q.value?"ç¡®è®¤ç‚¼åˆ¶ï¼š"+Q.value.name:"ç‚¼ä¸¹",style:{width:"90%","max-width":"500px"},closable:!1,"mask-closable":!1},{default:x(()=>[Q.value?(R(),j(i,{key:0,vertical:""},{default:x(()=>[C(u,{depth:"3"},{default:x(()=>[$(P(Q.value.description),1)]),_:1}),C(i,null,{default:x(()=>[C(r,{type:"info"},{default:x(()=>[$(P(A(t)[Q.value.grade].name),1)]),_:1}),C(r,{type:"warning"},{default:x(()=>[$(P(A(s)[Q.value.type].name),1)]),_:1})]),_:1}),C(a,null,{default:x(()=>[...l[4]||(l[4]=[$("æ‰€éœ€ææ–™",-1)])]),_:1}),C(te,null,{default:x(()=>[(R(!0),z(E,null,I(Q.value.materials,e=>(R(),j(ae,{key:e.herb},{default:x(()=>[C(i,{justify:"space-between",style:{width:"100%"}},{default:x(()=>[C(i,null,{default:x(()=>[F("span",null,P(N(e.herb)),1),C(r,{size:"small",type:"info"},{default:x(()=>[$("éœ€"+P(e.count)+"ä¸ª",1)]),_:2},1024)]),_:2},1024),C(r,{type:A(S).herbs.filter(l=>l.herb_id===e.herb||l.id===e.herb).length>=e.count?"success":"error",size:"small"},{default:x(()=>[$(" æœ‰"+P(A(S).herbs.filter(l=>l.herb_id===e.herb||l.id===e.herb).length)+"ä¸ª ",1)]),_:2},1032,["type"])]),_:2},1024)]),_:2},1024))),128))]),_:1}),C(a,null,{default:x(()=>[...l[5]||(l[5]=[$("æ•ˆæœé¢„è§ˆ",-1)])]),_:1}),C(ue,{bordered:"",column:1,size:"small"},{default:x(()=>[C(se,{label:"æ•ˆæœæ•°å€¼"},{default:x(()=>{var e;return[$("+"+P((100*((null==(e=Y.value)?void 0:e.value)||0)).toFixed(1))+"%",1)]}),_:1}),C(se,{label:"æŒç»­æ—¶é—´"},{default:x(()=>{var e;return[$(P(Math.floor(((null==(e=Y.value)?void 0:e.duration)||0)/60))+"åˆ†é’Ÿ",1)]}),_:1}),C(se,{label:"æˆåŠŸç‡"},{default:x(()=>{var e;return[$(P((100*((null==(e=Y.value)?void 0:e.successRate)||.5)).toFixed(1))+"%",1)]}),_:1})]),_:1}),C(i,{justify:"end",style:{width:"100%","margin-top":"16px"}},{default:x(()=>[C(B,{onClick:J},{default:x(()=>[...l[6]||(l[6]=[$("å–æ¶ˆ",-1)])]),_:1}),C(B,{class:"craft-confirm-btn",type:"primary",disabled:!K(Q.value),onClick:Z},{default:x(()=>[$(P(K(Q.value)?"ç¡®è®¤ç‚¼åˆ¶":"ææ–™ä¸è¶³"),1)]),_:1},8,["disabled"])]),_:1})]),_:1})):G("",!0)]),_:1},8,["show","title"]),C(n,{ref_key:"logRef",ref:D,title:"ç„°ç‚¼æ—¥å¿—"},null,512)]),_:1})]),_:1})}}},[["__scopeId","data-v-2ad209b1"]]);export{S as default};

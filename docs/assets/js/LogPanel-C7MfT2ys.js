import{_ as e}from"./index-C_Usn6qf.js";import{m as a,k as t,B as s,S as l,t as o,A as r,v as n,j as u}from"./naive-ui-CtewNtT3.js";import{o as p,aC as i,w as d,bf as m,bg as y,bF as v,bE as g,k as c,bi as f,F as _,bk as b,bh as h,bn as L,b7 as k,r as j}from"./vendor-CBGg7cPT.js";const x={key:0,class:"log-container"},A={class:"log-content"},T=e({__name:"LogPanel",props:{title:{type:String,default:"系统日志"},messages:{type:Array,default:()=>[]}},setup(e,{expose:T}){const U=j([]),w=j(null),C=j(null);p(()=>{C.value=new Worker(new URL(""+new URL("../log-ZuC5WUUO.js",import.meta.url).href,import.meta.url)),C.value.onmessage=e=>{"LOGS_UPDATED"===e.data.type&&(U.value=e.data.logs,setTimeout(()=>{w.value&&w.value.scrollTo({top:99999,behavior:"smooth"})}))}}),i(()=>{C.value&&C.value.terminate()});const D=()=>{C.value&&C.value.postMessage({type:"CLEAR_LOGS"})};return d(()=>U.value.length,()=>{setTimeout(()=>{w.value&&w.value.scrollTo({top:99999,behavior:"smooth"})})}),T({addLog:(e,a)=>{C.value&&C.value.postMessage({type:"ADD_LOG",data:{type:e,content:a}})},clearLogs:D}),(p,i)=>{const d=a,j=s,T=t,C=o,O=r,R=n,S=l,E=u;return m(),y(_,null,[v(d,null,{default:g(()=>[c(f(e.title),1)]),_:1}),v(E,{class:"log-panel",style:k(p.$attrs.style)},{default:g(()=>[v(T,{justify:"end",style:{"margin-bottom":"8px"}},{default:g(()=>[v(j,{size:"small",onClick:D,type:"error",secondary:""},{default:g(()=>[...i[0]||(i[0]=[c("清空日志",-1)])]),_:1})]),_:1}),v(S,{ref_key:"scrollRef",ref:w,trigger:"none",style:{"max-height":"200px"}},{default:g(()=>[U.value.length?(m(),y("div",x,[(m(!0),y(_,null,b(U.value,(e,a)=>(m(),y("div",{key:a,class:"log-item"},[v(C,{type:e.type,size:"small",class:"log-type"},{default:g(()=>[c(f(e.time),1)]),_:2},1032,["type"]),h("span",A,[v(O,{type:e.type},{default:g(()=>[c(f(e.content),1)]),_:2},1032,["type"])])]))),128))])):(m(),L(R,{key:1,description:"暂无日志"}))]),_:1},512)]),_:1},8,["style"])],64)}}},[["__scopeId","data-v-d18dbda8"]]);export{T as L};

import{o as e,bg as a,bh as l,bF as s,bE as t,F as i,bk as n,bi as u,b7 as r,aW as o,bn as c,bj as d,k as p,q as v,r as m,bf as g,b1 as f,bK as _}from"./vendor-CBGg7cPT.js";import{_ as b,u as y,a as h,p as k}from"./index-C_Usn6qf.js";import{G as q}from"./GameGuide-Dc_uhL03.js";import{u as w,B as x,p as R,k as A,q as j,r as F,s as S,t as C,v as L,w as B,n as z,o as D,m as P,x as E,y as M,z as O,A as I,C as $}from"./naive-ui-CtewNtT3.js";const U={health:"ç”Ÿå‘½å€¼",maxHealth:"ç”Ÿå‘½ä¸Šé™",attack:"æ”»å‡»åŠ›",defense:"é˜²å¾¡åŠ›",speed:"é€Ÿåº¦",critRate:"æš´å‡»ç‡",comboRate:"è¿å‡»ç‡",counterRate:"åå‡»ç‡",stunRate:"çœ©æ™•ç‡",dodgeRate:"é—ªé¿ç‡",vampireRate:"å¸è¡€ç‡",critResist:"æŠ—æš´å‡»",comboResist:"æŠ—è¿å‡»",counterResist:"æŠ—åå‡»",stunResist:"æŠ—çœ©æ™•",dodgeResist:"æŠ—é—ªé¿",vampireResist:"æŠ—å¸è¡€",healBoost:"å¼ºåŒ–æ²»ç–—",critDamageBoost:"å¼ºåŒ–çˆ†ä¼¤",critDamageReduce:"å¼±åŒ–çˆ†ä¼¤",finalDamageBoost:"æœ€ç»ˆå¢ä¼¤",finalDamageReduce:"æœ€ç»ˆå‡ä¼¤",combatBoost:"æˆ˜æ–—å±æ€§æå‡",resistanceBoost:"æˆ˜æ–—æŠ—æ€§æå‡",cultivationRate:"ä¿®ç‚¼é€Ÿç‡",spiritRate:"ç„°çµè·å–",luck:"ç¦ç¼˜"},N=e=>U[e]||e,G=(e,a)=>{if(null==a)return"0";return["critRate","comboRate","counterRate","stunRate","dodgeRate","vampireRate","critResist","comboResist","counterResist","stunResist","dodgeResist","vampireResist","healBoost","critDamageBoost","critDamageReduce","finalDamageBoost","finalDamageReduce","combatBoost","resistanceBoost","cultivationRate","spiritRate","luck"].includes(e)?`${(100*a).toFixed(1)}%`:a.toFixed(1)},H=100,T=1,J=10,K=.1,W=10,Q=.3,V={weapon:["attack","critRate","critDamageBoost"],head:["defense","health","stunResist"],body:["defense","health","finalDamageReduce"],legs:["defense","speed","dodgeRate"],feet:["defense","speed","dodgeRate"],shoulder:["defense","health","counterRate"],hands:["attack","critRate","comboRate"],wrist:["defense","counterRate","vampireRate"],necklace:["health","healBoost","spiritRate"],ring1:["attack","critDamageBoost","finalDamageBoost"],ring2:["defense","critDamageReduce","resistanceBoost"],belt:["health","defense","combatBoost"],artifact:["attack","critRate","comboRate"]};const X={class:"storage-container"},Y={class:"storage-header"},Z={class:"storage-actions"},ee={class:"equip-bar"},ae={class:"equip-bar-grid"},le=["onClick"],se=["src","onError"],te={class:"eq-slot-name"},ie={key:2,class:"eq-enhance"},ne={class:"filter-tabs"},ue=["onClick"],re={key:0,class:"capacity-bar"},oe={class:"capacity-text"},ce={class:"capacity-track"},de={key:1,class:"capacity-max"},pe={key:1,class:"storage-grid"},ve=["onClick"],me={class:"cell-icon-area"},ge=["src","onError"],fe={key:1,class:"cell-emoji"},_e={class:"cell-label"},be={key:0,class:"cell-count"},ye={key:1,class:"cell-use-hint"},he={key:2,class:"formula-section"},ke={key:0,class:"storage-grid"},qe={class:"cell-icon-area"},we=["src"],xe={key:1,class:"cell-emoji"},Re={class:"cell-label"},Ae={key:0,class:"storage-grid"},je={class:"cell-icon-area"},Fe=["src"],Se={key:1,class:"cell-emoji"},Ce={class:"cell-label"},Le={key:3,class:"pet-section"},Be={class:"equip-bar-label",style:{"margin-top":"16px"}},ze={key:1,class:"storage-grid"},De=["onClick"],Pe=["src"],Ee={key:1,class:"cell-emoji"},Me={class:"cell-label"},Oe={class:"pet-stars-mini"},Ie={key:2,class:"cell-count",style:{background:"#FFD700",color:"#000"}},$e={key:0,class:"pet-detail-header"},Ue=["src"],Ne={key:1,class:"storage-grid"},Ge=["onClick"],He={class:"cell-emoji"},Te={class:"cell-label"},Je={key:0,class:"eq-enhance",style:{position:"static"}},Ke={class:"cell-meta"},We={class:"eq-enhance",style:{position:"static"}},Qe={key:0,class:"stats-comparison"},Ve={key:0,class:"reforge-compare"},Xe={class:"old-stats"},Ye={class:"new-stats"},Ze=b({__name:"Inventory",setup(b){const U={spirit_grass:"çµç²¾è‰",cloud_flower:"äº‘é›¾èŠ±",thunder_root:"é›·å‡»æ ¹",dragon_breath_herb:"é¾™æ¯è‰",immortal_jade_grass:"ä»™ç‰è‰",dark_yin_grass:"ç„é˜´è‰",nine_leaf_lingzhi:"ä¹å¶çµèŠ",purple_ginseng:"ç´«é‡‘å‚",frost_lotus:"å¯’éœœè²",fire_heart_flower:"ç«å¿ƒèŠ±",moonlight_orchid:"æœˆåå…°",sun_essence_flower:"æ—¥ç²¾èŠ±",five_elements_grass:"äº”è¡Œè‰",phoenix_feather_herb:"å‡¤ç¾½è‰",celestial_dew_grass:"å¤©éœ²è‰"},Ze={spirit_grass:"/assets/images/herbs/herb_spirit_grass.png",cloud_flower:"/assets/images/herbs/herb_cloud_flower.png",thunder_root:"/assets/images/herbs/herb_thunder_root.png",dragon_breath_herb:"/assets/images/herbs/herb_dragon_breath.png",immortal_jade_grass:"/assets/images/herbs/herb_immortal_jade.png",dark_yin_grass:"/assets/images/herbs/herb_dark_yin.png",nine_leaf_lingzhi:"/assets/images/herbs/herb_nine_lingzhi.png",purple_ginseng:"/assets/images/herbs/herb_purple_ginseng.png",frost_lotus:"/assets/images/herbs/herb_frost_lotus.png",fire_heart_flower:"/assets/images/herbs/herb_fire_heart.png",moonlight_orchid:"/assets/images/herbs/herb_moonlight_orchid.png",sun_essence_flower:"/assets/images/herbs/herb_sun_essence.png",five_elements_grass:"/assets/images/herbs/herb_five_elements.png",phoenix_feather_herb:"/assets/images/herbs/herb_phoenix_feather.png",celestial_dew_grass:"/assets/images/herbs/herb_celestial_dew.png"},ea={"æœ±é›€":"/assets/images/pets/pet_firebird.png","é’é¾™":"/assets/images/pets/pet_firedragon.png","éº’éºŸ":"/assets/images/pets/pet_firequilin.png","ç™½è™":"/assets/images/pets/pet_firetiger.png","ç„æ­¦":"/assets/images/pets/pet_fireturtle.png","åº”é¾™":"/assets/images/pets/pet_yinglong.png","é¥•é¤®":"/assets/images/pets/pet_taotie.png","ç©·å¥‡":"/assets/images/pets/pet_qiongqi.png","æ¢¼æŒ":"/assets/images/pets/pet_taowu.png","æ··æ²Œ":"/assets/images/pets/pet_hundun.png","å›šç‰›":"/assets/images/pets/pet_qiuniu.png","çšçœ¦":"/assets/images/pets/pet_yazi.png","å˜²é£":"/assets/images/pets/pet_chaofeng.png","è’²ç‰¢":"/assets/images/pets/pet_pulao.png","ç‹»çŠ´":"/assets/images/pets/pet_suanni.png","éœ¸ä¸‹":"/assets/images/pets/pet_baxia.png","ç‹´çŠ´":"/assets/images/pets/pet_bian.png","è´Ÿå±ƒ":"/assets/images/pets/pet_fuxi.png","è­å»":"/assets/images/pets/pet_firelizard.png","ç«å‡¤å‡°":"/assets/images/pets/pet_firephoenix.png","é›·é¹°":"/assets/images/pets/pet_thundereagle.png","å†°ç‹¼":"/assets/images/pets/pet_icewolf.png","å²©é¾Ÿ":"/assets/images/pets/pet_rockturtle.png","ç„é¾Ÿ":"/assets/images/pets/pet_darkturtle.png","é£éš¼":"/assets/images/pets/pet_windfalcon.png","åœ°ç”²":"/assets/images/pets/pet_eartharmor.png","äº‘è±¹":"/assets/images/pets/pet_cloudleopard.png","çµçŒ«":"/assets/images/pets/pet_firefox.png","å¹»è¶":"/assets/images/pets/pet_huandie.png","ç«é¼ ":"/assets/images/pets/pet_huoshu.png","è‰å…”":"/assets/images/pets/pet_caotu.png"},aa=e=>ea[e]||null,la={"èšçµä¸¹":"/assets/images/pills/pill_juling.png","èšæ°”ä¸¹":"/assets/images/pills/pill_juqi.png","é›·çµä¸¹":"/assets/images/pills/pill_leiling.png","ä»™çµä¸¹":"/assets/images/pills/pill_xianling.png","äº”è¡Œä¸¹":"/assets/images/pills/pill_wuxing.png","å¤©å…ƒä¸¹":"/assets/images/pills/pill_tianyuan.png","æ—¥æœˆä¸¹":"/assets/images/pills/pill_riyue.png","æ¶…æ§ƒä¸¹":"/assets/images/pills/pill_niepan.png","å›çµä¸¹":"/assets/images/pills/pill_huiling.png","å‡å…ƒä¸¹":"/assets/images/pills/pill_ningyuan.png","æ¸…å¿ƒä¸¹":"/assets/images/pills/pill_qingxin.png","ç«å…ƒä¸¹":"/assets/images/pills/pill_huoyuan.png"},sa={"èšçµä¸¹æ–¹":"/assets/images/formulas/formula_juling.png","èšæ°”ä¸¹æ–¹":"/assets/images/formulas/formula_juqi.png","é›·çµä¸¹æ–¹":"/assets/images/formulas/formula_leiling.png","ä»™çµä¸¹æ–¹":"/assets/images/formulas/formula_xianling.png","äº”è¡Œä¸¹æ–¹":"/assets/images/formulas/formula_wuxing.png","å¤©å…ƒä¸¹æ–¹":"/assets/images/formulas/formula_tianyuan.png","æ—¥æœˆä¸¹æ–¹":"/assets/images/formulas/formula_riyue.png","æ¶…æ§ƒä¸¹æ–¹":"/assets/images/formulas/formula_niepan.png","å›çµä¸¹æ–¹":"/assets/images/formulas/formula_huiling.png","å‡å…ƒä¸¹æ–¹":"/assets/images/formulas/formula_ningyuan.png","æ¸…å¿ƒä¸¹æ–¹":"/assets/images/formulas/formula_qingxin.png","ç«å…ƒä¸¹æ–¹":"/assets/images/formulas/formula_huoyuan.png"},ta=e=>sa[e]||null,ia=y(),na=h(),ua=w();e(async()=>{na.isLoggedIn&&(await ia.loadEquipmentFromServer(),await ia.loadPetsFromServer(),await ia.loadHerbsFromServer(),await ia.loadPillsFromServer())});const ra={equip:{base:100,perLevel:20,maxLevel:10,basePrice:5e3},herb:{base:200,perLevel:50,maxLevel:8,basePrice:3e3},pill:{base:50,perLevel:10,maxLevel:10,basePrice:4e3},pet:{base:30,perLevel:5,maxLevel:10,basePrice:8e3},formula:{base:50,perLevel:10,maxLevel:5,basePrice:6e3}},oa=v(()=>ia.storageExpand||{}),ca=e=>{const a=ra[e];if(!a)return 0;const l=oa.value[e]||0;return a.base+a.perLevel*l},da=e=>{const a=ra[e];if(!a)return 0;const l=oa.value[e]||0;return a.basePrice*(l+1)},pa=e=>{const a=ra[e];if(!a)return!1;return(oa.value[e]||0)<a.maxLevel},va=m("equip"),ma=v(()=>{const e=new Set(Object.values(ia.equippedArtifacts).filter(Boolean).map(e=>e.id));return ia.items.filter(a=>a.type&&"pill"!==a.type&&"pet"!==a.type&&a.stats&&!e.has(a.id)).length}),ga=v(()=>ia.herbs.length),fa=v(()=>ia.items.filter(e=>"pill"===e.type).length),_a=v(()=>ia.items.filter(e=>"pet"===e.type).length),ba=v(()=>ia.pillRecipes.length),ya=v(()=>[{label:`è£…å¤‡ ${ma.value}/${ca("equip")}`,value:"equip"},{label:`ç„°è‰ ${ga.value}/${ca("herb")}`,value:"herb"},{label:`ç„°ä¸¹ ${fa.value}/${ca("pill")}`,value:"pill"},{label:`ç„°æ–¹ ${ba.value}/${ca("formula")}`,value:"formula"},{label:`ç„°å…½ ${_a.value}/${ca("pet")}`,value:"pet"}]),ha={equip:ma,herb:ga,pill:fa,pet:_a,formula:ba},ka={equip:"è£…å¤‡",herb:"ç„°è‰",pill:"ç„°ä¸¹",pet:"ç„°å…½",formula:"ç„°æ–¹"},qa=v(()=>{var e;return(null==(e=ha[va.value])?void 0:e.value)??0}),wa=v(()=>ca(va.value)),xa=v(()=>ka[va.value]??""),Ra=v(()=>wa.value>0?Math.min(100,Math.round(qa.value/wa.value*100)):0),Aa=v(()=>{const e=[],a=new Set(Object.values(ia.equippedArtifacts).filter(Boolean).map(e=>e.id));ia.items.filter(e=>e.type&&"pill"!==e.type&&"pet"!==e.type&&e.stats&&!a.has(e.id)).forEach(a=>{e.push({...a,_key:"eq-"+a.id,_category:"equip",_emoji:Qa[a.type]||"ğŸ“¦",_icon:Va[a.type]&&!Xa.value[a.type]?Va[a.type]:null,_count:1,_quality:a.quality||"common",_imgFail:!1})});const l={};ia.herbs.forEach(e=>{const a=e.herbId||e.herb_id||e.id,s=Ze[a]||null,t=U[a]||a;l[t]?l[t]._count++:l[t]={...e,_key:"herb-"+t,_category:"herb",_emoji:"ğŸŒ¿",_icon:s,_count:1,_quality:e.quality||"common",_imgFail:!1,_displayName:t}}),e.push(...Object.values(l));const s={};ia.items.filter(e=>"pill"===e.type).forEach(e=>{const a=(l=e.name,la[l]||null);var l;s[e.name]?s[e.name]._count++:s[e.name]={...e,_key:"pill-"+e.name,_category:"pill",_emoji:"ğŸ’Š",_icon:a,_count:1,_quality:e.quality||"common",_imgFail:!1}}),e.push(...Object.values(s)),ia.pillRecipes.forEach(a=>{var l;const s=k.find(e=>e.id===a);s&&e.push({...s,_key:"formula-"+a,_category:"formula",_emoji:"ğŸ“œ",_icon:ta(s.name),_count:1,_quality:(null==(l=s.grade)?void 0:l.replace("grade",""))||"common",_imgFail:!1,_displayName:s.name})});const t={};return ia.items.filter(e=>"pet"===e.type).forEach(e=>{const a=aa(e.name);t[e.name]?t[e.name]._count++:t[e.name]={...e,_key:"pet-"+e.name,_category:"pet",_emoji:"ğŸ¾",_icon:a,_count:1,_quality:e.rarity||"common",_imgFail:!1,_displayName:e.name}}),e.push(...Object.values(t)),e}),ja=v(()=>"equip"===va.value?Aa.value.filter(e=>"equip"===e._category):"herb"===va.value?Aa.value.filter(e=>"herb"===e._category):"pill"===va.value?Aa.value.filter(e=>"pill"===e._category):"formula"===va.value||"pet"===va.value?[]:Aa.value),Fa=v(()=>{const e=ja.value.length,a=e%5;return 0===a?Math.max(0,5-e):5-a}),Sa=e=>"sq-"+(e._quality||"common"),Ca=m(1),La=m(12),Ba=v(()=>{const e=ia.items.filter(e=>"pet"===e.type);return"all"===Ta.value?e:e.filter(e=>e.rarity===Ta.value)}),za=v(()=>{const e=(Ca.value-1)*La.value;return Ba.value.slice(e,e+La.value)}),Da=e=>{La.value=e,Ca.value=1},Pa=async e=>{if(na.isLoggedIn){const a=await ia.usePillOnServer(e.id);a.success?ua.success(a.message):ua.error(a.message)}else{const a=ia.usePill(e);a.success?ua.success(a.message):ua.error(a.message)}},Ea={divine:{name:"ç¥å“",color:"#FF0000",probability:.02,essenceBonus:50},celestial:{name:"ä»™å“",color:"#FFD700",probability:.08,essenceBonus:30},mystic:{name:"ç„å“",color:"#9932CC",probability:.15,essenceBonus:20},spiritual:{name:"çµå“",color:"#1E90FF",probability:.25,essenceBonus:10},mortal:{name:"å‡¡å“",color:"#32CD32",probability:.5,essenceBonus:5}},Ma=m(!1),Oa=m(null),Ia=m(null),$a=m(!1),Ua=m(!1),Na=m(null),Ga=()=>{Na.value=null,$a.value=!1},Ha=async()=>{var e;if(Na.value){if(na.isLoggedIn){const e=await ia.releasePetOnServer(Na.value.id);e.success?ua.success("å·²æ”¾ç”Ÿç„°å…½"):ua.error(e.message||"æ”¾ç”Ÿå¤±è´¥")}else{(null==(e=ia.activePet)?void 0:e.id)===Na.value.id&&(ia.activePet=null);const a=ia.items.findIndex(e=>e.id===Na.value.id);a>-1&&(ia.items.splice(a,1),ia.saveData(),ua.success("å·²æ”¾ç”Ÿç„°å…½"))}$a.value=!1,Ma.value=!1,Na.value=null}},Ta=m("all"),Ja=async()=>{if(na.isLoggedIn){const e=ia.items.filter(e=>{var a;return"pet"===e.type&&e.id!==(null==(a=ia.activePet)?void 0:a.id)&&("all"===Ta.value||e.rarity===Ta.value)});let a=0;for(const l of e){(await ia.releasePetOnServer(l.id)).success&&a++}Ua.value=!1,ua.success(`å·²æ”¾ç”Ÿ ${a} åªç„°å…½`)}else ia.items=ia.items.filter(e=>{var a;return"pet"!==e.type||e.id===(null==(a=ia.activePet)?void 0:a.id)||"all"!==Ta.value&&e.rarity!==Ta.value}),Ua.value=!1,ua.success(`å·²æ”¾ç”Ÿ${"all"===Ta.value?"æ‰€æœ‰":Ea[Ta.value].name}å“é˜¶çš„æœªå‡ºæˆ˜ç„°å…½`)},Ka=e=>{if(!e)return{attack:0,defense:0,health:0};const a={divine:.5,celestial:.3,mystic:.2,spiritual:.1,mortal:.05}[e.rarity]||.05,l=a+(e.star||0)*({divine:.1,celestial:.08,mystic:.06,spiritual:.04,mortal:.02}[e.rarity]||.02)+Math.floor((e.star||0)/5)*(.5*a);return{attack:l,defense:l,health:l}},Wa=e=>10*(e.level||1),Qa={weapon:"âš”ï¸",head:"â›‘ï¸",body:"ğŸ›¡ï¸",legs:"ğŸ‘–",feet:"ğŸ‘¢",shoulder:"ğŸ¦º",hands:"ğŸ§¤",wrist:"âŒš",necklace:"ğŸ“¿",ring1:"ğŸ’",ring2:"ğŸ’",belt:"ğŸ—ï¸",artifact:"ğŸ”®"},Va={weapon:"/assets/images/equip/weapon.png",head:"/assets/images/equip/head.png",body:"/assets/images/equip/body.png",legs:"/assets/images/equip/legs.png",feet:"/assets/images/equip/feet.png",shoulder:"/assets/images/equip/shoulder.png",hands:"/assets/images/equip/hands.png",wrist:"/assets/images/equip/wrist.png",necklace:"/assets/images/equip/necklace.png",ring1:"/assets/images/equip/ring.png",ring2:"/assets/images/equip/ring.png",belt:"/assets/images/equip/belt.png",artifact:"/assets/images/equip/artifact.png"},Xa=m({}),Ya={weapon:"ç„°æ–",head:"å¤´éƒ¨",body:"è¡£æœ",legs:"è£¤å­",feet:"é‹å­",shoulder:"è‚©ç”²",hands:"æ‰‹å¥—",wrist:"æŠ¤è…•",necklace:"ç„°å¿ƒé“¾",ring1:"ç¬¦æ–‡æˆ’1",ring2:"ç¬¦æ–‡æˆ’2",belt:"è…°å¸¦",artifact:"ç„°å™¨"},Za=m(""),el=e=>{Za.value=e,ll.value=e,al.value=!0},al=m(!1),ll=m(""),sl=m("all"),tl=m(1),il=m(8),nl=v(()=>{const e={};return ia.items.filter(e=>!ll.value||e.type===ll.value).forEach(a=>{e[a.quality]=(e[a.quality]||0)+1}),[{label:"ä»™å“",value:"mythic",disabled:!e.mythic},{label:"æå“",value:"legendary",disabled:!e.legendary},{label:"ä¸Šå“",value:"epic",disabled:!e.epic},{label:"ä¸­å“",value:"rare",disabled:!e.rare},{label:"ä¸‹å“",value:"uncommon",disabled:!e.uncommon},{label:"å‡¡å“",value:"common",disabled:!e.common}]}),ul=v(()=>ia.items.filter(e=>!!ll.value&&(e.type===ll.value&&("all"===sl.value||e.quality===sl.value)))),rl=v(()=>{const e=(tl.value-1)*il.value;return ul.value.slice(e,e+il.value)}),ol=e=>{il.value=e,tl.value=1},cl=async()=>{const e=await ia.batchSellEquipments("all"===sl.value?null:sl.value,ll.value);e.success?(ua.success(e.message),na.isLoggedIn&&ia.saveData()):ua.error(e.message||"æ‰¹é‡å–å‡ºå¤±è´¥")},dl=async e=>{const a=await ia.sellEquipment(e);a.success?(ua.success(a.message),vl.value=!1,na.isLoggedIn&&ia.saveData()):ua.error(a.message||"å–å‡ºå¤±è´¥")},pl=e=>{ml.value=e,vl.value=!0},vl=m(!1),ml=m(null),gl=m(!1),fl=async()=>{if(!ml.value)return;const e=function(e,a){if(!e||!e.stats)return{success:!1,message:"æ— æ•ˆçš„è£…å¤‡"};const l=e.enhanceLevel||0;if(l>=H)return{success:!1,message:"è£…å¤‡å·²è¾¾åˆ°æœ€å¤§å¼ºåŒ–ç­‰çº§"};const s=J*(l+1);if(a<s)return{success:!1,message:"å¼ºåŒ–çŸ³ä¸è¶³"};const t=T-.05*l;if(!(Math.random()<t))return{success:!1,message:"å¼ºåŒ–å¤±è´¥",cost:s,oldStats:{...e.stats},newStats:{...e.stats}};const i={...e.stats};return Object.keys(e.stats).forEach(a=>{"number"==typeof e.stats[a]&&(e.stats[a]*=1+K,["critRate","critDamageBoost","dodgeRate","vampireRate","finalDamageBoost","finalDamageReduce"].includes(a)?e.stats[a]=Math.round(100*e.stats[a])/100:e.stats[a]=Math.round(e.stats[a]))}),e.enhanceLevel=(e.enhanceLevel||0)+1,{success:!0,message:"å¼ºåŒ–æˆåŠŸ",cost:s,oldStats:i,newStats:e.stats,newLevel:e.enhanceLevel}}(ml.value,ia.reinforceStones);e.success?(ia.reinforceStones-=e.cost,ml.value.stats={...e.newStats},ml.value.enhanceLevel=e.newLevel,ua.success("æ·¬ç«æˆåŠŸ"),ia.saveData()):ua.error(e.message||"æ·¬ç«å¤±è´¥"),gl.value=!1},_l=m(!1),bl=m(null),yl=async()=>{if(!ml.value)return;const e=function(e,a,l=!0){if(!e||!e.stats||!e.type)return{success:!1,message:"æ— æ•ˆçš„è£…å¤‡"};if(a<W)return{success:!1,message:"æ´—ç»ƒçŸ³ä¸è¶³"};const s={...e.stats},t=V[e.type],i={...e.stats},n=Object.keys(i);return[...new Set(Array.from({length:Math.floor(3*Math.random())+1},()=>Math.floor(Math.random()*n.length)))].slice(0,3).forEach(e=>{const a=n[e];let l=a;const s=i[a];if(Math.random()<Q){const e=t.filter(e=>!n.includes(e)&&e!==a);if(e.length>0){const s=e[Math.floor(Math.random()*e.length)];delete i[a],l=s}}const u=s*(.6*Math.random()-.3+1);["critRate","critDamageBoost","dodgeRate","vampireRate","finalDamageBoost","finalDamageReduce"].includes(l)?i[l]=Math.min(Math.max(Number(u.toFixed(2)),.7*s),1.3*s):i[l]=Math.min(Math.max(Math.round(u),Math.round(.7*s)),Math.round(1.3*s))}),Object.keys(i).length!==n.length?(console.error("å±æ€§æ•°é‡å¼‚å¸¸",{old:n,new:i}),{success:!1,message:"æ´—ç»ƒè¿‡ç¨‹å‡ºç°å¼‚å¸¸",cost:0,oldStats:s,newStats:s}):(l&&(e.stats={...i}),{success:!0,message:l?"æ´—ç»ƒæˆåŠŸ":"ä¿ç•™åŸæœ‰å±æ€§",cost:W,oldStats:s,newStats:i,confirmed:l})}(ml.value,ia.refinementStones,!1);e.success?(ia.refinementStones-=e.cost,bl.value=e,_l.value=!0):ua.error(e.message||"é“­ç¬¦å¤±è´¥")},hl=async e=>{bl.value&&(e?(na.isLoggedIn?(await ia.loadEquipmentFromServer(),ia.recalcArtifactBonuses(),ml.value&&(ml.value.stats=bl.value.newStats)):ml.value.stats=bl.value.newStats,ua.success("å·²ç¡®è®¤æ–°å±æ€§")):ua.info("å·²ä¿ç•™åŸæœ‰å±æ€§"),_l.value=!1,bl.value=null,ia.saveData())},kl=e=>e&&e.stats?Object.values(e.stats).reduce((e,a)=>e+("number"==typeof a?a:0),0):0,ql=async()=>{let e=0;Object.keys(Ya).forEach(a=>{const l=ia.items.filter(e=>e.type===a&&(!e.requiredRealm||ia.level>=e.requiredRealm));if(0===l.length)return;const s=l.reduce((e,a)=>kl(e)>kl(a)?e:a),t=ia.equippedArtifacts[a];if(!t||kl(s)>kl(t)){ia.equipArtifact(s,a).success&&e++}}),e>0?(ua.success(`ä¸€é”®ç©¿æˆ´å®Œæˆï¼Œæ›´æ¢äº† ${e} ä»¶è£…å¤‡`),na.isLoggedIn&&ia.saveData()):ua.info("æ²¡æœ‰æ›´å¼ºçš„è£…å¤‡å¯ä»¥æ›¿æ¢")},wl=async()=>{let e=0;Object.keys(Ya).forEach(a=>{ia.equippedArtifacts[a]&&(ia.unequipArtifact(a),e++)}),e>0?(ua.success(`å·²å¸ä¸‹ ${e} ä»¶è£…å¤‡`),na.isLoggedIn&&ia.saveData()):ua.info("æ²¡æœ‰è£…å¤‡éœ€è¦å¸ä¸‹")},xl=v(()=>({complete:ia.pillRecipes.map(e=>{const a=k.find(a=>a.id===e);return a?{id:a.id,name:a.name,description:a.description,grade:a.grade,type:a.type,isComplete:!0}:null}).filter(Boolean),incomplete:Object.entries(ia.pillFragments).map(([e,a])=>{const l=k.find(a=>a.id===e);return l?{id:l.id,name:l.name,description:l.description,grade:l.grade,type:l.type,isComplete:!1,fragments:a,fragmentsNeeded:l.fragmentsNeeded}:null}).filter(Boolean)})),Rl=v(()=>{if(!ml.value||!ml.value.type)return null;const e=ml.value.slot||ml.value.type,a=ia.equippedArtifacts[e];if(!a)return null;const l={};return new Set([...Object.keys(ml.value.stats),...Object.keys(a.stats)]).forEach(e=>{const s=ml.value.stats[e]||0,t=a.stats[e]||0,i=s-t;l[e]={current:t,selected:s,diff:i,isPositive:i>0}}),l}),Al=[{label:"ç¥å“",value:"divine"},{label:"ä»™å“",value:"celestial"},{label:"ç„å“",value:"mystic"},{label:"çµå“",value:"spiritual"},{label:"å‡¡å“",value:"mortal"}];return(e,v)=>{var m;const b=x,y=C,k=L,w=S,U=R,H=B,T=A,J=j,K=F,W=D,Q=z,V=P,Ze=M,ea=E,la=I,sa=O,ra=$;return g(),a(i,null,[l("div",X,[s(q,null,{default:t(()=>[...v[26]||(v[26]=[l("p",null,[p("ğŸ’ å…±"),l("strong",null,"13ä¸ªè£…å¤‡æ ä½"),p("ï¼šç„°æ–ã€å¤´éƒ¨ã€è¡£æœã€è£¤å­ã€é‹å­ã€è‚©ç”²ã€æ‰‹å¥—ã€æŠ¤è…•ã€ç„°å¿ƒé“¾ã€ç¬¦æ–‡æˆ’Ã—2ã€è…°å¸¦ã€ç„°å™¨")],-1),l("p",null,[p("ğŸ¨ 6ä¸ªå“è´¨ï¼š"),l("strong",null,"å‡¡å“â†’ä¸‹å“â†’ä¸­å“â†’ä¸Šå“â†’æå“â†’ä»™å“")],-1),l("p",null,[p("ğŸ”¥ "),l("strong",null,"æ·¬ç«"),p("ï¼šæ¶ˆè€—æ·¬ç«çŸ³å¼ºåŒ–è£…å¤‡ï¼Œæ¯çº§+10%å±æ€§ï¼Œæœ€é«˜100çº§")],-1),l("p",null,[p("âœ¨ "),l("strong",null,"é“­ç¬¦"),p("ï¼šæ¶ˆè€—ç¬¦æ–‡çŸ³é‡éšæœºå±æ€§ï¼ŒÂ±30%æµ®åŠ¨ï¼Œ30%æ¦‚ç‡æ¢å±æ€§")],-1),l("p",null,"âš¡ ä¸€é”®ç©¿æˆ´/å¸ä¸‹å¿«é€Ÿç®¡ç†è£…å¤‡",-1),l("p",null,[p("ğŸ¾ "),l("strong",null,"ç„°å…½"),p("ï¼šå‡ºæˆ˜è·å¾—å…¨å±æ€§åŠ æˆï¼Œæ¶ˆè€—ç²¾åå‡çº§ï¼ŒåŒååŒå“è´¨ç„°å…½å¯å‡æ˜Ÿ")],-1),l("p",null,[p("ğŸŒ¿ "),l("strong",null,"ç„°è‰"),p("ï¼šç‚¼ä¸¹ææ–™ï¼Œ5ä¸ªå“è´¨ï¼ˆæ™®é€šâ†’ä»™å“ï¼‰ï¼Œå“è´¨è¶Šé«˜æ•ˆæœå€ç‡è¶Šå¤§")],-1),l("p",null,[p("ğŸ’Š "),l("strong",null,"ç„°ä¸¹"),p("ï¼šæœç”¨è·å¾—ä¸´æ—¶buffï¼Œæ•ˆæœéšå¢ƒç•Œæå‡")],-1)])]),_:1}),l("div",Y,[v[29]||(v[29]=l("span",{class:"storage-title"},"ğŸ›ï¸ å‚¨è—å®¤",-1)),l("div",Z,[s(b,{type:"primary",size:"small",onClick:ql},{default:t(()=>[...v[27]||(v[27]=[p("âš¡ ä¸€é”®ç©¿æˆ´",-1)])]),_:1}),s(b,{type:"warning",size:"small",onClick:wl},{default:t(()=>[...v[28]||(v[28]=[p("ğŸ”„ ä¸€é”®å¸ä¸‹",-1)])]),_:1})])]),l("div",ee,[v[30]||(v[30]=l("div",{class:"equip-bar-label"},"å·²è£…å¤‡",-1)),l("div",ae,[(g(),a(i,null,n(Ya,(e,s)=>{var t;return l("div",{key:s,class:o(["equip-bar-slot",f(ia).equippedArtifacts[s]?"eq-quality-"+f(ia).equippedArtifacts[s].quality:"eq-empty"]),onClick:e=>(e=>{ia.equippedArtifacts[e]?pl(ia.equippedArtifacts[e]):el(e)})(s)},[Va[s]&&!Xa.value[s]?(g(),a("img",{key:0,src:Va[s],class:o(["eq-slot-icon",{"eq-slot-icon-empty":!f(ia).equippedArtifacts[s]}]),onError:e=>(e=>{Xa.value[e]=!0})(s)},null,42,se)):(g(),a("span",{key:1,class:o(["eq-slot-emoji",{"eq-slot-emoji-empty":!f(ia).equippedArtifacts[s]}])},u(Qa[s]||"ğŸ“¦"),3)),l("span",te,u(f(ia).equippedArtifacts[s]?f(ia).equippedArtifacts[s].name:e),1),(null==(t=f(ia).equippedArtifacts[s])?void 0:t.enhanceLevel)?(g(),a("span",ie,"+"+u(f(ia).equippedArtifacts[s].enhanceLevel),1)):d("",!0)],10,le)}),64))])]),l("div",ne,[(g(!0),a(i,null,n(ya.value,e=>(g(),a("span",{key:e.value,class:o(["filter-tab",{active:va.value===e.value}]),onClick:a=>va.value=e.value},u(e.label),11,ue))),128))]),(g(),a("div",re,[l("span",oe,u(xa.value)+" "+u(qa.value)+"/"+u(wa.value),1),l("div",ce,[l("div",{class:o(["capacity-fill",{"capacity-full":Ra.value>=90}]),style:r({width:Ra.value+"%"})},null,6)]),pa(va.value)?(g(),c(b,{key:0,size:"tiny",type:"warning",onClick:v[0]||(v[0]=e=>(async e=>{const a=da(e);var l;if(ia.spiritStones<a)ua.error(`ç„°æ™¶ä¸è¶³ï¼Œéœ€è¦${a}ç„°æ™¶`);else try{const a=h(),s=await fetch("/api/storage/expand",{method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer "+a.token},body:JSON.stringify({category:e})}),t=await s.json();t.success?(ia.storageExpand||(ia.storageExpand={}),ia.storageExpand[e]=(ia.storageExpand[e]||0)+1,ia.spiritStones=t.remaining,ua.success(`æ‰©å®¹æˆåŠŸï¼${l=e,{equip:"è£…å¤‡",herb:"ç„°è‰",pill:"ç„°ä¸¹",pet:"ç„°å…½",formula:"ç„°æ–¹"}[l]||l}å®¹é‡æå‡è‡³ ${t.newLimit}`)):ua.error(t.error||"æ‰©å®¹å¤±è´¥")}catch(s){ua.error("ç½‘ç»œé”™è¯¯")}})(va.value))},{default:t(()=>[p(" ğŸ”“ æ‰©å®¹ ("+u(da(va.value))+"ç„°æ™¶) ",1)]),_:1})):(g(),a("span",de,"å·²æ»¡çº§"))])),"formula"!==va.value&&"pet"!==va.value?(g(),a("div",pe,[(g(!0),a(i,null,n(ja.value,e=>(g(),a("div",{key:e._key,class:o(["storage-cell",Sa(e)]),onClick:a=>(e=>{"equip"===e._category?pl(e):"pill"===e._category&&Pa(e)})(e)},[l("div",me,[e._icon&&!e._imgFail?(g(),a("img",{key:0,src:e._icon,class:"cell-img",onError:a=>e._imgFail=!0},null,40,ge)):(g(),a("span",fe,u(e._emoji),1))]),l("span",_e,u(e._displayName||e.name),1),e._count>1?(g(),a("span",be,"Ã—"+u(e._count),1)):d("",!0),"pill"===e._category?(g(),a("span",ye,"æœç”¨")):d("",!0)],10,ve))),128)),(g(!0),a(i,null,n(Fa.value,e=>(g(),a("div",{key:"empty-"+e,class:"storage-cell storage-cell-empty"},[...v[31]||(v[31]=[l("span",{class:"empty-dot"},"Â·",-1)])]))),128))])):d("",!0),"formula"===va.value?(g(),a("div",he,[v[33]||(v[33]=l("div",{class:"equip-bar-label",style:{"margin-top":"16px"}},"ğŸ“œ ç„°æ–¹",-1)),s(U,{type:"segment",size:"small"},{default:t(()=>[s(w,{name:"complete",tab:"å®Œæ•´ç„°æ–¹"},{default:t(()=>[xl.value.complete.length?(g(),a("div",ke,[(g(!0),a(i,null,n(xl.value.complete,e=>(g(),a("div",{key:e.id,class:"storage-cell formula-cell",onClick:()=>{}},[l("div",qe,[ta(e.name)?(g(),a("img",{key:0,src:ta(e.name),class:"cell-img"},null,8,we)):(g(),a("span",xe,"ğŸ“œ"))]),l("span",Re,u(e.name),1),s(y,{type:"success",size:"tiny",style:{"margin-top":"2px"}},{default:t(()=>[...v[32]||(v[32]=[p("å®Œæ•´",-1)])]),_:1})]))),128))])):(g(),c(k,{key:1,description:"æš‚æ— å®Œæ•´ç„°æ–¹",size:"small"}))]),_:1}),s(w,{name:"incomplete",tab:"æ®‹ç¼ºç„°æ–¹"},{default:t(()=>[xl.value.incomplete.length?(g(),a("div",Ae,[(g(!0),a(i,null,n(xl.value.incomplete,e=>(g(),a("div",{key:e.id,class:"storage-cell formula-cell",onClick:()=>{}},[l("div",je,[ta(e.name)?(g(),a("img",{key:0,src:ta(e.name),class:"cell-img"},null,8,Fe)):(g(),a("span",Se,"ğŸ“œ"))]),l("span",Ce,u(e.name),1),s(y,{type:"warning",size:"tiny",style:{"margin-top":"2px"}},{default:t(()=>[p(u(e.fragments)+"/"+u(e.fragmentsNeeded),1)]),_:2},1024)]))),128))])):(g(),c(k,{key:1,description:"æš‚æ— æ®‹ç¼ºç„°æ–¹",size:"small"}))]),_:1})]),_:1})])):d("",!0),"pet"===va.value?(g(),a("div",Le,[l("div",Be,[v[35]||(v[35]=p(" ğŸ¾ ç„°å…½ ",-1)),s(T,{style:{display:"inline-flex","margin-left":"12px"},size:"small"},{default:t(()=>[s(H,{value:Ta.value,"onUpdate:value":v[1]||(v[1]=e=>Ta.value=e),options:Al,placeholder:"å“é˜¶",style:{width:"120px"},size:"small"},null,8,["value"]),s(b,{size:"small",onClick:v[2]||(v[2]=e=>Ua.value=!0),disabled:!f(ia).items.filter(e=>"pet"===e.type).length},{default:t(()=>[...v[34]||(v[34]=[p("ä¸€é”®æ”¾ç”Ÿ",-1)])]),_:1},8,["disabled"])]),_:1})]),s(J,{show:Ua.value,"onUpdate:show":v[4]||(v[4]=e=>Ua.value=e),preset:"dialog",title:"æ‰¹é‡æ”¾ç”Ÿç¡®è®¤",style:{"max-width":"600px",width:"90vw"}},{default:t(()=>[l("p",null,"ç¡®å®šè¦æ”¾ç”Ÿ"+u("all"===Ta.value?"æ‰€æœ‰":Ea[Ta.value].name)+"å“é˜¶çš„æœªå‡ºæˆ˜ç„°å…½å—ï¼Ÿæ­¤æ“ä½œä¸å¯æ’¤é”€ã€‚",1),s(T,{justify:"end",style:{"margin-top":"16px"}},{default:t(()=>[s(b,{size:"small",onClick:v[3]||(v[3]=e=>Ua.value=!1)},{default:t(()=>[...v[36]||(v[36]=[p("å–æ¶ˆ",-1)])]),_:1}),s(b,{size:"small",type:"error",onClick:Ja},{default:t(()=>[...v[37]||(v[37]=[p("ç¡®è®¤æ”¾ç”Ÿ",-1)])]),_:1})]),_:1})]),_:1},8,["show"]),Ba.value.length>12?(g(),c(K,{key:0,page:Ca.value,"onUpdate:page":v[5]||(v[5]=e=>Ca.value=e),"page-size":La.value,"item-count":Ba.value.length,"onUpdate:pageSize":Da,"page-slot":7,style:{margin:"8px 0"}},null,8,["page","page-size","item-count"])):d("",!0),za.value.length?(g(),a("div",ze,[(g(!0),a(i,null,n(za.value,e=>{var s,t;return g(),a("div",{key:e.id,class:o(["storage-cell pet-cell",["pet-q-"+e.rarity,(null==(s=f(ia).activePet)?void 0:s.id)===e.id?"pet-active-cell":""]]),onClick:a=>(e=>{Oa.value=e,Ia.value=null,Ma.value=!0})(e)},[aa(e.name)?(g(),a("img",{key:0,src:aa(e.name),class:"cell-img pet-img",loading:"lazy"},null,8,Pe)):(g(),a("span",Ee,"ğŸ¾")),l("span",Me,u(e.name),1),l("span",Oe,u("â˜…".repeat(Math.min(e.star||0,5))),1),(null==(t=f(ia).activePet)?void 0:t.id)===e.id?(g(),a("span",Ie,"æˆ˜")):d("",!0)],10,De)}),128))])):(g(),c(k,{key:2,description:"æš‚æ— ç„°å…½",size:"small"}))])):d("",!0)]),s(J,{show:Ma.value,"onUpdate:show":v[12]||(v[12]=e=>Ma.value=e),preset:"dialog",title:"ç„°å…½è¯¦æƒ…",style:{"max-width":"600px",width:"90vw"}},{default:t(()=>[Oa.value?(g(),a(i,{key:0},[aa(Oa.value.name)?(g(),a("div",$e,[l("img",{src:aa(Oa.value.name),class:"pet-detail-avatar",loading:"lazy"},null,8,Ue)])):d("",!0),s(Q,{bordered:""},{default:t(()=>[s(W,{label:"åç§°"},{default:t(()=>[p(u(Oa.value.name),1)]),_:1}),s(W,{label:"å“è´¨"},{default:t(()=>[s(y,{style:r({color:Ea[Oa.value.rarity].color})},{default:t(()=>[p(u(Ea[Oa.value.rarity].name),1)]),_:1},8,["style"])]),_:1}),s(W,{label:"ç­‰çº§"},{default:t(()=>[p(u(Oa.value.level||1),1)]),_:1}),s(W,{label:"æ˜Ÿçº§"},{default:t(()=>[p(u(Oa.value.star||0),1)]),_:1}),s(W,{label:"ç„°é˜¶"},{default:t(()=>[p(u(Math.floor((Oa.value.star||0)/5))+"é˜¶",1)]),_:1})]),_:1}),s(V,null,{default:t(()=>[...v[38]||(v[38]=[p("å±æ€§åŠ æˆ",-1)])]),_:1}),s(Q,{bordered:""},{default:t(()=>[s(W,{label:"æ”»å‡»åŠ æˆ"},{default:t(()=>[p("+"+u((100*Ka(Oa.value).attack).toFixed(1))+"%",1)]),_:1}),s(W,{label:"é˜²å¾¡åŠ æˆ"},{default:t(()=>[p("+"+u((100*Ka(Oa.value).defense).toFixed(1))+"%",1)]),_:1}),s(W,{label:"ç”Ÿå‘½åŠ æˆ"},{default:t(()=>[p("+"+u((100*Ka(Oa.value).health).toFixed(1))+"%",1)]),_:1})]),_:1}),s(V,null,{default:t(()=>[...v[39]||(v[39]=[p("ç„°å…½å±æ€§",-1)])]),_:1}),s(ea,null,{default:t(()=>[s(Ze,{title:"å±•å¼€",name:"1"},{default:t(()=>[s(V,null,{default:t(()=>[...v[40]||(v[40]=[p("åŸºç¡€å±æ€§",-1)])]),_:1}),s(Q,{bordered:"",column:2},{default:t(()=>[s(W,{label:"æ”»å‡»åŠ›"},{default:t(()=>{var e;return[p(u((null==(e=Oa.value.combatAttributes)?void 0:e.attack)||0),1)]}),_:1}),s(W,{label:"ç”Ÿå‘½å€¼"},{default:t(()=>{var e;return[p(u((null==(e=Oa.value.combatAttributes)?void 0:e.health)||0),1)]}),_:1}),s(W,{label:"é˜²å¾¡åŠ›"},{default:t(()=>{var e;return[p(u((null==(e=Oa.value.combatAttributes)?void 0:e.defense)||0),1)]}),_:1}),s(W,{label:"é€Ÿåº¦"},{default:t(()=>{var e;return[p(u((null==(e=Oa.value.combatAttributes)?void 0:e.speed)||0),1)]}),_:1})]),_:1}),s(V,null,{default:t(()=>[...v[41]||(v[41]=[p("æˆ˜æ–—å±æ€§",-1)])]),_:1}),s(Q,{bordered:"",column:3},{default:t(()=>[s(W,{label:"æš´å‡»ç‡"},{default:t(()=>{var e;return[p(u((100*((null==(e=Oa.value.combatAttributes)?void 0:e.critRate)||0)).toFixed(1))+"%",1)]}),_:1}),s(W,{label:"è¿å‡»ç‡"},{default:t(()=>{var e;return[p(u((100*((null==(e=Oa.value.combatAttributes)?void 0:e.comboRate)||0)).toFixed(1))+"%",1)]}),_:1}),s(W,{label:"åå‡»ç‡"},{default:t(()=>{var e;return[p(u((100*((null==(e=Oa.value.combatAttributes)?void 0:e.counterRate)||0)).toFixed(1))+"%",1)]}),_:1}),s(W,{label:"çœ©æ™•ç‡"},{default:t(()=>{var e;return[p(u((100*((null==(e=Oa.value.combatAttributes)?void 0:e.stunRate)||0)).toFixed(1))+"%",1)]}),_:1}),s(W,{label:"é—ªé¿ç‡"},{default:t(()=>{var e;return[p(u((100*((null==(e=Oa.value.combatAttributes)?void 0:e.dodgeRate)||0)).toFixed(1))+"%",1)]}),_:1}),s(W,{label:"å¸è¡€ç‡"},{default:t(()=>{var e;return[p(u((100*((null==(e=Oa.value.combatAttributes)?void 0:e.vampireRate)||0)).toFixed(1))+"%",1)]}),_:1})]),_:1}),s(V,null,{default:t(()=>[...v[42]||(v[42]=[p("æˆ˜æ–—æŠ—æ€§",-1)])]),_:1}),s(Q,{bordered:"",column:3},{default:t(()=>[s(W,{label:"æŠ—æš´å‡»"},{default:t(()=>{var e;return[p(u((100*((null==(e=Oa.value.combatAttributes)?void 0:e.critResist)||0)).toFixed(1))+"%",1)]}),_:1}),s(W,{label:"æŠ—è¿å‡»"},{default:t(()=>{var e;return[p(u((100*((null==(e=Oa.value.combatAttributes)?void 0:e.comboResist)||0)).toFixed(1))+"%",1)]}),_:1}),s(W,{label:"æŠ—åå‡»"},{default:t(()=>{var e;return[p(u((100*((null==(e=Oa.value.combatAttributes)?void 0:e.counterResist)||0)).toFixed(1))+"%",1)]}),_:1}),s(W,{label:"æŠ—çœ©æ™•"},{default:t(()=>{var e;return[p(u((100*((null==(e=Oa.value.combatAttributes)?void 0:e.stunResist)||0)).toFixed(1))+"%",1)]}),_:1}),s(W,{label:"æŠ—é—ªé¿"},{default:t(()=>{var e;return[p(u((100*((null==(e=Oa.value.combatAttributes)?void 0:e.dodgeResist)||0)).toFixed(1))+"%",1)]}),_:1}),s(W,{label:"æŠ—å¸è¡€"},{default:t(()=>{var e;return[p(u((100*((null==(e=Oa.value.combatAttributes)?void 0:e.vampireResist)||0)).toFixed(1))+"%",1)]}),_:1})]),_:1}),s(V,null,{default:t(()=>[...v[43]||(v[43]=[p("ç‰¹æ®Šå±æ€§",-1)])]),_:1}),s(Q,{bordered:"",column:3},{default:t(()=>[s(W,{label:"å¼ºåŒ–æ²»ç–—"},{default:t(()=>{var e;return[p(u((100*((null==(e=Oa.value.combatAttributes)?void 0:e.healBoost)||0)).toFixed(1))+"%",1)]}),_:1}),s(W,{label:"å¼ºåŒ–çˆ†ä¼¤"},{default:t(()=>{var e;return[p(u((100*((null==(e=Oa.value.combatAttributes)?void 0:e.critDamageBoost)||0)).toFixed(1))+"%",1)]}),_:1}),s(W,{label:"å¼±åŒ–çˆ†ä¼¤"},{default:t(()=>{var e;return[p(u((100*((null==(e=Oa.value.combatAttributes)?void 0:e.critDamageReduce)||0)).toFixed(1))+"%",1)]}),_:1}),s(W,{label:"æœ€ç»ˆå¢ä¼¤"},{default:t(()=>{var e;return[p(u((100*((null==(e=Oa.value.combatAttributes)?void 0:e.finalDamageBoost)||0)).toFixed(1))+"%",1)]}),_:1}),s(W,{label:"æœ€ç»ˆå‡ä¼¤"},{default:t(()=>{var e;return[p(u((100*((null==(e=Oa.value.combatAttributes)?void 0:e.finalDamageReduce)||0)).toFixed(1))+"%",1)]}),_:1}),s(W,{label:"æˆ˜æ–—å±æ€§æå‡"},{default:t(()=>{var e;return[p(u((100*((null==(e=Oa.value.combatAttributes)?void 0:e.combatBoost)||0)).toFixed(1))+"%",1)]}),_:1}),s(W,{label:"æˆ˜æ–—æŠ—æ€§æå‡"},{default:t(()=>{var e;return[p(u((100*((null==(e=Oa.value.combatAttributes)?void 0:e.resistanceBoost)||0)).toFixed(1))+"%",1)]}),_:1})]),_:1})]),_:1})]),_:1}),s(V,null,{default:t(()=>[...v[44]||(v[44]=[p("æ“ä½œ",-1)])]),_:1}),s(T,{vertical:""},{default:t(()=>[s(T,{justify:"space-between"},{default:t(()=>{var e;return[l("span",null,u((null==(e=f(ia).activePet)?void 0:e.id)===Oa.value.id?"å¬å›ç„°å…½":"å‡ºæˆ˜ç„°å…½"),1),s(b,{size:"small",type:"primary",onClick:v[6]||(v[6]=e=>(async e=>{var a;if("pet"===e.type)if(na.isLoggedIn){let l;l=(null==(a=ia.activePet)?void 0:a.id)===e.id?await ia.recallPetOnServer(e.id):await ia.deployPetOnServer(e.id),l.success?ua.success(l.message):ua.error(l.message||"æ“ä½œå¤±è´¥")}else{const a=ia.usePet(e);a.success?ua.success(a.message):ua.error(a.message||"æ“ä½œå¤±è´¥")}})(Oa.value))},{default:t(()=>{var e;return[p(u((null==(e=f(ia).activePet)?void 0:e.id)===Oa.value.id?"å¬å›":"å‡ºæˆ˜"),1)]}),_:1})]}),_:1}),s(T,{justify:"space-between"},{default:t(()=>{return[l("span",null,"å‡çº§ï¼ˆæ¶ˆè€—"+u(Wa(Oa.value))+" / "+u(f(ia).petEssence)+"ç„°å…½ç²¾åï¼‰",1),s(b,{size:"small",type:"primary",onClick:v[7]||(v[7]=e=>(async e=>{if(na.isLoggedIn){const a=await ia.upgradePetOnServer(e.id);a.success?ua.success(a.message):ua.error(a.message)}else{const a=ia.upgradePet(e,Wa(e));a.success?ua.success(a.message):ua.error(a.message)}})(Oa.value)),disabled:(e=Oa.value,!(ia.petEssence>=Wa(e)))},{default:t(()=>[...v[45]||(v[45]=[p("å‡çº§",-1)])]),_:1},8,["disabled"])];var e}),_:1}),s(T,{justify:"space-between"},{default:t(()=>{return[v[47]||(v[47]=l("span",null,"å‡æ˜Ÿï¼ˆéœ€è¦ç›¸åŒå“è´¨å’Œåå­—çš„ç„°å…½ï¼‰",-1)),s(H,{value:Ia.value,"onUpdate:value":v[8]||(v[8]=e=>Ia.value=e),options:(e=Oa.value,e?ia.items.filter(a=>"pet"===a.type&&a.id!==e.id&&a.star===e.star&&a.rarity===e.rarity&&a.name===e.name).map(e=>({label:`${e.name} (${e.level||1}çº§ ${e.star||0}æ˜Ÿ)`,value:e.id})):[]),placeholder:"é€‰æ‹©å‡æ˜Ÿææ–™",style:{width:"200px"}},null,8,["value","options"]),s(b,{size:"small",type:"warning",onClick:v[9]||(v[9]=e=>(async e=>{if(Ia.value)if(na.isLoggedIn){const a=await ia.evolvePetOnServer(e.id,Ia.value);a.success?(ua.success(a.message),Ia.value=null,Ma.value=!1):ua.error(a.message)}else{const a=ia.items.find(e=>e.id===Ia.value);if(!a)return void ua.error("å‡æ˜Ÿææ–™ç„°å…½ä¸å­˜åœ¨");const l=ia.evolvePet(e,a);l.success?(ua.success(l.message),Ia.value=null,Ma.value=!1):ua.error(l.message)}else ua.error("è¯·é€‰æ‹©ç”¨äºå‡æ˜Ÿçš„ç„°å…½")})(Oa.value)),disabled:!Ia.value},{default:t(()=>[...v[46]||(v[46]=[p("å‡æ˜Ÿ",-1)])]),_:1},8,["disabled"])];var e}),_:1}),s(T,{justify:"space-between"},{default:t(()=>[v[51]||(v[51]=l("span",null,"æ”¾ç”Ÿç„°å…½",-1)),s(b,{size:"small",type:"error",onClick:v[10]||(v[10]=e=>{return a=Oa.value,Na.value=a,void($a.value=!0);var a})},{default:t(()=>[...v[48]||(v[48]=[p("æ”¾ç”Ÿç„°å…½",-1)])]),_:1}),s(J,{show:$a.value,"onUpdate:show":v[11]||(v[11]=e=>$a.value=e),preset:"dialog",title:"ç„°å…½æ”¾ç”Ÿ",style:{"max-width":"600px",width:"90vw"}},{default:t(()=>[Na.value?(g(),a(i,{key:0},[l("p",null,"ç¡®å®šè¦æ”¾ç”Ÿ "+u(Na.value.name)+" å—ï¼Ÿæ­¤æ“ä½œä¸å¯æ’¤é”€ã€‚",1),s(T,{justify:"end",style:{"margin-top":"16px"}},{default:t(()=>[s(b,{size:"small",onClick:Ga},{default:t(()=>[...v[49]||(v[49]=[p("å–æ¶ˆ",-1)])]),_:1}),s(b,{size:"small",type:"error",onClick:Ha},{default:t(()=>[...v[50]||(v[50]=[p("ç¡®è®¤æ”¾ç”Ÿ",-1)])]),_:1})]),_:1})],64)):d("",!0)]),_:1},8,["show"])]),_:1})]),_:1})],64)):d("",!0)]),_:1},8,["show"]),s(J,{show:al.value,"onUpdate:show":v[15]||(v[15]=e=>al.value=e),preset:"dialog",title:`${Ya[ll.value]}åˆ—è¡¨`,style:{"max-width":"800px",width:"90vw"}},{default:t(()=>[s(T,{vertical:""},{default:t(()=>[s(T,{justify:"space-between"},{default:t(()=>[s(H,{value:sl.value,"onUpdate:value":v[13]||(v[13]=e=>sl.value=e),options:nl.value,style:{width:"150px"}},null,8,["value","options"]),s(b,{type:"warning",disabled:0===rl.value.length,onClick:cl},{default:t(()=>[...v[52]||(v[52]=[p("ä¸€é”®å–å‡º",-1)])]),_:1},8,["disabled"])]),_:1}),rl.value.length>8?(g(),c(K,{key:0,page:tl.value,"onUpdate:page":v[14]||(v[14]=e=>tl.value=e),"page-size":il.value,"item-count":ul.value.length,"onUpdate:pageSize":ol,"page-slot":7},null,8,["page","page-size","item-count"])):d("",!0),rl.value.length?(g(),a("div",Ne,[(g(!0),a(i,null,n(rl.value,e=>{var i;return g(),a("div",{key:e.id,onClick:a=>pl(e),class:o(["storage-cell equip-list-cell","sq-"+e.quality])},[l("span",He,u(Qa[e.type]||"ğŸ“¦"),1),l("span",Te,u(e.name),1),e.enhanceLevel?(g(),a("span",Je,"+"+u(e.enhanceLevel),1)):d("",!0),l("span",Ke,u(null==(i=e.qualityInfo)?void 0:i.name),1),s(b,{size:"tiny",type:"warning",class:"cell-sell-btn",onClick:_(a=>dl(e),["stop"])},{default:t(()=>[...v[53]||(v[53]=[p("å–",-1)])]),_:1},8,["onClick"])],10,Ge)}),128))])):(g(),c(k,{key:2,description:"æ²¡æœ‰ä»»ä½•è£…å¤‡"}))]),_:1})]),_:1},8,["show","title"]),s(J,{show:vl.value,"onUpdate:show":v[20]||(v[20]=e=>vl.value=e),preset:"dialog",title:(null==(m=ml.value)?void 0:m.name)||"è£…å¤‡è¯¦æƒ…"},{action:t(()=>[s(T,{justify:"space-between"},{default:t(()=>[s(T,null,{default:t(()=>{var e,a,l,i,n,u;return[s(ra,{trigger:"hover",disabled:(null==(e=ml.value)?void 0:e.id)===(null==(l=f(ia).equippedArtifacts[null==(a=ml.value)?void 0:a.type])?void 0:l.id)},{trigger:t(()=>{var e,a,l,i;return[s(b,{type:"primary",onClick:v[16]||(v[16]=e=>gl.value=!0),disabled:((null==(e=ml.value)?void 0:e.enhanceLevel)||0)>=100||(null==(a=ml.value)?void 0:a.id)!=(null==(i=f(ia).equippedArtifacts[null==(l=ml.value)?void 0:l.type])?void 0:i.id)},{default:t(()=>[...v[56]||(v[56]=[p("æ·¬ç«",-1)])]),_:1},8,["disabled"])]}),default:t(()=>[v[57]||(v[57]=p(" è¯·å…ˆè£…å¤‡åå†æ·¬ç« ",-1))]),_:1},8,["disabled"]),s(ra,{trigger:"hover",disabled:(null==(i=ml.value)?void 0:i.id)===(null==(u=f(ia).equippedArtifacts[null==(n=ml.value)?void 0:n.type])?void 0:u.id)},{trigger:t(()=>{var e,a,l;return[s(b,{type:"info",disabled:0===f(ia).refinementStones||(null==(e=ml.value)?void 0:e.id)!=(null==(l=f(ia).equippedArtifacts[null==(a=ml.value)?void 0:a.type])?void 0:l.id),onClick:yl},{default:t(()=>[...v[58]||(v[58]=[p("é“­ç¬¦",-1)])]),_:1},8,["disabled"])]}),default:t(()=>[v[59]||(v[59]=p(" è¯·å…ˆè£…å¤‡åå†é“­ç¬¦ ",-1))]),_:1},8,["disabled"])]}),_:1}),s(T,null,{default:t(()=>{var e,a,l,s,i,n,u,r;return[(null==(e=ml.value)?void 0:e.id)!=(null==(l=f(ia).equippedArtifacts[null==(a=ml.value)?void 0:a.type])?void 0:l.id)?(g(),c(b,{key:0,onClick:v[17]||(v[17]=e=>(async e=>{const a=ia.equipArtifact(e,e.type);a.success?(ua.success(a.message),al.value=!1,vl.value=!1,na.isLoggedIn&&ia.saveData()):ua.error(a.message||"è£…å¤‡å¤±è´¥")})(ml.value)),disabled:f(ia).level<(null==(s=ml.value)?void 0:s.requiredRealm)},{default:t(()=>[...v[60]||(v[60]=[p("è£…å¤‡",-1)])]),_:1},8,["disabled"])):(g(),c(b,{key:1,onClick:v[18]||(v[18]=e=>(async e=>{if(!e)return void ua.error("æœªé€‰æ‹©è£…å¤‡");const a=e.equippedSlot||e.slot||e.type;ia.unequipArtifact(a)?(vl.value=!1,ua.success("å½“å‰è£…å¤‡å·²å¸ä¸‹"),na.isLoggedIn&&ia.saveData()):ua.error("å¸ä¸‹è£…å¤‡å¤±è´¥")})(ml.value)),disabled:f(ia).level<(null==(i=ml.value)?void 0:i.requiredRealm)},{default:t(()=>[...v[61]||(v[61]=[p("å¸ä¸‹",-1)])]),_:1},8,["disabled"])),(null==(n=ml.value)?void 0:n.id)!=(null==(r=f(ia).equippedArtifacts[null==(u=ml.value)?void 0:u.type])?void 0:r.id)?(g(),c(b,{key:2,type:"error",onClick:v[19]||(v[19]=e=>dl(ml.value))},{default:t(()=>[...v[62]||(v[62]=[p("å‡ºå”®",-1)])]),_:1})):d("",!0)]}),_:1})]),_:1})]),default:t(()=>{var e,o,m;return[s(Q,{bordered:""},{default:t(()=>{var e;return[s(W,{label:"å“è´¨"},{default:t(()=>{var e,a,s;return[l("span",{class:"detail-quality-text",style:r({color:null==(e=ml.value)?void 0:e.qualityInfo.color,textShadow:"0 0 8px "+(null==(a=ml.value)?void 0:a.qualityInfo.color)+"66"})},u(null==(s=ml.value)?void 0:s.qualityInfo.name),5)]}),_:1}),s(W,{label:"ç±»å‹"},{default:t(()=>{var e,a;return[l("span",null,u(Qa[null==(e=ml.value)?void 0:e.type]||"ğŸ“¦")+" "+u(Ya[null==(a=ml.value)?void 0:a.type]),1)]}),_:1}),s(W,{label:"å¼ºåŒ–ç­‰çº§"},{default:t(()=>{var e;return[l("span",We,"+"+u((null==(e=ml.value)?void 0:e.enhanceLevel)||0),1)]}),_:1}),(null==(e=ml.value)?void 0:e.stats)?(g(!0),a(i,{key:0},n(ml.value.stats,(e,a)=>(g(),c(W,{key:a,label:f(N)(a)},{default:t(()=>[p(u(f(G)(a,e)),1)]),_:2},1032,["label"]))),128)):d("",!0)]}),_:1}),Rl.value&&(null==(e=ml.value)?void 0:e.id)!=(null==(m=f(ia).equippedArtifacts[null==(o=ml.value)?void 0:o.type])?void 0:m.id)?(g(),a("div",Qe,[s(V,null,{default:t(()=>[...v[54]||(v[54]=[p("å±æ€§å¯¹æ¯”",-1)])]),_:1}),s(sa,{bordered:!1,"single-line":!1},{default:t(()=>[v[55]||(v[55]=l("thead",null,[l("tr",null,[l("th",null,"å±æ€§"),l("th",null,"å½“å‰è£…å¤‡"),l("th",null,"é€‰ä¸­è£…å¤‡"),l("th",null,"å±æ€§å˜åŒ–")])],-1)),l("tbody",null,[(g(!0),a(i,null,n(Rl.value,(e,i)=>(g(),a("tr",{key:i},[l("td",null,u(f(N)(i)),1),l("td",null,u(f(G)(i,e.current)),1),l("td",null,u(f(G)(i,e.selected)),1),l("td",null,[s(la,{type:e.isPositive?"success":"error"},{default:t(()=>[p(u(e.isPositive?"+":"")+u(f(G)(i,e.diff)),1)]),_:2},1032,["type"])])]))),128))])]),_:1})])):d("",!0)]}),_:1},8,["show","title"]),s(J,{show:gl.value,"onUpdate:show":v[22]||(v[22]=e=>gl.value=e),preset:"dialog",title:"è£…å¤‡æ·¬ç«"},{action:t(()=>[s(T,{justify:"end"},{default:t(()=>{var e;return[s(b,{onClick:v[21]||(v[21]=e=>gl.value=!1)},{default:t(()=>[...v[63]||(v[63]=[p("å–æ¶ˆ",-1)])]),_:1}),s(b,{type:"primary",onClick:fl,disabled:f(ia).reinforceStones<10*(((null==(e=ml.value)?void 0:e.enhanceLevel)||0)+1)},{default:t(()=>[...v[64]||(v[64]=[p("ç¡®è®¤æ·¬ç«",-1)])]),_:1},8,["disabled"])]}),_:1})]),default:t(()=>[s(T,{vertical:""},{default:t(()=>{var e;return[l("p",null,"æ˜¯å¦æ¶ˆè€— "+u(10*(((null==(e=ml.value)?void 0:e.enhanceLevel)||0)+1))+" æ·¬ç«çŸ³æ·¬ç«è£…å¤‡ï¼Ÿ",1),l("p",null,"å½“å‰æ·¬ç«çŸ³æ•°é‡ï¼š"+u(f(ia).reinforceStones),1)]}),_:1})]),_:1},8,["show"]),s(J,{show:_l.value,"onUpdate:show":v[25]||(v[25]=e=>_l.value=e),preset:"dialog",title:"é“­ç¬¦ç»“æœç¡®è®¤"},{action:t(()=>[s(b,{type:"primary",onClick:v[23]||(v[23]=e=>hl(!0))},{default:t(()=>[...v[67]||(v[67]=[p("ç¡®è®¤æ–°å±æ€§",-1)])]),_:1}),s(b,{onClick:v[24]||(v[24]=e=>hl(!1))},{default:t(()=>[...v[68]||(v[68]=[p("ä¿ç•™åŸå±æ€§",-1)])]),_:1})]),default:t(()=>[bl.value?(g(),a("div",Ve,[l("div",Xe,[v[65]||(v[65]=l("h3",null,"åŸå§‹å±æ€§",-1)),(g(!0),a(i,null,n(bl.value.oldStats,(e,l)=>(g(),a("div",{key:l},u(f(N)(l))+": "+u(f(G)(l,e)),1))),128))]),l("div",Ye,[v[66]||(v[66]=l("h3",null,"æ–°å±æ€§",-1)),(g(!0),a(i,null,n(bl.value.newStats,(e,l)=>(g(),a("div",{key:l},u(f(N)(l))+": "+u(f(G)(l,e)),1))),128))])])):d("",!0)]),_:1},8,["show"])],64)}}},[["__scopeId","data-v-9fea9ac0"]]);export{Ze as default};

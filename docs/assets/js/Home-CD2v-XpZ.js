import{_ as a,u as s,a as e}from"./index-C_Usn6qf.js";import{o as l,bg as t,bh as o,F as n,bk as i,bi as c,b1 as v,k as r,bj as u,b7 as d,aW as p,r as m,q as b,bo as h,bf as y}from"./vendor-CBGg7cPT.js";import{u as f}from"./naive-ui-CtewNtT3.js";const k={class:"home-wrapper"},w={class:"particles"},g={class:"home-content"},_={class:"char-card"},C={class:"char-card-inner"},P={class:"char-avatar-wrap"},j=["src"],q={class:"vip-badge"},x={class:"char-info"},N={class:"char-name"},L={class:"char-realm"},A={class:"char-stats"},D={class:"combat-power"},F={key:0,class:"char-wallet"},M={class:"resource-bar"},S={class:"res-icon"},$={class:"res-val"},I={class:"res-label"},B={class:"section-card overview-card"},V={class:"overview-grid"},W={class:"ov-item"},E={class:"ov-progress"},T={class:"ov-val"},z={class:"ov-item"},H={class:"ov-val ov-big"},G={class:"ov-item"},J={class:"ov-val ov-big"},K={class:"ov-item"},O={class:"ov-val ov-big"},Q={class:"ov-row-group"},R={class:"ov-row"},U={class:"ov-row"},X={class:"ov-row-val"},Y={class:"ov-row"},Z={key:1,class:"ov-row-val ov-dim"},aa={class:"ov-row"},sa={class:"ov-row-val"},ea={class:"ov-row"},la={class:"ov-row-val"},ta={class:"ov-row"},oa={class:"ov-row-val"},na={class:"ov-row"},ia={class:"section-card equip-card"},ca={class:"equip-grid"},va={class:"equip-slot-label"},ra={key:1,class:"equip-slot-empty"},ua={class:"section-card shortcut-card"},da={class:"shortcut-grid"},pa=["onClick"],ma={class:"sc-icon"},ba={class:"sc-text"},ha={class:"section-card announce-card"},ya={key:0,class:"announce-list"},fa={class:"announce-text"},ka={key:1,class:"announce-text"},wa=a({__name:"Home",setup(a){const wa=h(),ga=s(),_a=e(),Ca=f(),Pa=m([]),ja=m({vipLevel:0,sectName:"",signDays:0,monthlyCard:!1,ascensionCount:0,mountName:"",titleName:""});l(async()=>{var a,s;try{const a=await fetch("/api/announcements"),s=await a.json();Array.isArray(s)?Pa.value=s.slice(0,5):(null==s?void 0:s.data)&&(Pa.value=s.data.slice(0,5))}catch{}if(_a.token){const e={Authorization:"Bearer "+_a.token};try{const[l,t,o,n,i,c]=await Promise.allSettled([fetch("/api/vip/info",{headers:e}),fetch("/api/sect/my",{headers:e}),fetch("/api/monthly-card/status",{headers:e}),fetch("/api/ascension/info",{headers:e}),fetch("/api/mount/active",{headers:e}),fetch("/api/title/my",{headers:e})]);if("fulfilled"===l.status&&l.value.ok){const a=await l.value.json();ja.value.vipLevel=a.vipLevel||0,ja.value.signDays=a.signDays||0}if("fulfilled"===t.status&&t.value.ok){const s=await t.value.json();ja.value.sectName=(null==(a=s.sect)?void 0:a.name)||""}if("fulfilled"===o.status&&o.value.ok){const a=await o.value.json();ja.value.monthlyCard=a.active||a.hasCard||!1}if("fulfilled"===n.status&&n.value.ok){const a=await n.value.json();ja.value.ascensionCount=a.ascensionCount||0}if("fulfilled"===i.status&&i.value.ok){const a=await i.value.json();ja.value.mountName=(null==(s=a.mount)?void 0:s.name)||"";const e=a.mount;ga.activeMountBonus=e?{attack_bonus:e.attack_bonus||0,defense_bonus:e.defense_bonus||0,health_bonus:e.health_bonus||0,speed_bonus:e.speed_bonus||0}:{attack_bonus:0,defense_bonus:0,health_bonus:0,speed_bonus:0}}if("fulfilled"===c.status&&c.value.ok){const a=await c.value.json(),s=a.titles||a.data||[],e=Array.isArray(s)?s.find(a=>a.is_active):null;ja.value.titleName=(null==e?void 0:e.name)||"",ga.activeTitleBonus=e?{attack_bonus:e.attack_bonus||0,defense_bonus:e.defense_bonus||0,health_bonus:e.health_bonus||0,speed_bonus:e.speed_bonus||0}:{attack_bonus:0,defense_bonus:0,health_bonus:0,speed_bonus:0}}}catch{}}});const qa=b(()=>ga.maxCultivation?Math.min(100,Math.round(ga.cultivation/ga.maxCultivation*100)):0),xa=b(()=>{var a,s,e;const l=(null==(s=null==(a=ga.achievements)?void 0:a.filter(a=>a.completed||a.unlocked))?void 0:s.length)||0,t=(null==(e=ga.achievements)?void 0:e.length)||0;return t>0?`${l}/${t}`:"0"}),Na=a=>{if(a<60)return`${a}ç§’`;if(a<3600)return`${Math.floor(a/60)}åˆ†é’Ÿ`;const s=Math.floor(a/3600),e=Math.floor(a%3600/60);return e>0?`${s}å°æ—¶${e}åˆ†`:`${s}å°æ—¶`},La=b(()=>{const a=ga.level;return a>=13?"/assets/images/char-emperor.png":a>=10?"/assets/images/char-immortal.png":a>=7?"/assets/images/char-cultivator.png":a>=4?"/assets/images/char-warrior.png":"/assets/images/char-mortal.png"}),Aa=b(()=>[{icon:"ğŸ’",label:"ç„°æ™¶",value:ga.spiritStones||0},{icon:"ğŸ’ ",label:"ç„°çµ",value:Math.floor(ga.spirit||0)},{icon:"ğŸ”¨",label:"æ·¬ç«çŸ³",value:ga.reinforceStones||0},{icon:"ğŸ”®",label:"ç¬¦æ–‡çŸ³",value:ga.refinementStones||0},{icon:"ğŸ¾",label:"ç„°å…½ç²¾å",value:ga.petEssence||0}]),Da=[{key:"weapon",label:"æ­¦å™¨"},{key:"head",label:"å¤´éƒ¨"},{key:"body",label:"è¡£æœ"},{key:"legs",label:"è£¤å­"},{key:"feet",label:"é‹å­"},{key:"shoulder",label:"è‚©ç”²"},{key:"hands",label:"æ‰‹å¥—"},{key:"wrist",label:"æŠ¤è…•"},{key:"necklace",label:"é¡¹é“¾"},{key:"ring1",label:"æˆ’æŒ‡1"},{key:"ring2",label:"æˆ’æŒ‡2"},{key:"belt",label:"è…°å¸¦"},{key:"artifact",label:"ç„°å™¨"}],Fa=[{icon:"âš”ï¸",label:"ä¿®ç‚¼",path:"/cultivation"},{icon:"ğŸ’",label:"å‚¨è—å®¤",path:"/inventory"},{icon:"ğŸ°",label:"æŠ½å¡",path:"/gacha"},{icon:"ğŸ”ï¸",label:"ç„šå¤©å¡”",path:"/dungeon"},{icon:"ğŸ§ª",label:"ç‚¼ä¸¹",path:"/alchemy"},{icon:"ğŸ—ºï¸",label:"æ¢ç´¢",path:"/exploration"},{icon:"ğŸª",label:"å•†åº—",path:"/shop"},{icon:"ğŸ‘¤",label:"ä¸ªäºº",path:"/profile"}],Ma={common:"#9e9e9e",uncommon:"#4caf50",rare:"#2196f3",epic:"#9c27b0",legendary:"#ff9800",mythic:"#e91e63"},Sa={divine:{name:"ç¥å“",color:"#FF0000"},celestial:{name:"ä»™å“",color:"#FFD700"},mystic:{name:"ç„å“",color:"#9932CC"},spiritual:{name:"çµå“",color:"#1E90FF"},mortal:{name:"å‡¡å“",color:"#32CD32"}},$a=a=>(Sa[a]||Sa.mortal).name,Ia=()=>{ga.spiritStones+=2e4,ga.isNewPlayer=!1,Ca.success("è·å¾—20000ç„°æ™¶ï¼Œæ–°æ‰‹ç¤¼åŒ…é¢†å–æˆåŠŸï¼")},Ba=a=>({left:(17*a+5)%100+"%",animationDelay:.7*a%5+"s",animationDuration:4+a%4*2+"s",width:3+a%3*2+"px",height:3+a%3*2+"px",opacity:.3+a%4*.15});return(a,s)=>{return y(),t("div",k,[o("div",w,[(y(),t(n,null,i(12,a=>o("span",{key:a,class:"particle",style:d(Ba(a))},null,4)),64))]),o("div",g,[o("div",_,[o("div",C,[o("div",P,[o("img",{src:La.value,class:"char-avatar",alt:"è§’è‰²"},null,8,j),o("span",q,"VIP"+c(v(_a).vipLevel),1)]),o("div",x,[o("div",N,c(v(ga).name),1),o("div",L,c(v(ga).realm),1),o("div",A,[o("span",null,[s[0]||(s[0]=r("ç­‰çº§ ",-1)),o("b",null,c(v(ga).level),1)]),s[2]||(s[2]=o("span",{class:"stat-sep"},"|",-1)),o("span",null,[s[1]||(s[1]=r("æˆ˜åŠ› ",-1)),o("b",D,c((v(ga).getCombatPower()||0).toLocaleString()),1)])]),v(_a).shortWallet?(y(),t("div",F,c(v(_a).shortWallet),1)):u("",!0)])])]),o("div",M,[(y(!0),t(n,null,i(Aa.value,a=>(y(),t("div",{class:"res-item",key:a.label},[o("span",S,c(a.icon),1),o("span",$,c((a.value||0).toLocaleString()),1),o("span",I,c(a.label),1)]))),128))]),o("div",B,[s[14]||(s[14]=o("div",{class:"section-title"},"ğŸ“Š è´¦å·æ¦‚å†µ",-1)),o("div",V,[o("div",W,[s[3]||(s[3]=o("span",{class:"ov-label"},"ä¿®ç‚¼è¿›åº¦",-1)),o("div",E,[o("div",{class:"ov-progress-fill",style:d({width:qa.value+"%"})},null,4)]),o("span",T,c(v(ga).cultivation||0)+"/"+c(v(ga).maxCultivation||100),1)]),o("div",z,[s[4]||(s[4]=o("span",{class:"ov-label"},"é£å‡æ¬¡æ•°",-1)),o("span",H,c(ja.value.ascensionCount),1)]),o("div",G,[s[5]||(s[5]=o("span",{class:"ov-label"},"æ€»ä¿®ç‚¼æ—¶é•¿",-1)),o("span",J,c(Na(v(ga).totalCultivationTime||0)),1)]),o("div",K,[s[6]||(s[6]=o("span",{class:"ov-label"},"æˆå°±å®Œæˆ",-1)),o("span",O,c(xa.value),1)])]),o("div",Q,[o("div",R,[s[7]||(s[7]=o("span",{class:"ov-row-label"},"ğŸ… VIPç­‰çº§",-1)),o("span",{class:p(["ov-row-val","vip-lv-"+v(_a).vipLevel])},"VIP"+c(v(_a).vipLevel),3)]),o("div",U,[s[8]||(s[8]=o("span",{class:"ov-row-label"},"ğŸ›ï¸ å®—é—¨",-1)),o("span",X,c(ja.value.sectName||"æœªåŠ å…¥"),1)]),o("div",Y,[s[9]||(s[9]=o("span",{class:"ov-row-label"},"ğŸ¾ å‡ºæˆ˜ç„°å…½",-1)),v(ga).activePet?(y(),t("span",{key:0,class:"ov-row-val",style:d({color:(e=v(ga).activePet.rarity,(Sa[e]||Sa.mortal).color)})},c(v(ga).activePet.name)+" Â· "+c($a(v(ga).activePet.rarity))+" Lv."+c(v(ga).activePet.level||1),5)):(y(),t("span",Z,"æ— "))]),o("div",aa,[s[10]||(s[10]=o("span",{class:"ov-row-label"},"ğŸ‡ åéª‘",-1)),o("span",sa,c(ja.value.mountName||"æ— "),1)]),o("div",ea,[s[11]||(s[11]=o("span",{class:"ov-row-label"},"ğŸ–ï¸ ç§°å·",-1)),o("span",la,c(ja.value.titleName||"æ— "),1)]),o("div",ta,[s[12]||(s[12]=o("span",{class:"ov-row-label"},"ğŸ“… ç­¾åˆ°å¤©æ•°",-1)),o("span",oa,c(ja.value.signDays)+"å¤©",1)]),o("div",na,[s[13]||(s[13]=o("span",{class:"ov-row-label"},"ğŸ’° æœˆå¡",-1)),o("span",{class:p(["ov-row-val",ja.value.monthlyCard?"ov-active":"ov-dim"])},c(ja.value.monthlyCard?"å·²å¼€é€š":"æœªå¼€é€š"),3)])])]),o("div",ia,[s[15]||(s[15]=o("div",{class:"section-title"},"âš”ï¸ è£…å¤‡æ¦‚è§ˆ",-1)),o("div",ca,[(y(),t(n,null,i(Da,a=>{return o("div",{key:a.key,class:"equip-slot"},[o("span",va,c(a.label),1),v(ga).equippedArtifacts[a.key]?(y(),t("span",{key:0,class:"equip-slot-name",style:d({color:(s=v(ga).equippedArtifacts[a.key].quality,Ma[s]||"#9e9e9e")})},c(v(ga).equippedArtifacts[a.key].name),5)):(y(),t("span",ra,"ç©º"))]);var s}),64))])]),o("div",ua,[s[16]||(s[16]=o("div",{class:"section-title"},"ğŸš€ å¿«æ·å…¥å£",-1)),o("div",da,[(y(),t(n,null,i(Fa,a=>o("div",{key:a.path,class:"shortcut-btn",onClick:s=>v(wa).push(a.path)},[o("span",ma,c(a.icon),1),o("span",ba,c(a.label),1)],8,pa)),64))])]),o("div",ha,[s[18]||(s[18]=o("div",{class:"section-title"},"ğŸ“¢ å…¬å‘Š",-1)),Pa.value.length?(y(),t("div",ya,[(y(!0),t(n,null,i(Pa.value,a=>(y(),t("div",{key:a.id,class:"announce-item"},[s[17]||(s[17]=o("span",{class:"announce-dot"},"Â·",-1)),o("span",fa,c(a.title||a.content),1)]))),128))])):(y(),t("div",ka,"æ¬¢è¿æ¥åˆ°ç«ä¹‹æ–‡æ˜ï¼ç„°é€”æ¼«æ¼«ï¼Œæ„¿ä½ é€†å¤©æ”¹å‘½ã€‚"))]),v(ga).isNewPlayer?(y(),t("div",{key:0,class:"newbie-banner",onClick:Ia}," ğŸ ç‚¹å‡»é¢†å–æ–°æ‰‹ç¤¼åŒ… ")):u("",!0),s[19]||(s[19]=o("div",{class:"home-footer"},[o("span",{class:"version"},"v1.0.5")],-1))])]);var e}}},[["__scopeId","data-v-41b11e81"]]);export{wa as default};
